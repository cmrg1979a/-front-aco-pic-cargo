(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-646e6daa"],{"0e8f":function(e,a,t){"use strict";t("20f6");var o=t("e8f2");a["a"]=Object(o["a"])("flex")},5798:function(e,a,t){"use strict";t.r(a);var o=t("c6a6"),r=t("8336"),n=t("b0af"),s=t("99d9"),i=t("62ad"),l=t("8fea"),c=t("23a7"),d=t("0e8f"),u=t("4bd4"),m=t("132d"),p=t("0fd9"),b=t("2fa4"),f=t("71a3"),_=t("c671"),h=t("fe57"),g=t("8654"),v=function(){var e=this,a=e._self._c;return a(n["a"],{staticClass:"px-5"},[a(s["d"],{attrs:{"primary-title":""}},[a(p["a"],[a(o["a"],{attrs:{items:e.provedores,"item-text":"namelong","item-value":"id",label:"Proveedor",readonly:""},on:{change:function(a){return e.obtenerListado()}},model:{value:e.$store.state.bank.record.id_proveedor,callback:function(a){e.$set(e.$store.state.bank.record,"id_proveedor",a)},expression:"$store.state.bank.record.id_proveedor"}}),a(b["a"])],1)],1),a(s["c"],[a(p["a"],[a(i["a"],{attrs:{cols:"3"}},[a(g["a"],{staticStyle:{"font-size":"20pt, color:'green'"},attrs:{label:"Monto en que va a salir del bancoss",readonly:"",prefix:e.symbol},model:{value:e.montoMonExt,callback:function(a){e.montoMonExt=a},expression:"montoMonExt"}})],1)],1),a(h["a"],{attrs:{color:"#A43542","slider-color":"primary","fixed-tabs":""},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[a(f["a"],{attrs:{href:"#ref1"}},[e._v("STEP 1")]),a(f["a"],{attrs:{href:"#ref2"}},[e._v("STEP 2")]),a(_["a"],{attrs:{value:"ref1"}},[a(p["a"],{staticClass:"mt-5"},[a(i["a"],{attrs:{cols:"3"}}),a(i["a"],{attrs:{cols:"3"}},[e.selected.length>0?a(r["a"],{attrs:{color:"green darken-4",dark:""},on:{click:function(a){return e.continuar()}}},[e._v("Continuar")]):e._e()],1),a(i["a"],{attrs:{md:"12",cols:"12"}},[a(l["a"],{attrs:{headers:e.headers,items:e.$store.state.bank.record.detalle},scopedSlots:e._u([{key:"item.item_moneda",fn:function({item:t}){return[a(o["a"],{attrs:{items:e.$store.state.itemsCoinsList,"item-text":"acronym","item-value":"id",label:"Moneda"},model:{value:t.id_coins,callback:function(a){e.$set(t,"id_coins",a)},expression:"item.id_coins"}})]}},{key:"item.tipo_cambio",fn:function({item:t}){return[a(g["a"],{attrs:{type:"number",step:"0.01"},model:{value:t.tipocambio,callback:function(a){e.$set(t,"tipocambio",a)},expression:"item.tipocambio"}})]}},{key:"item.monto_dolar",fn:function({item:t}){return[a(g["a"],{attrs:{type:"number",step:"0.01"},model:{value:t.monto_dolar,callback:function(a){e.$set(t,"monto_dolar",a)},expression:"item.monto_dolar"}})]}},{key:"item.monto_mon_ex",fn:function({item:t}){return[a(g["a"],{attrs:{type:"number",prefix:e.symbol,"error-messages":t.errorEx},on:{blur:function(a){return e.calcularTotalesInput()}},model:{value:t.monto_mon_ex,callback:function(a){e.$set(t,"monto_mon_ex",a)},expression:"item.monto_mon_ex"}})]}},{key:"item.action",fn:function({item:t}){return[a(r["a"],{attrs:{icon:""}},[a(m["a"],{attrs:{color:"red"},on:{click:function(a){return e.anularPago(t.id)}}},[e._v("mdi-circle-off-outline")])],1)]}}],null,!0),model:{value:e.selected,callback:function(a){e.selected=a},expression:"selected"}})],1)],1)],1),a(_["a"],{attrs:{value:"ref2"}},[a(u["a"],{ref:"frmRegister"},[a(p["a"],{staticClass:"mt-5"},[a(i["a"],{attrs:{md:"3",cols:"3"}},[a(g["a"],{attrs:{label:"N° de Operación","error-messages":e.msgNroOperacion,id:"nro_operacion",rules:[e=>!!e||"Datos Requerido"]},on:{blur:function(a){return e.ValidaNroOp()}},model:{value:e.$store.state.bank.record.nro_operacion,callback:function(a){e.$set(e.$store.state.bank.record,"nro_operacion",a)},expression:"$store.state.bank.record.nro_operacion"}})],1),a(i["a"],{attrs:{cols:"3",md:"3"}},[a(g["a"],{attrs:{type:"date",label:"Fecha de Pago",rules:[e=>!!e||"Datos Requerido"]},model:{value:e.$store.state.bank.record.fecha_pago,callback:function(a){e.$set(e.$store.state.bank.record,"fecha_pago",a)},expression:"$store.state.bank.record.fecha_pago"}})],1),a(i["a"],{attrs:{md:"6",cols:"6"}},[a(r["a"],{attrs:{text:""},on:{click:function(a){return e.abrirSoporte(e.$store.state.bank.record.ruta)}}},[a(m["a"],{attrs:{color:"red"}},[e._v("mdi-file-pdf-box")]),e._v(" "+e._s(e.$store.state.bank.record.nombre_archivo)+" ")],1),a(c["a"],{attrs:{label:"Cargar Archivo","success-messages":e.msgfile,"error-messages":e.errfile,rules:[e=>!!e||"Datos Requerido"],loading:e.loadingFile},on:{change:function(a){return e.uploadFile()}},model:{value:e.payfile,callback:function(a){e.payfile=a},expression:"payfile"}})],1),a(i["a"],{attrs:{md:"4",cols:"4"}},[a(o["a"],{attrs:{items:e.cuentas,"item-text":"label","item-value":"id",label:"Cuenta de Salida de Banco"},model:{value:e.$store.state.bank.record.id_banco,callback:function(a){e.$set(e.$store.state.bank.record,"id_banco",a)},expression:"$store.state.bank.record.id_banco"}})],1),"nuevo"==e.tipo?a(i["a"],{attrs:{md:"4",cols:"4"}},[a(g["a"],{attrs:{readonly:"",label:"Banco:"},model:{value:e.id_cuenta.banco,callback:function(a){e.$set(e.id_cuenta,"banco",a)},expression:"id_cuenta.banco"}})],1):e._e(),"nuevo"==e.tipo?a(i["a"],{attrs:{md:"4",cols:"4"}},[a(g["a"],{attrs:{readonly:"",label:"Moneda:"},model:{value:e.id_cuenta.moneda,callback:function(a){e.$set(e.id_cuenta,"moneda",a)},expression:"id_cuenta.moneda"}})],1):e._e(),"nuevo"==e.tipo?a(i["a"],{attrs:{md:"4",cols:"4"}},[a(g["a"],{attrs:{readonly:"",label:"N° Cuenta:"},model:{value:e.id_cuenta.cuenta,callback:function(a){e.$set(e.id_cuenta,"cuenta",a)},expression:"id_cuenta.cuenta"}})],1):e._e(),"nuevo"==e.tipo?a(i["a"],{attrs:{md:"4",cols:"4"}},[a(g["a"],{attrs:{readonly:"",label:"CCI:"},model:{value:e.id_cuenta.cci,callback:function(a){e.$set(e.id_cuenta,"cci",a)},expression:"id_cuenta.cci"}})],1):e._e(),a(i["a"],{attrs:{md:"4",cols:"4"}},[a(g["a"],{attrs:{label:"Comentarios",placeholder:"Comentarios......"},model:{value:e.$store.state.bank.record.comentarios,callback:function(a){e.$set(e.$store.state.bank.record,"comentarios",a)},expression:"$store.state.bank.record.comentarios"}})],1),a(i["a"],{attrs:{md:"12",cols:"12"}},[a(d["a"],{attrs:{"text-right":""}},[a(r["a"],{attrs:{color:"success"},on:{click:function(a){return e.actualizarPago()}}},[e._v(" Actualizar ")])],1)],1)],1)],1)],1)],1)],1)],1)},x=[],k=(t("14d9"),t("e9f5"),t("7d54"),t("bc3a")),$=t.n(k),y=t("3d20"),P=t.n(y),C=t("2f62"),w={props:["tipo"],data(){return{symbol:"",search:"",montoMonExt:0,selected:[],nro_operacion:"",id_coins:1,date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),payfile:[],payPath:"",id_proveedor:"",boolFile:!1,cuentas:[],id_cuenta:"",tab:null,total:0,step2:!0,name_path:"",url_documento:"",totalPagado:0,tipocambio:1,comentarios:"",loadingFile:!1,errfile:"",msgfile:"",headers:[{text:"Factura",value:"factura"},{text:"Serie",value:"serie"},{text:"Expediente",value:"tipo_gasto"},{text:"Procedencia",value:"tipo_pago"},{text:"Monto Dolar",value:"monto_dolar"},{text:"Tipo de Cambio",value:"tipo_cambio"},{text:"Moneda Pagar",value:"item_moneda"},{text:"Monto Mon Ex",value:"monto_mon_ex",shortable:!1},{text:"Acción",value:"action",shortable:!1}],msgNroOperacion:""}},async mounted(){let e=this;await this.cargarProveedores(),await this.getListBanksDetailsCargar(),await this._getCoinsList(),await this.verPagoRealizado(this.$route.params.nro_operacion),this.calcularTotal(),e.$store.state.drawer=!1},methods:{...Object(C["b"])(["_getListaPagosXProveedorCxP","_uploadFile","getValidaNroOp","cargarProveedores","_getCoinsList","verPagoRealizado","anularPagoRealizado","actualizarPagoRealizado"]),async getListBanksDetailsCargar(){let e=this;var a={method:"get",url:"https://api.agentedecargaonline.com/getListBanksDetailsCargar",params:{id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch},headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"}};await $()(a).then((function(a){e.cuentas=a.data.data})).catch((function(e){console.log(e)}))},validarMonto(e){e.max_pagar>e.monto_deuda?document.getElementById("pago"+e.id).focus():this.calcularTotal()},calcularTotal(){let e=0;this.$store.state.bank.record.detalle.forEach(a=>{e+=parseFloat(a.monto_mon_ex)}),this.montoMonExt=parseFloat(e).toFixed(2)},async uploadFile(){this.msgfile="",this.errfile="",this.payfile?(this.loadingFile=!0,await this._uploadFile(this.payfile),this.loadingFile=!1,this.$store.state.files.payPath?this.msgfile="Archivo cargado":this.errfile="Comuniquese con el admistrador"):this.errfile="Dato Requerido"},async anularPago(e){await P.a.fire({icon:"question",text:"¿Está seguro que desea anular el pago realizado. ? Recuerde que este cambio no es reversible.",confirmButtonText:"Si, anular",cancelButtonText:"Cancelar",showDenyButton:!1,showCancelButton:!0}).then(async a=>{a.isConfirmed&&(await this.anularPagoRealizado(e),this.$router.go(-1))})},async actualizarPago(){let e=[];this.$store.state.bank.record.detalle.forEach(a=>{let t={id:a.id,id_path:this.$store.state.files.payPath,id_cuenta:this.$store.state.bank.record.id_banco,fecha:this.$store.state.bank.record.fecha_pago,monto:a.monto_dolar,nro_operacion:this.$store.state.bank.record.nro_operacion,monto_mon_ex:a.monto_mon_ex,tipocambio:a.tipocambio,id_coins:a.tipocambio,comentarios:this.$store.state.bank.record.comentarios};e.push(t)});let a=await this.actualizarPagoRealizado(e);P.a.fire({icon:a.estadoflag?"success":"error",text:a.mensaje}).then(e=>{e.isConfirmed&&this.$router.go(-1)})},abrirSoporte(e){console.log(e),window.open(e,"_blank")}},computed:{...Object(C["c"])(["itemsProveedorList","listPagosXProveedorCxP","provedores"])},watch:{selected(){this.calcularTotales()}}},z=w,E=t("2877"),F=Object(E["a"])(z,v,x,!1,null,null,null);a["default"]=F.exports}}]);