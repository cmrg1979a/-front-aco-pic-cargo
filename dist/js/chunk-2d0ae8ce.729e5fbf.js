(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ae8ce"],{"0b17":function(t,a,e){"use strict";e.r(a);var r=e("c6a6"),s=e("8336"),i=e("b0af"),c=e("99d9"),n=e("ac7c"),o=e("62ad"),l=e("a523"),d=e("8fea"),u=e("169a"),m=e("4bd4"),h=e("132d"),p=e("da13"),f=e("5d23"),v=e("f774"),b=e("8e36"),w=e("67b6"),g=e("43a6"),k=e("0fd9"),_=e("2fa4"),x=e("b73d"),C=e("8654"),y=(e("e9f5"),e("910d"),function(){var t=this,a=t._self._c;return a(i["a"],{staticClass:"px-5"},[a(i["a"],{attrs:{elevation:"0"}},[t.loading?a(l["a"],{staticStyle:{height:"400px"}},[a(k["a"],{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a(o["a"],{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[t._v(" Cargando información .... ")]),a(o["a"],{attrs:{cols:"6"}},[a(b["a"],{attrs:{color:"deep-purple accent-4",indeterminate:"",height:"6"}})],1)],1)],1):t._e(),t.loading?t._e():a(c["d"],{staticClass:"elevation-0"},[a(C["a"],{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}}),a(_["a"]),a(s["a"],{attrs:{small:"",color:"success"},on:{click:function(a){return t.open_new()}}},[t._v(" Nuevo ")]),a(s["a"],{staticClass:"mx-1",attrs:{small:"",color:"#2962FF",dark:""},on:{click:function(a){return t.open_filter()}}},[t._v(" Fitrar ")]),a(s["a"],{staticClass:"mx-1",attrs:{small:"",color:"#004D40",dark:""}},[t._v(" Exportar ")])],1),t.loading?t._e():a(d["a"],{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.$store.state.bank.list,"item-key":"id",search:t.search},scopedSlots:t._u([{key:"item.status",fn:function({item:a}){return[t._v(" "+t._s(a.status?"Activo":"Inactivo")+" ")]}},{key:"item.action",fn:function({item:e}){return[a(s["a"],{staticClass:"mx-1",attrs:{small:"",icon:""}},[a(h["a"],{attrs:{color:"primary"},on:{click:function(a){return t.open_read(e.id)}}},[t._v("mdi-eye")])],1),a(s["a"],{staticClass:"mx-1",attrs:{small:"",icon:""}},[a(h["a"],{attrs:{color:"#0D47A1"},on:{click:function(a){return t.abrirCuentas(e)}}},[t._v("mdi-bank")])],1),a(s["a"],{staticClass:"mx-1",attrs:{small:"",icon:""}},[a(h["a"],{attrs:{color:"warning"},on:{click:function(a){return t.open_update(e.id)}}},[t._v("mdi-pencil")])],1),e.status?a(s["a"],{staticClass:"mx-1",attrs:{small:"",icon:""},on:{click:function(a){return t.switch_status(e)}}},[a(h["a"],{attrs:{color:"red"}},[t._v("mdi-delete")])],1):t._e()]}}],null,!0)})],1),a(v["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:t.showFilterDrawerNew,callback:function(a){t.showFilterDrawerNew=a},expression:"showFilterDrawerNew"}},[a(p["a"],[a(f["a"],[a(f["c"],{staticClass:"text-h6"},[t._v(" Nuevo Banco ")])],1)],1),a(_["a"]),a(l["a"],[a(c["c"],[a(m["a"],{ref:"formNew"},[a(k["a"],[a(C["a"],{attrs:{type:"text",label:"Acrónimo (*)",rules:[a=>t.validateAcronym(a)],"lazy-validation":"",clearable:""},model:{value:t.record.acronym,callback:function(a){t.$set(t.record,"acronym",a)},expression:"record.acronym"}})],1),a(k["a"],[a(C["a"],{attrs:{type:"text",label:"Nombre (*)",rules:[a=>t.validateName(a)],"lazy-validation":"",clearable:""},model:{value:t.record.name,callback:function(a){t.$set(t.record,"name",a)},expression:"record.name"}})],1),a(k["a"],[a(C["a"],{attrs:{type:"text",label:"Descripción",rules:[a=>t.validateDescription(a)],"lazy-validation":"",clearable:""},model:{value:t.record.description,callback:function(a){t.$set(t.record,"description",a)},expression:"record.description"}})],1)],1),a(k["a"],[a(x["a"],{attrs:{dense:"",label:"Estado: "+(t.record.status?"Activo":"Inactivo"),"hide-details":"",color:"success"},on:{change:t.updateStatus},model:{value:t.record.status,callback:function(a){t.$set(t.record,"status",a)},expression:"record.status"}})],1)],1)],1),a(l["a"],[a(c["a"],{staticClass:"justify-end mt-3"},[a(s["a"],{staticClass:"mx-1",attrs:{color:"success"},on:{click:function(a){return t.insert()}}},[t._v(" Aceptar")]),a(s["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(a){t.showFilterDrawerNew=!t.showFilterDrawerNew}}},[t._v(" Cerrar")])],1)],1)],1),a(v["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:t.showFilterDrawerRead,callback:function(a){t.showFilterDrawerRead=a},expression:"showFilterDrawerRead"}},[t.loading_as?t._e():a(l["a"],[a(p["a"],{staticClass:"px-0"},[a(f["a"],[a(f["c"],{staticClass:"text-h6"},[t._v(" Ver: "+t._s(t.$store.state.bank.record.name)+" ")])],1)],1),a(_["a"]),a(c["c"],[a(k["a"],[a(C["a"],{attrs:{label:"Código",readonly:"",value:t.$store.state.bank.record.code}})],1),a(k["a"],[a(C["a"],{attrs:{label:"Nombre",readonly:"",value:t.$store.state.bank.record.name}})],1),a(k["a"],[a(C["a"],{attrs:{label:"Acrónimo",readonly:"",value:t.$store.state.bank.record.acronym}})],1),a(k["a"],[a(C["a"],{attrs:{label:"Descripción",readonly:"",value:t.$store.state.bank.record.description}})],1),a(k["a"],[a(x["a"],{attrs:{readonly:"",label:"Estado: "+(t.$store.state.bank.record.status?"Activo":"Inactivo"),color:"success"},model:{value:t.$store.state.bank.record.status,callback:function(a){t.$set(t.$store.state.bank.record,"status",a)},expression:"$store.state.bank.record.status"}})],1)],1),a(c["a"],{staticClass:"justify-end mt-3"},[a(s["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(a){t.showFilterDrawerRead=!t.showFilterDrawerRead}}},[t._v(" Cerrar")])],1)],1),t.loading_as?a(l["a"],{staticStyle:{height:"400px"}},[a(k["a"],{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a(o["a"],{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[t._v(" Cargando información .... ")]),a(o["a"],{attrs:{cols:"6"}},[a(b["a"],{attrs:{color:"deep-purple accent-4",indeterminate:"",height:"6"}})],1)],1)],1):t._e()],1),a(v["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:t.showFilterDrawerUpdate,callback:function(a){t.showFilterDrawerUpdate=a},expression:"showFilterDrawerUpdate"}},[t.loading_as?t._e():a(l["a"],[a(p["a"],{staticClass:"px-0"},[a(f["a"],[a(f["c"],{staticClass:"text-h6"},[t._v(" Modificar: "+t._s(t.$store.state.bank.record.name)+" ")])],1)],1),a(_["a"]),a(c["c"],[a(k["a"],[a(C["a"],{attrs:{type:"text",label:"Código",readonly:""},model:{value:t.record.code,callback:function(a){t.$set(t.record,"code",a)},expression:"record.code"}})],1),a(m["a"],{ref:"form"},[a(k["a"],[a(C["a"],{attrs:{type:"text",label:"Acrónimo (*)",rules:[a=>t.validateAcronym(a)],"lazy-validation":"",clearable:""},model:{value:t.record.acronym,callback:function(a){t.$set(t.record,"acronym",a)},expression:"record.acronym"}})],1),a(k["a"],[a(C["a"],{attrs:{type:"text",label:"Nombre (*)",rules:[a=>t.validateName(a)],"lazy-validation":"",clearable:""},model:{value:t.record.name,callback:function(a){t.$set(t.record,"name",a)},expression:"record.name"}})],1),a(k["a"],[a(C["a"],{attrs:{type:"text",label:"Descripción",rules:[a=>t.validateDescription(a)],"lazy-validation":"",clearable:""},model:{value:t.record.description,callback:function(a){t.$set(t.record,"description",a)},expression:"record.description"}})],1)],1),a(k["a"],[a(x["a"],{attrs:{label:"Activo / Inactivo",color:"success"},on:{change:t.updateStatus},model:{value:t.record.status,callback:function(a){t.$set(t.record,"status",a)},expression:"record.status"}})],1)],1),a(c["a"],{staticClass:"justify-end mt-3"},[a(s["a"],{staticClass:"mx-1",attrs:{color:"success"},on:{click:t.submit_update}},[t._v(" Aceptar")]),a(s["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(a){t.showFilterDrawerUpdate=!t.showFilterDrawerUpdate}}},[t._v(" Cerrar")])],1)],1),t.loading_as?a(l["a"],{staticStyle:{height:"400px"}},[a(k["a"],{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a(o["a"],{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[t._v(" Cargando información .... ")]),a(o["a"],{attrs:{cols:"6"}},[a(b["a"],{attrs:{color:"deep-purple accent-4",indeterminate:"",height:"6"}})],1)],1)],1):t._e()],1),a(v["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:t.showFilterDrawer,callback:function(a){t.showFilterDrawer=a},expression:"showFilterDrawer"}},[a(p["a"],[a(f["a"],[a(f["c"],{staticClass:"text-h6"},[t._v(" Filtrar Registros ")])],1)],1),a(_["a"]),a(l["a"],[a(c["c"],[a(k["a"],[a(C["a"],{attrs:{label:"Código",clearable:""},model:{value:t.records.code,callback:function(a){t.$set(t.records,"code",a)},expression:"records.code"}})],1),a(k["a"],[a(C["a"],{attrs:{label:"Acrónimo",clearable:""},model:{value:t.records.acronym,callback:function(a){t.$set(t.records,"acronym",a)},expression:"records.acronym"}})],1),a(k["a"],[a(C["a"],{attrs:{label:"Nombre",clearable:""},model:{value:t.records.name,callback:function(a){t.$set(t.records,"name",a)},expression:"records.name"}})],1),a(k["a"],[a(C["a"],{attrs:{label:"Descripción",clearable:""},model:{value:t.records.description,callback:function(a){t.$set(t.records,"description",a)},expression:"records.description"}})],1),a(k["a"],[a(g["a"],{attrs:{row:"",dense:""},model:{value:t.records.status,callback:function(a){t.$set(t.records,"status",a)},expression:"records.status"}},[a(w["a"],{attrs:{label:"Activo",color:"green",value:1}}),a(w["a"],{attrs:{label:"Inactivo",color:"red",value:0}}),a(w["a"],{attrs:{label:"Todos",color:"blue",value:"null"}})],1)],1)],1)],1),a(l["a"],[a(c["a"],{staticClass:"justify-end mt-3"},[a(s["a"],{staticClass:"mx-1",attrs:{color:"success"},on:{click:function(a){return t.filter()}}},[t._v("Aceptar")]),a(s["a"],{staticClass:"mx-1",attrs:{color:"ligth"},on:{click:function(a){return t.resetRecord("filter")}}},[t._v("Limpiar")]),a(s["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(a){t.showFilterDrawer=!t.showFilterDrawer}}},[t._v(" Cerrar")])],1)],1)],1),a(u["a"],{attrs:{scrollable:"",persistent:"",width:"80%"},model:{value:t.cuentasFlag,callback:function(a){t.cuentasFlag=a},expression:"cuentasFlag"}},[t.datosBanco?a(i["a"],[a(c["d"],{attrs:{"primary-title":""}},[t._v(" "+t._s(t.datosBanco.name)+" "+t._s(t.datosBanco.acronym)+" "),a(_["a"]),a(s["a"],{attrs:{icon:""},on:{click:function(a){t.cuentasFlag=!t.cuentasFlag}}},[a(h["a"],[t._v("mdi-close")])],1)],1),a(c["c"],[a(d["a"],{staticClass:"elevation-1",attrs:{headers:t.headersCuenta,items:t.datosBanco.banks_details,"item-key":"index",dense:"","items-per-page":5},scopedSlots:t._u([{key:"item.coins",fn:function({item:e}){return[a(r["a"],{attrs:{items:t.$store.state.itemsCoinsList,"item-text":"acronym","item-value":"id",readonly:"",dense:""},model:{value:e.id_coin,callback:function(a){t.$set(e,"id_coin",a)},expression:"item.id_coin"}})]}},{key:"item.action",fn:function({item:e}){return[a(k["a"],[a(o["a"],[a(s["a"],{attrs:{icon:""}},[a(h["a"],{attrs:{color:"warning"},on:{click:function(a){return t.abrirCuenta(e)}}},[t._v("mdi-pencil")])],1)],1),a(o["a"],[a(s["a"],{attrs:{color:"error",icon:""},on:{click:function(a){return t.EliminarCuenta(e)}}},[a(h["a"],[t._v("mdi-delete")])],1)],1)],1)]}},{key:"item.esprincipalflag",fn:function({item:a}){return[t._v(" "+t._s(1==a.esprincipalflag?"Si":"No")+" ")]}}],null,!0)})],1),a(c["a"],[a(_["a"]),a(s["a"],{attrs:{color:"success"},on:{click:function(a){return t.abrirNuevaCuenta()}}},[t._v("Nueva Cuenta")])],1)],1):t._e()],1),a(u["a"],{attrs:{scrollable:"",persistent:"",width:"50%"},model:{value:t.cuentaFlag,callback:function(a){t.cuentaFlag=a},expression:"cuentaFlag"}},[t.cuenta?a(i["a"],[a(c["d"],{attrs:{"primary-title":""}}),a(c["c"],[a(m["a"],{ref:"frmCuenta"},[a(r["a"],{attrs:{items:t.$store.state.itemsCoinsList,"item-text":"acronym","item-value":"id",label:"Moneda",rules:[t=>!!t||"Dato Requerido"]},model:{value:t.cuenta.id_coin,callback:function(a){t.$set(t.cuenta,"id_coin",a)},expression:"cuenta.id_coin"}}),a(C["a"],{attrs:{label:"Nro Cuenta",rules:[t=>!!t||"Dato Requerido"]},model:{value:t.cuenta.nrocuenta,callback:function(a){t.$set(t.cuenta,"nrocuenta",a)},expression:"cuenta.nrocuenta"}}),a(C["a"],{attrs:{label:"CCI"},model:{value:t.cuenta.nrocci,callback:function(a){t.$set(t.cuenta,"nrocci",a)},expression:"cuenta.nrocci"}}),t.cuenta.id?a(n["a"],{attrs:{label:1==t.cuenta.status?"Activo":"Inactivo"},model:{value:t.cuenta.status,callback:function(a){t.$set(t.cuenta,"status",a)},expression:"cuenta.status"}}):t._e(),a(n["a"],{attrs:{label:"Usar En FACTURACIÓN DE CONTROL DE GASTOS"},model:{value:t.cuenta.esprincipalflag,callback:function(a){t.$set(t.cuenta,"esprincipalflag",a)},expression:"cuenta.esprincipalflag"}})],1)],1),a(c["a"],[a(_["a"]),a(s["a"],{attrs:{sm:"",color:"success"},on:{click:function(a){return t.guardarCuenta()}}},[t._v("Guardar")]),a(s["a"],{attrs:{sm:"",color:"danger"},on:{click:function(a){t.cuentaFlag=!t.cuentaFlag}}},[t._v("Cerrar")])],1)],1):t._e()],1)],1)}),F=[],D=(e("7d54"),e("2f62")),$=e("3d20"),N=e.n($),B={name:"ListBankComponent",data(){return{datosBanco:null,cuentasFlag:!1,cuentaFlag:!1,cuenta:"",headersCuenta:[{width:"35%",text:"Nro Cuenta",value:"nrocuenta"},{width:"35%",text:"CCI",value:"nrocci"},{width:"10%",text:"Moneda",value:"coins"},{width:"10%",text:"Usar Facturación",value:"esprincipalflag"},{width:"15%",text:"Acción",value:"action",align:"center"}],lstCuentas:[],headers:[{text:"Código",align:"start",value:"code"},{text:"Acrónimo",value:"acronym"},{text:"Nombre",value:"name"},{text:"Descripción",value:"description"},{text:"Estado",value:"status"},{text:"Creación",value:"created_at"},{text:"Última Actualización",value:"updated_at"},{text:"Acciones",value:"action"}],loading:!0,loading_as:!0,item:"",search:"",records:{code:"",name:"",acronym:"",description:"",status:1},record:{id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch,acronym:"",name:"",code:"",description:"",status:1},originalRecord:{},originalRecords:{},showFilterDrawerNew:!1,showFilterDrawerRead:!1,showFilterDrawerUpdate:!1,showFilterDrawer:!1,id:"",response_filter:null}},created(){this.originalRecord={...this.record},this.originalRecords={...this.records}},async mounted(){await this.fetchDataBank(this.records),this.$store.state.mainTitle="Banco",await this._getCoinsList(this.records)},methods:{...Object(D["b"])(["fetchDataBank","insertBank","readBank","updateBank","_getCoinsList","guardarCuentaDetalle","eliminarCuentaDetalle"]),updateStatus(t){this.record.status=t?1:0},abrirCuentas(t){this.cuentasFlag=!0,this.datosBanco={...t}},abrirCuenta(t){this.cuentaFlag=!0,this.cuenta={...t}},abrirNuevaCuenta(){this.cuentaFlag=!0,this.cuenta={id:"",id_bank:this.datosBanco.id,id_coin:"",nrocci:"",nrocuenta:"",status:"",trial438:"",uptated_at:""}},async guardarCuenta(){console.log("dd");let t=!1,a="";this.cuenta.esprincipalflag&&(this.$store.state.bank.list.forEach(e=>{e.banks_details.forEach(r=>{r.esprincipalflag&&r.id!=this.cuenta.id&&(t=!0,a=e.name+" - "+r.nrocuenta)})}),t)?N.a.fire({icon:"error",title:"Error",text:`Ya existe una cuenta principal. ${a}. Actualice`}):(console.log("dd2"),this.$refs.frmCuenta.validate()&&(this.cuenta.status=0==this.cuenta.status||0==this.cuenta.status?0:1,await this.guardarCuentaDetalle(this.cuenta),this.cuentasFlag=!1,this.cuentaFlag=!1))},async insert(){this.$refs.formNew.validate()&&(this.resetRecord("filter"),await this.insertBank(this.record))},async EliminarCuenta(t){console.log(t),N.a.fire({icon:"question",title:"",text:`Desea ${1==t.status?"Activar ":"Eliminar"} la cuenta ${t.nrocuenta} `,showDenyButton:!0,denyButtonText:"Cancelar"}).then(async a=>{a.isConfirmed&&(t.status=1==t.status?1:0,await this.eliminarCuentaDetalle(t)),a.isDenied&&await this.fetchDataBank(this.records)}),this.cuentasFlag=!1},async reset_records(){this.resetRecord("filter"),this.filter()},async resetRecord(t){"filter"==t?this.records={...this.originalRecords}:this.record={...this.originalRecord},this.showFilterDrawer=!1},async switch_status(t){N.a.fire({title:"¿Estás seguro?",text:"Si inactiva el registro, éste no aparecerá disponible en otros formularios ¿Está seguro de que desea inactivarlo?",confirmButtonColor:"red",icon:"question",showCancelButton:!0,confirmButtonText:"Sí, inactivar",cancelButtonColor:"orange",cancelButtonText:"Cancelar"}).then(async a=>{t.status=0,a.isConfirmed?(this.resetRecord("filter"),await this.updateBank(t)):t.status=!status})},open_read(t){this.loading_as=!0,this.showFilterDrawerRead=!this.showFilterDrawerRead,this.readBank(t)},async open_update(t){this.loading_as=!0,this.resetForms(),this.showFilterDrawerUpdate=!this.showFilterDrawerUpdate,await this.readBank(t),this.id=t},async submit_update(){if(this.$refs.form.validate()){let t={id:this.id,acronym:this.record.acronym,name:this.record.name,description:this.record.description,status:this.record.status};this.resetRecord("filter"),await this.updateBank(t)}},open_new(){this.loading_as=!0,this.resetForms(),this.resetRecord(),this.showFilterDrawerNew=!this.showFilterDrawerNew},open_filter(){this.showFilterDrawer=!this.showFilterDrawer},async filter(){let t={...this.records};t.status="null"==t.status?"":t.status,null===t.code&&(t.code=""),null===t.acronym&&(t.acronym=""),null===t.name&&(t.name=""),null===t.description&&(t.description=""),await this.fetchDataBank(t),this.showFilterDrawer=!1},validateAcronym(t){let a=255;return t?!(t.length>a)||`El acrónimo permite hasta ${a} caracteres `:"El acŕonimo es requerido"},validateName(t){let a=255;return t?!(t.length>a)||`El nombre permite hasta ${a} caracteres `:"El nombre es requerido"},validateDescription(t){const a=255;return!(t&&t.length>a)||`La descripción permite hasta ${a} caracteres`},resetForms(){this.$refs.formNew&&this.$refs.formNew.reset(),this.$refs.form&&this.$refs.form.reset()}},computed:{...Object(D["c"])(["list"])},watch:{"$store.state.bank.record":{handler(t,a){if(t&&Object.keys(t).length>0){const{code:a,acronym:e,name:r,description:s,status:i}=t;this.record={code:a,acronym:e,name:r,description:s,status:i},this.loading_as=!1}},immediate:!0},"$store.state.bank.loading":{handler(t,a){this.loading=1!=t},immediate:!0}}},A=B,R=e("2877"),E=Object(R["a"])(A,y,F,!1,null,null,null);a["default"]=E.exports}}]);