(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e8864"],{"8a49":function(t,e,a){"use strict";a.r(e);var r=a("c6a6"),s=a("8336"),i=a("b0af"),o=a("99d9"),c=a("62ad"),n=a("a523"),l=a("8fea"),d=a("4bd4"),u=a("132d"),h=a("da13"),p=a("5d23"),m=a("f774"),w=a("8e36"),f=a("67b6"),v=a("43a6"),b=a("0fd9"),_=a("2fa4"),x=a("b73d"),g=a("8654"),F=(a("e9f5"),a("910d"),function(){var t=this,e=t._self._c;return e(i["a"],{staticClass:"px-5",attrs:{fluid:""}},[t.loading?e(n["a"],{staticStyle:{height:"400px"}},[e(b["a"],{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[e(c["a"],{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[t._v(" Cargando información .... ")]),e(c["a"],{attrs:{cols:"6"}},[e(w["a"],{attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):t._e(),t.loading?t._e():e(o["d"],{staticClass:"elevation-0"},[e(g["a"],{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e(_["a"]),e(s["a"],{attrs:{small:"",color:"success"},on:{click:function(e){return t.open_new()}}},[t._v(" Nuevo ")]),e(s["a"],{staticClass:"mx-1",attrs:{small:"",color:"#2962FF",dark:""},on:{click:function(e){return t.open_filter()}}},[t._v(" Fitrar ")]),e(s["a"],{staticClass:"mx-1",attrs:{small:"",color:"#004D40",dark:""}},[t._v(" Exportar ")])],1),t.loading?t._e():e(l["a"],{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.$store.state.shipment.list,"item-key":"id",search:t.search},scopedSlots:t._u([{key:"item.status",fn:function({item:e}){return[t._v(" "+t._s(e.status?"Activo":"Inactivo")+" ")]}},{key:"item.action",fn:function({item:a}){return[e(s["a"],{attrs:{icon:""}},[e(u["a"],{attrs:{color:"primary"},on:{click:function(e){return t.open_read(a.id)}}},[t._v("mdi-eye")])],1),e(s["a"],{attrs:{icon:""}},[e(u["a"],{attrs:{color:"warning"},on:{click:function(e){return t.open_update(a.id)}}},[t._v("mdi-pencil")])],1),a.status?e(s["a"],{attrs:{icon:"",color:"red"},on:{click:function(e){return t.switch_status(a)}}},[e(u["a"],[t._v("mdi-delete")])],1):t._e()]}}],null,!0)}),e(m["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:t.showFilterDrawerNew,callback:function(e){t.showFilterDrawerNew=e},expression:"showFilterDrawerNew"}},[e(h["a"],[e(p["a"],[e(p["c"],{staticClass:"text-h6"},[t._v(" Nuevo Tipo de Carga ")])],1)],1),e(_["a"]),e(n["a"],{},[e(o["c"],[e(d["a"],{ref:"formNew"},[e(b["a"],[e(g["a"],{attrs:{type:"text",label:"Código (*)",rules:[e=>t.validateFieldTextInForm(e,3,!1,"max")],"lazy-validation":"",clearable:""},model:{value:t.record.code,callback:function(e){t.$set(t.record,"code",e)},expression:"record.code"}})],1),e(b["a"],[e(g["a"],{attrs:{type:"text",label:"Nombre (*)",rules:[e=>t.validateFieldTextInForm(e,50,!1,"max")],"lazy-validation":"",clearable:""},model:{value:t.record.name,callback:function(e){t.$set(t.record,"name",e)},expression:"record.name"}})],1),e(b["a"],[e(g["a"],{attrs:{type:"text",label:"Descripción",rules:[e=>t.validateFieldTextInForm(e,50,!0,"max")],"lazy-validation":"",clearable:""},model:{value:t.record.description,callback:function(e){t.$set(t.record,"description",e)},expression:"record.description"}})],1),e(b["a"],[e(r["a"],{attrs:{label:"Tipo de Transporte (*)",clearable:"",items:t.$store.state.shipment.transports,"item-text":t=>t.code+" - "+t.name,"item-value":"id",rules:[t=>!!t||"Dato requerido"]},model:{value:t.record.id_transport,callback:function(e){t.$set(t.record,"id_transport",e)},expression:"record.id_transport"}})],1)],1),e(b["a"],[e(x["a"],{attrs:{dense:"",label:"Estado: "+(t.record.status?"Activo":"Inactivo"),"hide-details":"",color:"success"},on:{change:t.updateStatus},model:{value:t.record.status,callback:function(e){t.$set(t.record,"status",e)},expression:"record.status"}})],1)],1),e(o["a"],{staticClass:"justify-end mt-3"},[e(s["a"],{staticClass:"mx-1",attrs:{color:"success"},on:{click:function(e){return t.insert()}}},[t._v(" Aceptar")]),e(s["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(e){t.showFilterDrawerNew=!t.showFilterDrawerNew}}},[t._v(" Cerrar")])],1)],1)],1),e(m["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:t.showFilterDrawerRead,callback:function(e){t.showFilterDrawerRead=e},expression:"showFilterDrawerRead"}},[e(h["a"],[e(p["a"],[e(p["c"],{staticClass:"text-h6"},[t._v(" Ver: "+t._s(t.$store.state.shipment.record.name)+" ")])],1)],1),t.loading_as?t._e():e(n["a"],[e(o["c"],[e(b["a"],[e(g["a"],{attrs:{label:"Código",readonly:"",value:t.$store.state.shipment.record.code}})],1),e(b["a"],[e(g["a"],{attrs:{label:"Nombre",readonly:"",value:t.$store.state.shipment.record.name}})],1),e(b["a"],[e(g["a"],{attrs:{label:"Descripción",readonly:"",value:t.$store.state.shipment.record.description}})],1),e(b["a"],[e(g["a"],{attrs:{label:"Tipo de Transporte",readonly:"",value:`${t.$store.state.shipment.record.code_transport} - ${t.$store.state.shipment.record.type_transport}`}})],1),e(b["a"],[e(x["a"],{attrs:{readonly:"",label:"Estado: "+(t.$store.state.shipment.record.status?"Activo":"Inactivo"),color:"success"},model:{value:t.$store.state.shipment.record.status,callback:function(e){t.$set(t.$store.state.shipment.record,"status",e)},expression:"$store.state.shipment.record.status"}})],1)],1),e(o["a"],{staticClass:"justify-end mt-3"},[e(s["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(e){t.showFilterDrawerRead=!t.showFilterDrawerRead}}},[t._v(" Cerrar")])],1)],1),t.loading_as?e(n["a"],{staticStyle:{height:"400px"}},[e(b["a"],{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[e(c["a"],{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[t._v(" Cargando información .... ")]),e(c["a"],{attrs:{cols:"6"}},[e(w["a"],{attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):t._e()],1),e(m["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:t.showFilterDrawerUpdate,callback:function(e){t.showFilterDrawerUpdate=e},expression:"showFilterDrawerUpdate"}},[t.loading_as?t._e():e(n["a"],[e(h["a"],{staticClass:"px-0"},[e(p["a"],[e(p["c"],{staticClass:"text-h6"},[t._v(" Modificar: "+t._s(t.$store.state.shipment.record.name)+" ")])],1)],1),e(_["a"]),e(o["c"],[e(b["a"],[e(g["a"],{attrs:{type:"text",label:"Código",readonly:""},model:{value:t.record.code,callback:function(e){t.$set(t.record,"code",e)},expression:"record.code"}})],1),e(d["a"],{ref:"form"},[e(b["a"],[e(g["a"],{attrs:{type:"text",label:"Nombre (*)",rules:[e=>t.validateFieldTextInForm(e,50,!1,"max")],"lazy-validation":"",clearable:""},model:{value:t.record.name,callback:function(e){t.$set(t.record,"name",e)},expression:"record.name"}})],1),e(b["a"],[e(g["a"],{attrs:{type:"text",label:"Descripción",rules:[e=>t.validateFieldTextInForm(e,50,!0,"max")],"lazy-validation":"",clearable:""},model:{value:t.record.description,callback:function(e){t.$set(t.record,"description",e)},expression:"record.description"}})],1),e(b["a"],[e(r["a"],{attrs:{label:"Tipo de Transporte (*)",items:t.$store.state.shipment.transports,"item-text":t=>t.code+" - "+t.name,"item-value":"id",rules:[t=>!!t||"Dato requerido"],clearable:""},model:{value:t.record.id_transport,callback:function(e){t.$set(t.record,"id_transport",e)},expression:"record.id_transport"}})],1)],1),e(b["a"],[e(x["a"],{attrs:{label:"Estado: "+(t.record.status?"Activo":"Inactivo"),color:"success"},on:{change:t.updateStatus},model:{value:t.record.status,callback:function(e){t.$set(t.record,"status",e)},expression:"record.status"}})],1)],1),e(o["a"],{staticClass:"justify-end mt-3"},[e(s["a"],{staticClass:"mx-1",attrs:{color:"success"},on:{click:t.btnUpdate}},[t._v(" Aceptar")]),e(s["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(e){t.showFilterDrawerUpdate=!t.showFilterDrawerUpdate}}},[t._v(" Cerrar")])],1)],1),t.loading_as?e(n["a"],{staticStyle:{height:"400px"}},[e(b["a"],{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[e(c["a"],{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[t._v(" Cargando información .... ")]),e(c["a"],{attrs:{cols:"6"}},[e(w["a"],{attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):t._e()],1),e(m["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:t.showFilterDrawer,callback:function(e){t.showFilterDrawer=e},expression:"showFilterDrawer"}},[e(n["a"],[e(h["a"],{staticClass:"px-0"},[e(p["a"],[e(p["c"],{staticClass:"text-h6"},[t._v(" Filtrar Registros ")])],1)],1),e(_["a"]),e(o["c"],[e(b["a"],[e(r["a"],{attrs:{label:"Tipo de Transporte",clearable:"",items:t.$store.state.shipment.transports,"item-text":t=>t.code+" - "+t.name,"item-value":"id"},model:{value:t.records.id_transport,callback:function(e){t.$set(t.records,"id_transport",e)},expression:"records.id_transport"}})],1),e(b["a"],[e(g["a"],{attrs:{label:"Nombre",clearable:""},model:{value:t.records.name,callback:function(e){t.$set(t.records,"name",e)},expression:"records.name"}})],1),e(b["a"],[e(g["a"],{attrs:{label:"Descripción",clearable:""},model:{value:t.records.description,callback:function(e){t.$set(t.records,"description",e)},expression:"records.description"}})],1),e(b["a"],[e(v["a"],{attrs:{row:"",dense:""},model:{value:t.records.status,callback:function(e){t.$set(t.records,"status",e)},expression:"records.status"}},[e(f["a"],{attrs:{label:"Activo",color:"green",value:1}}),e(f["a"],{attrs:{label:"Inactivo",color:"red",value:0}}),e(f["a"],{attrs:{label:"Todos",color:"blue",value:"null"}})],1)],1)],1),e(o["a"],{staticClass:"justify-end mt-3"},[e(s["a"],{staticClass:"mx-1",attrs:{color:"success"},on:{click:function(e){return t.filter()}}},[t._v(" Aceptar")]),e(s["a"],{staticClass:"mx-1",attrs:{color:"ligth"},on:{click:function(e){return t.reset_records()}}},[t._v(" Limpiar")]),e(s["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(e){t.showFilterDrawer=!t.showFilterDrawer}}},[t._v(" Cerrar")])],1)],1)],1)],1)}),C=[],y=a("2f62"),D=a("3d20"),k=a.n(D),$={name:"ListShipmentComponent",data(){return{headers:[{text:"Código",align:"start",value:"code"},{text:"Tipo de Transporte",value:"type_transport"},{text:"Nombre",value:"name"},{text:"Descripción",value:"description"},{text:"Estado",value:"status"},{text:"Creación",value:"created_at"},{text:"Última Actualización",value:"updated_at"},{text:"Acciones",value:"action"}],loading:!0,loading_as:!0,item:"",search:"",records:{id_transport:"",name:"",description:"",status:1},record:{code:"",name:"",description:"",id_transport:"",status:1,id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch},originalRecord:{},showFilterDrawerNew:!1,showFilterDrawerRead:!1,showFilterDrawerUpdate:!1,showFilterDrawer:!1,id:"",response_filter:null}},created(){this.originalRecord={...this.record},this.originalRecords={...this.records}},async mounted(){await this.fetchDataShipment(this.records),await this.fetchDataCargarTransport(),this.$store.state.mainTitle="Tipos de Carga"},methods:{...Object(y["b"])(["fetchDataCargarTransport","fetchDataShipment","insertShipment","readShipment","updateShipment"]),updateStatus(t){this.record.status=t?1:0},async insert(){this.$refs.formNew.validate()&&(this.resetRecord("filter"),await this.insertShipment(this.record))},async resetRecord(t){"filter"==t?this.records={...this.originalRecords}:this.record={...this.originalRecord},await this.fetchDataShipment(this.records),this.showFilterDrawer=!1},async reset_records(){this.resetRecord("filter")},async switch_status(t){k.a.fire({title:"¿Estás seguro?",text:"Si inactiva el registro, éste no aparecerá disponible en otros formularios ¿Está seguro de que desea inactivarlo?",confirmButtonColor:"red",icon:"question",showCancelButton:!0,confirmButtonText:"Sí, inactivar",cancelButtonColor:"orange",cancelButtonText:"Cancelar"}).then(async e=>{e.isConfirmed&&(t.status=0,this.resetRecord("filter"),await this.updateShipment(t))})},async open_read(t){this.loading_as=!0,this.resetRecord(),this.showFilterDrawerRead=!this.showFilterDrawerRead,await this.readShipment(t)},async open_update(t){this.loading_as=!0,this.resetForms(),this.showFilterDrawerUpdate=!this.showFilterDrawerUpdate,await this.readShipment(t),this.id=t},async btnUpdate(){let t={id:this.id,name:this.record.name,description:this.record.description,id_transport:this.record.id_transport,status:this.record.status};this.$refs.form.validate()&&(this.resetRecord("filter"),await this.updateShipment(t))},open_new(){this.resetRecord(),this.resetForms(),this.showFilterDrawerNew=!this.showFilterDrawerNew},open_filter(){this.showFilterDrawer=!this.showFilterDrawer},async filter(){let t={...this.records};t.status="null"==t.status?"":t.status,null===t.name&&(t.name=""),null===t.description&&(t.description=""),null===t.id_transport&&(t.id_transport=""),await this.fetchDataShipment(t),this.showFilterDrawer=!1},resetForms(){this.$refs.formNew&&this.$refs.formNew.reset(),this.$refs.form&&this.$refs.form.reset()},validateFieldTextInForm(t,e,a,r){return t||a?"max"==r&&t&&t.length>e?`El campo permite hasta ${e} caracteres`:"equal"!=r||!t||t.length===e||`El campo debe tener ${e} caracteres`:"El campo es requerido"}},computed:{...Object(y["c"])(["list"])},watch:{"$store.state.shipment.record":{handler(t,e){if(t&&Object.keys(t).length>0){const{code:e,name:a,description:r,id_transport:s,status:i}=t;this.record={code:e,name:a,description:r,id_transport:s,status:i},this.loading_as=!1}},immediate:!0},"$store.state.shipment.loading":{handler(t,e){this.loading=1!=t},immediate:!0}}},S=$,T=a("2877"),R=Object(T["a"])(S,F,C,!1,null,null,null);e["default"]=R.exports}}]);