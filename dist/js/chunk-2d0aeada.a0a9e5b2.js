(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aeada"],{"0aa4":function(e,t,a){"use strict";a.r(t);var r=a("8336"),o=a("b0af"),i=a("99d9"),s=a("62ad"),n=a("a523"),d=a("8fea"),c=a("4bd4"),l=a("132d"),u=a("da13"),m=a("5d23"),w=a("f774"),h=a("8e36"),f=a("67b6"),C=a("43a6"),v=a("0fd9"),g=a("2fa4"),p=a("b73d"),b=a("8654"),D=function(){var e=this,t=e._self._c;return t(o["a"],[t(n["a"],{attrs:{fluid:""}},[e.loading?t(n["a"],{staticStyle:{height:"400px"}},[t(v["a"],{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[t(s["a"],{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[e._v(" Cargando información .... ")]),t(s["a"],{attrs:{cols:"6"}},[t(h["a"],{attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):e._e(),e.loading?e._e():t(i["d"],{staticClass:"elevation-0"},[t(b["a"],{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(g["a"]),t(r["a"],{attrs:{small:"",color:"success"},on:{click:function(t){return e.addComentarioPredefinido()}}},[e._v("Nuevo")]),t(r["a"],{staticClass:"ml-1",attrs:{small:"",color:"#2962FF",dark:""},on:{click:function(t){return e.showFilterComentariosPredefinidos()}}},[e._v("Filtrar")]),t(r["a"],{staticClass:"ml-1",attrs:{small:"",color:"#004D40",dark:"",loading:e.isExportBtnLoading},on:{click:e.exportToExcel}},[e._v("Exportar")])],1),e.loading?e._e():t(d["a"],{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.$store.state.comentariosPredefinidos.list,"item-key":"id",search:e.search,loading:e.isDataTableLoading},scopedSlots:e._u([{key:"item.status",fn:function({item:t}){return[e._v(" "+e._s(t.status?"Activo":"Inactivo")+" ")]}},{key:"item.created_at",fn:function({item:t}){return[e._v(" "+e._s(e.getFechaBonita(t.created_at))+" ")]}},{key:"item.updated_at",fn:function({item:t}){return[e._v(" "+e._s(e.getFechaBonita(t.updated_at))+" ")]}},{key:"item.action",fn:function({item:a}){return[t(r["a"],{attrs:{icon:""}},[t(l["a"],{attrs:{color:"warning"},on:{click:function(t){return e.editComentarioPredefinido(a)}}},[e._v("mdi-pencil")])],1),t(r["a"],{attrs:{icon:""}},[t(l["a"],{attrs:{color:"primary"},on:{click:function(t){return e.viewComentarioPredefinido(a)}}},[e._v("mdi-eye")])],1),a.status?t(r["a"],{attrs:{icon:"",color:"red"},on:{click:function(t){return e.changeStatusComentarioPredefinido(a)}}},[t(l["a"],[e._v("mdi-delete")])],1):e._e()]}}],null,!0)}),t(w["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:e.showFilterDrawerNew,callback:function(t){e.showFilterDrawerNew=t},expression:"showFilterDrawerNew"}},[t(u["a"],[t(m["a"],[t(m["c"],{staticClass:"text-h6"},[e._v("NUEVO COMENTARIO")])],1)],1),t(g["a"]),t(n["a"],[t(i["c"],[t(c["a"],{ref:"formNewComentarioPredefinido"},[t(v["a"],[t(b["a"],{attrs:{type:"text",label:"Código",rules:[t=>e.validateCodigo(t)],"lazy-validation":"","error-messages":e.errorCodigo,readonly:"",loading:e.isAutoGeneratingCode},model:{value:e.record.code,callback:function(t){e.$set(e.record,"code",t)},expression:"record.code"}})],1),t(v["a"],[t(b["a"],{attrs:{type:"text",label:"Comentario",rules:[t=>e.validateComentario(t)],"lazy-validation":"","error-messages":e.errorComentario,clearable:""},model:{value:e.record.comentario,callback:function(t){e.$set(e.record,"comentario",t)},expression:"record.comentario"}})],1),t(v["a"],[t(p["a"],{attrs:{dense:"",label:"Estado: "+(e.record.status?"Activo":"Inactivo"),"hide-details":"",color:"success"},model:{value:e.record.status,callback:function(t){e.$set(e.record,"status",t)},expression:"record.status"}})],1)],1)],1)],1),t(n["a"],[t(i["a"],{staticClass:"justify-end mt-3"},[t(r["a"],{staticClass:"mx-1",attrs:{color:"success",loading:e.isSubmitBtnLoading},on:{click:e.saveComentarioPredefinido}},[e._v("Aceptar")]),t(r["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(t){e.showFilterDrawerNew=!e.showFilterDrawerNew}}},[e._v("Cerrar")])],1)],1)],1),t(w["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:e.showFilterDrawerView,callback:function(t){e.showFilterDrawerView=t},expression:"showFilterDrawerView"}},[t(n["a"],[t(u["a"],{staticClass:"px-0"},[t(m["a"],[t(m["c"],{staticClass:"text-h6"},[e._v(" COMENTARIO "+e._s(e.record.code?`[${e.record.code}]`:"")+" - MODO VISTA ")])],1)],1),t(g["a"]),t(i["c"],[t(v["a"],[t(b["a"],{attrs:{label:"Código",readonly:"",value:e.record.code}})],1),t(v["a"],[t(b["a"],{attrs:{label:"Comentario",readonly:"",value:e.record.comentario}})],1),t(v["a"],[t(p["a"],{attrs:{readonly:"",label:"Estado: "+(e.record.status?"Activo":"Inactivo"),color:"success"},model:{value:e.record.status,callback:function(t){e.$set(e.record,"status",t)},expression:"record.status"}})],1)],1),t(i["a"],{staticClass:"justify-end mt-3"},[t(r["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(t){e.showFilterDrawerView=!e.showFilterDrawerView}}},[e._v("Cerrar")])],1)],1)],1),t(w["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:e.showFilterDrawerEdit,callback:function(t){e.showFilterDrawerEdit=t},expression:"showFilterDrawerEdit"}},[t(n["a"],[t(u["a"],{staticClass:"px-0"},[t(m["a"],[t(m["c"],{staticClass:"text-h6"},[e._v(" MODIFICAR COMENTARIO: "+e._s(e.record.code?`[${e.record.code}]`:"")+" ")])],1)],1),t(g["a"]),t(i["c"],[t(c["a"],{ref:"formEditComentarioPredefinido"},[t(v["a"],[t(b["a"],{attrs:{type:"text",label:"Código",readonly:"",loading:e.isAutoGeneratingCode},model:{value:e.record.code,callback:function(t){e.$set(e.record,"code",t)},expression:"record.code"}})],1),t(v["a"],[t(b["a"],{attrs:{type:"text",label:"Comentario",rules:[t=>e.validateComentario(t)],"lazy-validation":"","error-messages":e.errorComentario,clearable:""},on:{blur:function(t){return e.validateComentario()}},model:{value:e.record.comentario,callback:function(t){e.$set(e.record,"comentario",t)},expression:"record.comentario"}})],1),t(v["a"],[t(p["a"],{attrs:{label:"Estado: "+(e.record.status?"Activo":"Inactivo"),color:"success"},model:{value:e.record.status,callback:function(t){e.$set(e.record,"status",t)},expression:"record.status"}})],1)],1)],1),t(i["a"],{staticClass:"justify-end mt-3"},[t(r["a"],{staticClass:"mx-1",attrs:{color:"success",loading:e.isSubmitBtnLoading},on:{click:e.saveChangesComentarioPredefinido}},[e._v("Aceptar")]),t(r["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(t){e.showFilterDrawerEdit=!e.showFilterDrawerEdit}}},[e._v("Cerrar")])],1)],1)],1),t(w["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:e.showFilterDrawer,callback:function(t){e.showFilterDrawer=t},expression:"showFilterDrawer"}},[t(u["a"],[t(m["a"],[t(m["c"],{staticClass:"text-h6"},[e._v(" FILTRAR REGISTROS ")])],1)],1),t(g["a"]),t(n["a"],[t(i["c"],[t(v["a"],[t(b["a"],{attrs:{label:"Código",clearable:""},model:{value:e.filterData.code,callback:function(t){e.$set(e.filterData,"code",t)},expression:"filterData.code"}})],1),t(v["a"],[t(b["a"],{attrs:{label:"Comentario",clearable:""},model:{value:e.filterData.comentario,callback:function(t){e.$set(e.filterData,"comentario",t)},expression:"filterData.comentario"}})],1),t(v["a"],[t(C["a"],{attrs:{row:"",dense:""},model:{value:e.filterData.status,callback:function(t){e.$set(e.filterData,"status",t)},expression:"filterData.status"}},[t(f["a"],{attrs:{label:"Activo",color:"green",value:1}}),t(f["a"],{attrs:{label:"Inactivo",color:"red",value:0}}),t(f["a"],{attrs:{label:"Todos",color:"blue",value:"null"}})],1)],1)],1)],1),t(n["a"],[t(i["a"],{staticClass:"justify-end mt-3"},[t(r["a"],{staticClass:"mx-1",attrs:{color:"success",loading:e.isSubmitBtnLoading},on:{click:e.filterComentariosPredefinidos}},[e._v("Aceptar")]),t(r["a"],{staticClass:"mx-1",attrs:{color:"ligth"},on:{click:e.resetFilterComentariosPredefinidos}},[e._v("Limpiar")]),t(r["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(t){e.showFilterDrawer=!e.showFilterDrawer}}},[e._v("Cerrar")])],1)],1)],1)],1)],1)},x=[],F=(a("e9f5"),a("910d"),a("2f62")),k=a("3d20"),P=a.n(k),_=(a("bc3a"),{name:"ListComentariosPredefinidosComponent",data(){return{headers:[{text:"Código",align:"start",value:"code",width:"15%"},{text:"Comentario",value:"comentario",width:"32.5%"},{text:"Estado",value:"status",width:"12.5%"},{text:"Creación",value:"created_at",width:"15%"},{text:"Última Actualización",value:"updated_at",width:"15%"},{text:"Acciones",value:"action",width:"10%"}],loading:!1,search:"",record:{id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch,code:"",comentario:"",status:1},showFilterDrawerNew:!1,showFilterDrawerView:!1,showFilterDrawerEdit:!1,showFilterDrawer:!1,errorCodigo:null,errorComentario:null,isDataTableLoading:!1,isSubmitBtnLoading:!1,isExportBtnLoading:!1,isAutoGeneratingCode:!1,filterData:{code:"",comentario:"",status:1}}},async mounted(){await this.fetchListadoComentariosPredefinidos(this.filterData),this.$store.state.mainTitle="LISTADO DE COMENTARIOS PREDEFINIDOS DE BITÁCORA"},methods:{...Object(F["b"])(["fetchListadoComentariosPredefinidos","fetchMaxCodeListadoComentariosPredefinidos","insertComentarioPredefinido","deleteComentarioPredefinido","updateComentarioPredefinido","exportToExcelListadoComentarioPredefinidos"]),validateCodigo(e){return e?!(e.length>5)||"El código permite hasta 5 caracteres":"El código es requerido"},validateComentario(e){return e?!(e.length>255)||"El comentario admite hasta 255 caracteres ":"El comentario es requerido"},createCode(){let e=0;this.$store.state.comentariosPredefinidos.list.filter(t=>{e<parseInt(t.code)&&(e=parseInt(t.code))});const t=(parseInt(e)+1).toString().padStart(5,"0");return t},async autogenerateCode(){var e=this;return e.isAutoGeneratingCode=!0,await e.fetchMaxCodeListadoComentariosPredefinidos(),e.isAutoGeneratingCode=!1,(parseInt(e.$store.state.comentariosPredefinidos.maxCode)+1).toString().padStart(5,"0")},async addComentarioPredefinido(){var e=this;e.record.code="",e.record.comentario="",e.record.status=!0,this.$refs.formNewComentarioPredefinido.resetValidation(),e.showFilterDrawerNew=!e.showFilterDrawerNew,await e.autogenerateCode().then(t=>e.record.code=t)},async saveComentarioPredefinido(){var e=this;e.$refs.formNewComentarioPredefinido.validate()&&(e.isSubmitBtnLoading=!0,await e.insertComentarioPredefinido(e.record),e.isSubmitBtnLoading=!1,e.showFilterDrawerUpdate=!e.showFilterDrawerUpdate)},viewComentarioPredefinido(e){var t=this;t.record={...e,status:!!e.status},t.showFilterDrawerView=!t.showFilterDrawerView},async editComentarioPredefinido(e){var t=this;t.record={...e,code:e.code?e.code:"",status:!!e.status},t.showFilterDrawerEdit=!t.showFilterDrawerEdit,t.record.code||await t.autogenerateCode().then(e=>t.record.code=e)},async changeStatusComentarioPredefinido(e){P.a.fire({title:"¿Estás seguro?",text:"Si inactiva el registro, éste no aparecerá disponible en otros formularios ¿Está seguro de que desea inactivarlo?",confirmButtonColor:"red",icon:"question",showCancelButton:!0,confirmButtonText:"Sí, inactivar",cancelButtonColor:"orange",cancelButtonText:"Cancelar"}).then(async t=>{t.isConfirmed&&await this.deleteComentarioPredefinido(e)})},async saveChangesComentarioPredefinido(){var e=this;e.$refs.formEditComentarioPredefinido.validate()&&(e.isSubmitBtnLoading=!0,await e.updateComentarioPredefinido(e.record),e.isSubmitBtnLoading=!1,e.showFilterDrawerUpdate=!e.showFilterDrawerUpdate)},showFilterComentariosPredefinidos(){var e=this;e.showFilterDrawer=!e.showFilterDrawer},async filterComentariosPredefinidos(){var e=this;e.isSubmitBtnLoading=!0,await e.fetchListadoComentariosPredefinidos(e.filterData),e.isSubmitBtnLoading=!1,e.showFilterDrawer=!e.showFilterDrawer},async resetFilterComentariosPredefinidos(){var e=this;e.filterData.code="",e.filterData.comentario="",e.filterData.status=1,await e.fetchListadoComentariosPredefinidos(e.filterData),e.showFilterDrawer=!e.showFilterDrawer},async exportToExcel(){var e=this;e.isExportBtnLoading=!0,await e.exportToExcelListadoComentarioPredefinidos(),e.isExportBtnLoading=!1},getFechaBonita(e){return e?e.split("-").reverse().join("-"):""}},watch:{"$store.state.comentariosPredefinidos.loading":{handler(e,t){this.isDataTableLoading=e},immediate:!0}}}),y=_,E=a("2877"),L=Object(E["a"])(y,D,x,!1,null,null,null);t["default"]=L.exports}}]);