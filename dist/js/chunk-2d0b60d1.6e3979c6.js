(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b60d1"],{"1c09":function(e,a,t){"use strict";t.r(a);var s=t("8336"),r=t("b0af"),o=t("99d9"),i=t("8fea"),n=t("8654"),c=function(){var e=this,a=e._self._c;return a(r["a"],{attrs:{elevation:"2"}},[a(o["d"],{attrs:{"primary-title":""}},[e._v(" REGISTRO DE NUEVA PROGRAMACIÓN ")]),a(o["c"],[e.listado.length>0?a("div",{staticClass:"col-12"},[a(o["d"],{attrs:{"primary-title":""}},[e._v(" Ya existe(n) programación(es): ")]),a(o["b"],{attrs:{"primary-title":""}},[e._v(" Desea asociar a alguna fecha de programación, seleccione una, sino puede seleccionar su propia fecha. ")]),a(i["a"],{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.listado,"item-key":"id","single-select":!0,"show-select":"","items-per-page":5},on:{input:function(a){return e.validarSeleccionado()}},model:{value:e.selected,callback:function(a){e.selected=a},expression:"selected"}})],1):e._e(),a("div",{staticClass:"col-4"},[a(n["a"],{attrs:{label:"Fecha de programación",type:"date"},model:{value:e.fecha,callback:function(a){e.fecha=a},expression:"fecha"}})],1)]),a(o["a"],[a(s["a"],{attrs:{color:"success"},on:{click:e.guardar}},[e._v("Registrar")]),a(s["a"],{attrs:{color:"warning"},on:{click:e.cerrarModal}},[e._v("CancelarSH")])],1)],1)},d=[],l=t("bc3a"),h=t.n(l),m=t("c1df"),p=t.n(m),g={props:["id","tipo","id_master","id_proveedor"],name:"newProgrammedPayment",data:()=>({headers:[{text:"Correlativo",value:"correlativo"},{text:"Fecha Programada",value:"fecha"}],listado:[],selected:[],fecha:p()(new Date).add(7,"days").format("YYYY-MM-DD")}),async mounted(){this.$store.state.spiner=!0,await this.ListProgrammedPayment(),this.$store.state.spiner=!1},methods:{async ListProgrammedPayment(){let e={id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch};var a=this,t={method:"get",url:"https://api.agentedecargaonline.com/ListProgrammedPayment",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:e};await h()(t).then((function(e){a.listado=e.data.data})).catch((function(e){console.log(e)}))},validarSeleccionado(){this.fecha=this.selected[0].fecha},cerrarModal(){let e=this;e.$emit("cerrar",!1)},async guardar(){var e=this;let a={id:this.selected.length>0?this.selected[0].id:0,nuevoflag:!(this.selected.length>0),id_detailspayinvoicecxp:0==e.tipo?e.id:null,id_controlgastosegresos:1==e.tipo?e.id:null,fecha:e.fecha,controlgastoegreso:1==e.tipo,id_master:e.id_master,id_proveedor:e.id_proveedor,STATUS:!0,id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch};var t={method:"post",url:"https://api.agentedecargaonline.com/setProgrammedPayment",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:a};await h()(t).then((function(a){e.ListProgrammedPayment(),e.$store.state.refreshReport=!e.$store.state.refreshReport,e.$swal("Registro Correcto"),e.$emit("cerrar",!1)})).catch((function(e){console.log(e)}))}},watch:{id:function(){this.ListProgrammedPayment(),this.selected=[]}}},u=g,f=t("2877"),v=Object(f["a"])(u,c,d,!1,null,null,null);a["default"]=v.exports}}]);