(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9f9e72d4"],{"0e8f":function(t,e,i){"use strict";i("20f6");var s=i("e8f2");e["a"]=Object(s["a"])("flex")},"17b3":function(t,e,i){},"24f5":function(t,e,i){"use strict";var s=i("8336"),a=i("b0af"),o=i("99d9"),r=i("ac7c"),n=i("62ad"),l=i("169a"),c=i("132d"),d=i("0fd9"),p=i("b974"),u=i("2fa4"),g=i("e0c7"),h=i("8654"),m=(i("e9f5"),i("910d"),function(){var t=this,e=t._self._c;return e(a["a"],{attrs:{elevation:"0"}},[t.dialog?e(l["a"],{attrs:{"max-width":"30%"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(a["a"],[e(o["d"],{attrs:{"primary-title":""}},[t._v(" Nuevo Servicio ")]),e(o["c"],[e(p["a"],{attrs:{items:t.$store.state.pricing.begEndList,"item-text":"name","item-value":"id",label:"Categoria..."},model:{value:t.servicio.id_begend,callback:function(e){t.$set(t.servicio,"id_begend",e)},expression:"servicio.id_begend"}}),e(h["a"],{attrs:{label:"Descripción"},model:{value:t.servicio.service,callback:function(e){t.$set(t.servicio,"service",e)},expression:"servicio.service"}})],1),e(o["a"],[e(u["a"]),e(s["a"],{attrs:{color:"success"},on:{click:function(e){return t.guardarServicio()}}},[t._v("Guardar")]),e(s["a"],{attrs:{color:"red",dark:""},on:{click:function(e){t.dialog=!t.dialog}}},[t._v("Cancelar")])],1)],1)],1):t._e(),e(o["d"],{attrs:{"primary-title":""}},[t._v(" SERVICIOS A REALIZAR: "),e(s["a"],{attrs:{icon:"",color:"primary"},on:{click:function(e){t.dialog=!t.dialog}}},[e(c["a"],[t._v("mdi-plus")])],1)],1),e(g["a"],{staticClass:"mt-0"},[e("h4",[t._v("Desmarque los servicios que NO desea utilizar.")])]),e(o["c"],[e(d["a"],[e(n["a"],{attrs:{cols:"12",lg:"3",xl:"3"}},[e("h4",{staticClass:"mb-2"},[t._v("ORIGEN")]),t._l(t.$store.state.pricing.listServices.filter(t=>"OR"==t.codebegend),(function(i){return e(r["a"],{key:i.id,attrs:{dense:""},on:{change:function(e){return t.showConfirmationDialog(i)}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" "+t._s(i.service)+" ")]},proxy:!0}],null,!0),model:{value:i.status,callback:function(e){t.$set(i,"status",e)},expression:"service.status"}})}))],2),e(n["a"],{attrs:{cols:"12",lg:"3",xl:"3"}},[e("h4",{staticClass:"mb-2"},[t._v("FLETE")]),t._l(t.$store.state.pricing.listServices.filter(t=>"FL"==t.codebegend),(function(i){return e(r["a"],{key:i.id,attrs:{dense:""},on:{change:function(e){return t.showConfirmationDialog(i)}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" "+t._s(i.service)+" ")]},proxy:!0}],null,!0),model:{value:i.status,callback:function(e){t.$set(i,"status",e)},expression:"service.status"}})}))],2),e(n["a"],{attrs:{cols:"12",lg:"3",xl:"3"}},[e("h4",{staticClass:"mb-2"},[t._v("DESTINO")]),t._l(t.$store.state.pricing.listServices.filter(t=>"DE"==t.codebegend),(function(i){return e(r["a"],{key:i.id,attrs:{dense:""},on:{change:function(e){return t.showConfirmationDialog(i)}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" "+t._s(i.service)+" ")]},proxy:!0}],null,!0),model:{value:i.status,callback:function(e){t.$set(i,"status",e)},expression:"service.status"}})}))],2),e(n["a"],{attrs:{cols:"12",lg:"3",xl:"3"}},[e("h4",{staticClass:"mb-2"},[t._v("OPCIONAL")]),t._l(t.$store.state.pricing.listServices.filter(t=>"OP"==t.codebegend),(function(i){return e(r["a"],{key:i.id,attrs:{dense:""},on:{change:function(e){return t.showConfirmationDialog(i)}},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" "+t._s(i.service)+" ")]},proxy:!0}],null,!0),model:{value:i.status,callback:function(e){t.$set(i,"status",e)},expression:"service.status"}})})),e(h["a"],{attrs:{prefix:"$","error-messages":t.$store.state.pricing.errorValorMercancia,label:"Valor de la mercancia",type:"number",step:"0.10",min:"0",placeholder:"Valor de la mercancia...",autocomplete:"off",dense:"",rules:[t=>!!t||"Dato Requerido",t=>/^(?!0\d+|\d*e)\d*(?:\.\d+)?$/.test(t)||"Debe ser un número real entero positivo"]},on:{input:function(e){return t.recargarCostos()},blur:function(e){return t.recargarCostos()}},model:{value:t.$store.state.pricing.datosPrincipales.amount,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"amount",e)},expression:"$store.state.pricing.datosPrincipales.amount"}}),e(h["a"],{attrs:{label:"Descripción de carga",placeholder:"Descripción de carga",autocomplete:"off",dense:""},model:{value:t.$store.state.pricing.datosPrincipales.descripcioncarga,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"descripcioncarga",e)},expression:"$store.state.pricing.datosPrincipales.descripcioncarga"}})],2),t.mostrarContinuarFlag&&t.mostrarBtn?e(n["a"],{staticClass:"my-0 py-0 align-right",staticStyle:{"text-align":"right !important"},attrs:{cols:"12"}},[e(s["a"],{attrs:{color:"#3F51B5",dark:"",small:""},on:{click:function(e){return t.continuarLlenadoCostos()}}},[t._v("Continuar Llenado Costos")])],1):t._e()],1)],1)],1)}),f=[],v=(i("14d9"),i("a732"),i("3d20"),i("2f62")),$={props:{mostrarBtn:{type:Boolean,default:!0}},data(){return{dialog:!1,mostrarContinuarFlag:!0,servicio:{codebegend:"OP",id_begend:"0",service:"",status:!0}}},methods:{...Object(v["b"])(["getItemsServices","getImpuestos","getItemsServicesDetails","getBegEndList"]),guardarServicio(){let t=this.$store.state.pricing.begEndList.filter(t=>t.id==this.servicio.id_begend)[0].code;this.servicio.codebegend=t,this.$store.state.pricing.listServices.push(this.servicio),this.dialog=!1,this.servicio={codebegend:"OP",id_begend:"0",service:"",status:!0}},recargarCostos(){this.$store.state.pricing.errorValorMercancia="",this.$store.state.pricing.actualizarCostosFlag=!this.$store.state.pricing.actualizarCostosFlag},esImportacion(){return this.$store.state.pricing.listModality.some(t=>t.id==this.$store.state.pricing.datosPrincipales.idsentido&&"I"==t.code)},continuarLlenadoCostos(){if(!this.$store.state.pricing.datosPrincipales.amount||this.$store.state.pricing.datosPrincipales.amount<=0)return this.$store.state.pricing.errorValorMercancia="Datos Requeridos y mayor que 0",!1;this.$emit("activarLlenadoCostos"),this.mostrarContinuarFlag=!1},showConfirmationDialog(t){this.$emit("recargarCostos")}}},C=$,b=i("2877"),_=Object(b["a"])(C,m,f,!1,null,null,null);e["a"]=_.exports},"34e1":function(t,e,i){"use strict";var s=i("c65b"),a=i("825a"),o=i("46c4"),r=i("35a1");t.exports=function(t,e){e&&"string"===typeof t||a(t);var i=r(t);return o(a(void 0!==i?s(i,t):t))}},4577:function(t,e,i){"use strict";var s=i("8336"),a=i("ac7c"),o=i("62ad"),r=i("a523"),n=i("0fd9"),l=i("1f4f"),c=function(){var t=this,e=t._self._c;return e(r["a"],{attrs:{fluid:""}},[e("h1",[t._v("Comparativa de Costos")]),e(n["a"],[e(o["a"],{attrs:{cols:"12"}},[e(l["a"],{staticClass:"elevation-1 my-7",attrs:{dense:""}},[e("thead",[e("tr",t._l(t.headers,(function(i,s){return e("th",{key:s,staticClass:"centrado"},[t._v(" "+t._s(i.text)+" ")])})),0)]),e("tbody",t._l(t.opcionesSeleccionadas,(function(i,s){return e("tr",{key:s},[e("td",[t._v("Opción - "+t._s(i.nro_propuesta))]),e("td",[t._v(t._s(i.proveedor))]),t.flete?e("td",{staticClass:"centrado"},[t._v(" "+t._s(i.flete)+" ")]):t._e(),t.origen?e("td",{staticClass:"centrado"},[t._v(" "+t._s(i.origen)+" ")]):t._e(),t.local?e("td",{staticClass:"centrado"},[t._v(" "+t._s(i.local)+" ")]):t._e(),t.aduana?e("td",{staticClass:"centrado"},[t._v(" "+t._s(i.aduana)+" ")]):t._e(),t.almacen?e("td",{staticClass:"centrado"},[t._v(" "+t._s(i.almacen)+" ")]):t._e(),t.gastostercero?e("td",{staticClass:"centrado"},[t._v(" "+t._s(i.gastostercero)+" ")]):t._e(),e("td",{staticClass:"totalClass"},[t._v(t._s(i.total))]),e("td",{staticClass:"centrado"},[t._v(t._s(i.tiempo_transito)+" días")]),e("td",[e(a["a"],{staticClass:"mx-auto",attrs:{label:""},on:{click:function(e){return t.cambiarOpcionSeleccionada(i)}},model:{value:i.selected,callback:function(e){t.$set(i,"selected",e)},expression:"opcion.selected"}})],1)])})),0)])],1),e(o["a"],{staticClass:"izquierda",attrs:{cols:"6"}},[e(s["a"],{attrs:{color:"default"},on:{click:function(e){return t.regregar()}}},[t._v("Anterior")])],1),e(o["a"],{staticClass:"derecha",attrs:{cols:"6"}},[e(s["a"],{attrs:{color:"#3363A2",dark:""},on:{click:function(e){return t.continuar()}}},[t._v("Cotizar Venta final del cliente")])],1)],1)],1)},d=[],p=(i("14d9"),i("e9f5"),i("910d"),i("7d54"),i("a732"),i("54e1")),u=i("3d20"),g=i.n(u),h={mixins:[p["a"]],data(){return{loadingTable:!1,headers:[],opcionesSeleccionadas:[],resumenOpcion:{flete:0,origen:0,gasto:0,aduana:0,almacen:0,gastostercero:0},flete:!1,origen:!1,local:!1,aduana:!1,almacen:!1,gastostercero:!1,totalFleteVentas:0}},async mounted(){this.loadingTable=!1,setTimeout(async()=>{await this.calcularTotalesOpciones(),await this.agregarFilasAlHeader()},2e3)},methods:{regregar(){g.a.fire({icon:"question",html:`<h1>¿Desea regresar a la OPCIÓN - COSTOS ${this.$store.state.pricing.opcionCostos.length}?<h1>`,confirmButtonColor:"green",showCancelButton:!0,cancelButtonColor:"red",confirmButtonText:"<h1>Si, volver</h2>",cancelButtonText:"<h1>Cancelar</h2>",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(t=>{t.isConfirmed&&(this.$store.state.pricing.tab=2)})},agregarFilasAlHeader(){this.headers=[{text:"Tarifa de Costos",value:"tarifa"},{text:"Proveedor Flete",value:"proveedor"}],this.opcionesSeleccionadas.some(t=>parseFloat(t.flete)>0)&&this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"FL"==t.codigo)[0].name,value:"flete"}),this.opcionesSeleccionadas.some(t=>t.flete!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"FL"==t.codigo)[0].name,value:"flete",cellClass:"centrado"}),this.flete=!0),this.opcionesSeleccionadas.some(t=>t.origen!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"OR"==t.codigo)[0].name,value:"origen"}),this.origen=!0),this.opcionesSeleccionadas.some(t=>t.local!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"LO"==t.codigo)[0].name,value:"local"}),this.local=!0),this.opcionesSeleccionadas.some(t=>t.aduana!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"AD"==t.codigo)[0].name,value:"aduana"}),this.aduana=!0),this.opcionesSeleccionadas.some(t=>t.almacen!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"AL"==t.codigo)[0].name,value:"almacen"}),this.almacen=!0),this.opcionesSeleccionadas.some(t=>t.gastostercero!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"GT"==t.codigo)[0].name,value:"gastostercero"}),this.gastostercero=!0),this.headers.push({text:"TOTAL",value:"total"}),this.headers.push({text:"TIEMPO EN TRÁNSITO",value:"tiempo_transito"}),this.headers.push({text:"Usar",value:"selected"})},continuar(){this.$store.state.pricing.opcionCostos.some(t=>t.selected)?g.a.fire({width:1e3,icon:"question",html:`<h1>¿Desea regresar a la OPCIÓN - COSTOS ${this.$store.state.pricing.opcionCostos.length}?</h1>`,confirmButtonColor:"green",showCancelButton:!0,cancelButtonColor:"#4A85D2",confirmButtonText:"<h1>Si, ir a la venta del cliente final</h1>",cancelButtonText:"<h1>Regresar a la comparatirva</h1>",showCloseButton:!0,allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(t=>{t.isConfirmed&&(this.$emit("irVentaCliente"),this.$store.state.pricing.llenadoCostos=!1,this.$store.state.pricing.recargarCostoSeleccionados=!this.$store.state.pricing.recargarCostoSeleccionados,this.$store.state.pricing.page=1)}):g.a.fire({icon:"warning",text:"Para poder continuar, debe seleccionar al menos una opción de costos.",confirmButtonText:"Entendido"})},async calcularTotalesOpciones(){this.opcionesSeleccionadas=[],this.loadingTable=!0,this.$store.state.pricing.opcionCostos.forEach(t=>{let e=t.listCostos.some(t=>1==t.esopcionflag&&4==t.code_cost),i="";if(e){let e=t.listCostos.filter(t=>1==t.esopcionflag&&4==t.code_cost)[0].id_proveedor,s=this.$store.state.proveedor.lstProveedores.filter(t=>t.id==e);s.length>0&&(i=s[0].namelong)}setTimeout(async()=>{await this.calcTotales(t.listCostos),t.proveedor=i,t.flete=this.resumenOpcion.flete?this.currencyFormat(this.resumenOpcion.flete):this.currencyFormat(0),t.origen=this.resumenOpcion.origen?this.currencyFormat(this.resumenOpcion.origen):this.currencyFormat(0),t.local=this.resumenOpcion.gasto?this.currencyFormat(this.resumenOpcion.gasto):this.currencyFormat(0),t.aduana=this.resumenOpcion.aduana?this.currencyFormat(this.resumenOpcion.aduana):this.currencyFormat(0),t.almacen=this.resumenOpcion.almacen?this.currencyFormat(this.resumenOpcion.almacen):this.currencyFormat(0),t.gastostercero=this.resumenOpcion.gastostercero?this.currencyFormat(this.resumenOpcion.gastostercero):this.currencyFormat(0),t.total=this.currencyFormat(parseFloat(this.resumenOpcion.flete?this.resumenOpcion.flete:0)+parseFloat(this.resumenOpcion.origen?this.resumenOpcion.origen:0)+parseFloat(this.resumenOpcion.gasto?this.resumenOpcion.gasto:0)+parseFloat(this.resumenOpcion.aduana?this.resumenOpcion.aduana:0)+parseFloat(this.resumenOpcion.almacen?this.resumenOpcion.almacen:0)+parseFloat(this.resumenOpcion.gastostercero?this.resumenOpcion.gastostercero:0)),this.opcionesSeleccionadas.push(t)},100)}),this.loadingTable=!1},async calcTotales(t){await this.calcularTotalesFleteVentas(t),await this.calcularTotalesFlete(t),await this.calcularTotalesNoFlete(t)},calcularTotalesFleteVentas(t){this.totalFleteVentas=0,this.isFlete(t)&&t.filter(t=>1==t.esfleteflag&&1==t.status&&1==t.esventaflag).forEach(t=>{this.isNotPorcentaje(t,t.id_multiplicador)&&(this.totalFleteVentas+=(this.$store.state.pricing.listMultiplicador.filter(e=>e.id==t.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(e=>e.id==t.id_multiplicador)[0].valor:0)*t.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(e=>e.id==t.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(e=>e.id==t.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount))})},calcularTotalesFlete(t){this.totalOption=0,this.resumenOpcion={flete:0,origen:0,gasto:0,aduana:0,almacen:0,gastostercero:0},this.isFlete(t)&&t.filter(t=>1==t.esfleteflag&&1==t.status&&1==t.esopcionflag).forEach(t=>{this.isNotPorcentaje(t,t.id_multiplicador)?this.resumenOpcion.flete+=(this.$store.state.pricing.listMultiplicador.filter(e=>e.id==t.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(e=>e.id==t.id_multiplicador)[0].valor:0)*t.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(e=>e.id==t.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(e=>e.id==t.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount):this.resumenOpcion.flete+=this.calcularValor(this.$store.state.pricing.datosPrincipales.amount,this.totalFleteVentas,this.$store.state.pricing.listMultiplicador.filter(e=>e.id==t.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(e=>e.id==t.id_multiplicador)[0].code:"",this.$store.state.pricing.listMultiplicador.some(e=>e.id==t.id_multiplicador&&(14==e.code||13==e.code||5==e.code))?this.$store.state.pricing.listMultiplicador.some(e=>e.id==t.id_multiplicador&&(14==e.code||13==e.code))?t.cif:t.seguro:0)})},calcularTotalesNoFlete(t){this.resumenOpcion={flete:this.resumenOpcion.flete,origen:0,gasto:0,aduana:0,almacen:0,gastostercero:0},t.filter(t=>1==t.status&&1==t.esopcionflag).forEach(e=>{this.isOrigen(t)&&1==e.esorigenflag&&(this.isNotPorcentaje(e,e.id_multiplicador)?this.resumenOpcion.origen+=(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].valor:0)*e.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount):this.resumenOpcion.origen+=this.calcularValor(this.$store.state.pricing.datosPrincipales.amount,this.totalFleteVentas,this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].code:"",this.$store.state.pricing.listMultiplicador.some(t=>t.id==e.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.pricing.listMultiplicador.some(t=>t.id==e.id_multiplicador&&(14==t.code||13==t.code))?e.cif:e.seguro:0)),this.isLocal(t)&&e.eslocalflag&&(this.isNotPorcentaje(e,e.id_multiplicador)?this.resumenOpcion.gasto+=(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].valor:0)*e.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount):this.resumenOpcion.gasto+=this.calcularValor(this.$store.state.pricing.datosPrincipales.amount,this.totalFleteVentas,this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].code:"",this.$store.state.pricing.listMultiplicador.some(t=>t.id==e.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.pricing.listMultiplicador.some(t=>t.id==e.id_multiplicador&&(14==t.code||13==t.code))?e.cif:e.seguro:0)),this.isAduana(t)&&1==e.esaduanaflag&&(this.isNotPorcentaje(e,e.id_multiplicador)?this.resumenOpcion.aduana+=(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].valor:0)*e.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount):this.resumenOpcion.aduana+=this.calcularValor(this.$store.state.pricing.datosPrincipales.amount,this.totalFleteVentas,this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].code:"",this.$store.state.pricing.listMultiplicador.some(t=>t.id==e.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.pricing.listMultiplicador.some(t=>t.id==e.id_multiplicador&&(14==t.code||13==t.code))?e.cif:e.seguro:0)),this.isAlmacen(t)&&e.esalmacenflag&&(this.isNotPorcentaje(e,e.id_multiplicador)?this.resumenOpcion.almacen+=(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].valor:0)*e.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount):this.resumenOpcion.almacen+=this.calcularValor(this.$store.state.pricing.datosPrincipales.amount,this.totalFleteVentas,this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].code:"",this.$store.state.pricing.listMultiplicador.some(t=>t.id==e.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.pricing.listMultiplicador.some(t=>t.id==e.id_multiplicador&&(14==t.code||13==t.code))?e.cif:e.seguro:0)),this.isGastosTercero(t)&&e.esgastostercerosflag&&(this.isNotPorcentaje(e,e.id_multiplicador)?this.resumenOpcion.gastostercero+=(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].valor:0)*e.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount):this.resumenOpcion.gastostercero+=this.calcularValor(this.$store.state.pricing.datosPrincipales.amount,this.totalFleteVentas,this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==e.id_multiplicador)[0].code:"",this.$store.state.pricing.listMultiplicador.some(t=>t.id==e.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.pricing.listMultiplicador.some(t=>t.id==e.id_multiplicador&&(14==t.code||13==t.code))?e.cif:e.seguro:0))})},isFlete(t){let e=t.some(t=>1==t.esfleteflag&&1==t.status);return e},isOrigen(t){let e=t.some(t=>1==t.esorigenflag&&1==t.status);return e},isLocal(t){let e=t.some(t=>1==t.eslocalflag&&1==t.status);return e},isAduana(t){let e=t.some(t=>1==t.esaduanaflag&&1==t.status);return e},isAlmacen(t){let e=t.some(t=>1==t.esalmacenflag&&1==t.status);return e},isGastosTercero(t){let e=t.some(t=>1==t.esgastostercerosflag&&1==t.status);return e},isConfeccion(t){return 33==t},montoConfeccion(t){let e=0;if(33==t.code_cost){let t=this.$store.state.pricing.datosPrincipales.amount,i=parseFloat(t)+parseFloat(this.totalFleteVentas)+.01*(parseFloat(t)+parseFloat(this.totalFleteVentas));i<5e3&&(e=50),i>=5e3&&i<1e4&&(e=80),i>=1e4&&(e=80+parseFloat(.0025*i))}return t.costounitario=parseFloat(e).toFixed(2),this.currencyFormat(e)},isITBM(t){return 38==t},montoITBM(t){let e=0,i=[29,36,41,68];if(38==t.code_cost){let t=data.filter(t=>i.includes(t.code_cost));t.forEach(t=>{e+=parseFloat((this.$store.state.pricing.listMultiplicador.some(e=>e.id==t.id_multiplicador)?this.$store.state.pricing.listMultiplicador.filter(e=>e.id==t.id_multiplicador)[0].valor:0)*t.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.some(e=>e.id==t.id_multiplicador)?this.$store.state.pricing.listMultiplicador.filter(e=>e.id==t.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount))})}return t.costounitario=parseFloat(.07*e).toFixed(2),this.currencyFormat(parseFloat(.07*e).toFixed(2))},isNotaCredito(t){return 69==t},montoNotaCredito(t){let e=0,i=[33];if(69==t.code_cost){let t=data.filter(t=>i.includes(t.code_cost));t.forEach(t=>{e=t.costounitario})}return t.costounitario=-1*parseFloat(.5*e).toFixed(2),this.currencyFormat(-1*parseFloat(.5*e).toFixed(2))},isNotPorcentaje(t,e){let i=[5,13,14],s=this.$store.state.pricing.listMultiplicador.some(t=>t.id==e&&i.includes(t.code));return!s},abrirModal(){this.dialog=!this.dialog,this.limpiar()},cambiarOpcionSeleccionada(t){console.log(t)}},watch:{async actualizarComparativa(){console.log("comparativa"),setTimeout(async()=>{await this.calcularTotalesOpciones(),await this.agregarFilasAlHeader()},1e3)}},computed:{actualizarComparativa:{get(){return this.$store.state.pricing.actualizarComparativa},set(t){return this.$store.state.pricing.actualizarComparativa=actualizarComparativa}}}},m=h,f=(i("bcc2"),i("2877")),v=Object(f["a"])(m,c,d,!1,null,"419cbd5e",null);e["a"]=v.exports},"53a0":function(t,e,i){},"5b01":function(t,e,i){},7047:function(t,e,i){"use strict";var s=i("c6a6"),a=i("8336"),o=i("b0af"),r=i("99d9"),n=i("62ad"),l=i("a523"),c=i("8fea"),d=i("169a"),p=i("4bd4"),u=i("132d"),g=i("0fd9"),h=i("2fa4"),m=i("8654"),f=function(){var t=this,e=t._self._c;return e(l["a"],{staticClass:"pa-0",attrs:{fluid:""}},[e(o["a"],{ref:"frmPuerto",attrs:{elevation:"0"}},[e(r["d"],{attrs:{"primary-title":""}},[t._v(" Datos Principales ")]),e(r["c"],[e(p["a"],{ref:"frmDatosPrincipales"},[e(l["a"],[e(g["a"],[e(n["a"],{staticClass:"my-0 py-0",attrs:{cols:"12"}},[e(s["a"],{staticClass:"my-1",attrs:{label:"Tipo de Marketing",outlined:"",dense:"",rules:[t=>!!t||"Dato requerido"],items:t.$store.state.pricing.listMarketing,"item-text":"name","item-value":"id"},model:{value:t.$store.state.pricing.datosPrincipales.id_marketing,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"id_marketing",e)},expression:"$store.state.pricing.datosPrincipales.id_marketing"}}),e(s["a"],{staticClass:"my-0",attrs:{label:"Estado de la cotización",outlined:"",dense:"",rules:[t=>!!t||"Dato requerido"],items:t.$store.state.pricing.listQuoteStatus,"item-text":"name","item-value":"id","item-disabled":t=>1!=t.status},model:{value:t.$store.state.pricing.datosPrincipales.id_status,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"id_status",e)},expression:"$store.state.pricing.datosPrincipales.id_status"}})],1),e(n["a"],{staticClass:"my-0 py-0",attrs:{cols:"12"}},[e(s["a"],{staticClass:"my-0",attrs:{label:"Ejecutivo",outlined:"",dense:"",rules:[t=>!!t||"Dato requerido"],items:t.$store.state.pricing.listEjecutivo,"item-text":"nombrecompleto","item-value":"id","item-key":"id"},model:{value:t.$store.state.pricing.datosPrincipales.id_vendedor,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"id_vendedor",e)},expression:"$store.state.pricing.datosPrincipales.id_vendedor"}})],1),e(n["a"],{staticClass:"my-0 py-0",attrs:{cols:"12"}},[e(s["a"],{staticClass:"my-0",attrs:{label:"Pricing",outlined:"",dense:"",rules:[t=>!!t||"Dato requerido"],items:t.$store.state.pricing.listEjecutivo,"item-text":"nombrecompleto","item-value":"id","item-key":"id"},model:{value:t.$store.state.pricing.datosPrincipales.id_pricing,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"id_pricing",e)},expression:"$store.state.pricing.datosPrincipales.id_pricing"}})],1),e(n["a"],{staticClass:"my-0 py-0",attrs:{cols:"12"}},[e(m["a"],{attrs:{label:"Nombre del cliente",outlined:"",placeholder:"Nombre del cliente","append-icon":"mdi-account-search",rules:[t=>!!t||"El nombre es requerido"],dense:"",required:"",autocomplete:"off",id:"nombre",name:"nombre",readonly:""},on:{"click:append":function(e){return t.abrirModalCliente()},click:function(e){return t.abrirModalCliente()}},model:{value:t.$store.state.pricing.datosPrincipales.nombre,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"nombre",e)},expression:"$store.state.pricing.datosPrincipales.nombre"}})],1),e(n["a"],{staticClass:"my-0 py-0",attrs:{cols:"12"}},[e(m["a"],{attrs:{label:"Teléfono",outlined:"",placeholder:"Teléfono...",dense:"",readonly:""},model:{value:t.$store.state.pricing.datosPrincipales.telefono,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"telefono",e)},expression:"$store.state.pricing.datosPrincipales.telefono"}})],1),e(n["a"],{staticClass:"my-0 py-0",attrs:{cols:"12"}},[e(s["a"],{staticClass:"my-0",attrs:{label:"Sentido",outlined:"",dense:"",rules:[t=>!!t||"Dato requerido"],items:t.$store.state.pricing.listModality,"item-text":"name","item-key":"id","item-value":"id",disabled:!t.EditableFlag},on:{change:function(e){return t.recargarServiciosCostos()}},model:{value:t.$store.state.pricing.datosPrincipales.idsentido,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"idsentido",e)},expression:"$store.state.pricing.datosPrincipales.idsentido"}})],1),e(n["a"],{staticClass:"my-0 py-0",attrs:{cols:"12"}},[e(s["a"],{staticClass:"my-0",attrs:{label:"Tipo de Embarque",outlined:"",dense:"",rules:[t=>!!t||"Dato requerido"],items:t.$store.state.pricing.listShipment,"item-text":"embarque","item-key":"id","item-value":"id","return-object":"",disabled:!t.EditableFlag},on:{change:function(e){return t.recargarServiciosCostos()}},model:{value:t.$store.state.pricing.datosPrincipales.idtipocarga,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"idtipocarga",e)},expression:"$store.state.pricing.datosPrincipales.idtipocarga"}})],1),e(n["a"],{staticClass:"my-0 py-0",attrs:{cols:"12"}},[e(s["a"],{staticClass:"my-0",attrs:{label:"Incoterms",outlined:"",dense:"",rules:[t=>!!t||"Dato requerido"],items:t.incoterms,"item-text":"text","item-key":"id","item-value":"id"},on:{change:function(e){return t.recargarServiciosCostos()}},scopedSlots:t._u([{key:"selection",fn:function(e){return[t._v(" "+t._s(e.item.name)+" - "+t._s(e.item.description)+" ")]}}]),model:{value:t.$store.state.pricing.datosPrincipales.idincoterms,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"idincoterms",e)},expression:"$store.state.pricing.datosPrincipales.idincoterms"}})],1),e(n["a"],{staticClass:"my-0 py-0",attrs:{cols:"12"}},[t.mostrarProveedorFlag?e(m["a"],{attrs:{name:"name",label:"Nombre del proveedor",id:"id",dense:"",outlined:""},model:{value:t.$store.state.pricing.datosPrincipales.proveedor,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"proveedor",e)},expression:"$store.state.pricing.datosPrincipales.proveedor"}}):t._e()],1),e(n["a"],{staticClass:"my-0 py-0",attrs:{cols:"12"}},[t.mostrarProveedorFlag?e(m["a"],{attrs:{name:"Teléfono",label:"Teléfono del proveedor",dense:"",outlined:"",rules:[t=>!(""!==t&&!/^\+?\d+$/.test(t))||"Formato de teléfono no válido"]},model:{value:t.$store.state.pricing.datosPrincipales.telefonoproveedor,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"telefonoproveedor",e)},expression:"\n                  $store.state.pricing.datosPrincipales.telefonoproveedor\n                "}}):t._e()],1),e(n["a"],{staticClass:"my-0 py-0",attrs:{cols:"12"}},[t.mostrarProveedorFlag?e(m["a"],{attrs:{name:"name",label:"Dirección del proveedor",id:"id",dense:"",outlined:""},model:{value:t.$store.state.pricing.datosPrincipales.direccionproveedor,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"direccionproveedor",e)},expression:"\n                  $store.state.pricing.datosPrincipales.direccionproveedor\n                "}}):t._e()],1),t.mostrarContinuarFlag&&t.mostrarBtn?e(n["a"],{staticClass:"my-0 py-0 align-right",attrs:{cols:"12"}},[e(a["a"],{attrs:{color:"#3F51B5",dark:"",small:""},on:{click:function(e){return t.continuarDatosCarga()}}},[t._v("Continuar Datos Carga")])],1):t._e()],1)],1)],1)],1)],1),e(d["a"],{attrs:{"max-width":"80%"},model:{value:t.buscarClienteDialog,callback:function(e){t.buscarClienteDialog=e},expression:"buscarClienteDialog"}},[e(o["a"],[e(r["d"],[t._v("Buscar Cliente"),e(h["a"]),e(a["a"],{attrs:{color:"success",small:""},on:{click:t.registrarNuevoCliente}},[t._v(" Nuevo Cliente ")])],1),e(r["c"],[e(l["a"],[e(g["a"],[e(n["a"],{attrs:{cols:"12"}},[e(m["a"],{attrs:{label:"Buscar..."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(n["a"],{attrs:{cols:"12"}},[e(c["a"],{attrs:{headers:t.headers,items:t.$store.state.itemsEntities,search:t.search,"item-key":"index",loading:0==t.$store.state.itemsEntities.length,"loading-text":"Buscando Clientes..."},on:{"dblclick:row":t.guardarCliente},scopedSlots:t._u([{key:"item.action",fn:function({item:i}){return[e(a["a"],{attrs:{small:"",color:"success"},on:{click:function(e){return t.guardarCliente(null,{item:i})}}},[t._v(" Seleccionar "),e(u["a"],{staticClass:"mx-2"},[t._v("mdi-account-plus")])],1)]}}],null,!0)})],1)],1)],1)],1)],1)],1)],1)},v=[],$=(i("14d9"),i("e9f5"),i("910d"),i("2f62")),C=i("3d20"),b=i.n(C),_={props:{mostrarBtn:{type:Boolean,default:!0},EditableFlag:{type:Boolean,default:!0}},data(){return{search:"",buscarClienteDialog:!1,mostrarContinuarFlag:!0,headers:[{text:"Documento",value:"document"},{text:"Nombres (s)",value:"nombrecompleto"},{text:"Teléfono",value:"phone"},{value:"action"}],mostrar:!1}},async mounted(){this.$refs.frmDatosPrincipales.resetValidation()},methods:{...Object($["b"])(["getMarketingList","getQuoteStatus","getModality","getShipment","getIncoterms","_getEntitiesCliente","getCargarEjecutivo"]),registrarNuevoCliente(){this.$store.state.modalEntitie=!0},abrirModalCliente(){this.buscarClienteDialog=!0,this.$store.state.itemsEntities=[],this._getEntitiesCliente()},guardarCliente(t,{item:e}){e.phone||b.a.fire({icon:"warning",title:"¡Advertencia!",text:"El cliente seleccionado no tiene un número de teléfono registrado. Por favor, seleccione otro cliente o puede actualizar luego en el fichero de cliente."}),this.$store.state.pricing.datosPrincipales.id_entitie=e.id,this.$store.state.pricing.datosPrincipales.nombre=e.nombrecompleto,this.$store.state.pricing.datosPrincipales.telefono=e.phone,this.buscarClienteDialog=!1},continuarDatosCarga(){this.$refs.frmDatosPrincipales.validate()&&(this.$emit("activarDatosCarga",!0),this.mostrarContinuarFlag=!1)},recargarServiciosCostos(){this.$emit("recargarServiciosCostos",!0)}},computed:{...Object($["c"])(["registroClienteFlag",""]),incoterms(){let t=[];return[...this.$store.state.pricing.listIncoterms].forEach(e=>{e.text=e.name+" - "+e.description,t.push(e)}),t},mostrarProveedorFlag(){let t=this.$store.state.pricing.listIncoterms.filter(t=>t.id==this.$store.state.pricing.datosPrincipales.idincoterms&&"EXW"==t.name);return t.length>0}},watch:{async registroClienteFlag(){if(this.$store.state.spiner=!0,await this._getEntitiesCliente(),this.$store.state.spiner=!1,console.log("llegó"),this.$store.state.entities.id){let t=this.$store.state.itemsEntities.filter(t=>t.id==this.$store.state.entities.id)[0];console.log("cliente",t),this.$store.state.pricing.datosPrincipales.id_entitie=t.id,this.$store.state.pricing.datosPrincipales.nombre=t.nombrecompleto,this.$store.state.pricing.datosPrincipales.telefono=t.phone}this.buscarClienteDialog=!1}}},x=_,P=(i("aaf1"),i("2877")),y=Object(P["a"])(x,f,v,!1,null,"cb2f7bb4",null);e["a"]=y.exports},7581:function(t,e,i){"use strict";i("dacf")},"796d":function(t,e,i){"use strict";var s=i("23e7"),a=i("c65b"),o=i("59ed"),r=i("825a"),n=i("46c4"),l=i("34e1"),c=i("c5cc"),d=i("2a62"),p=i("c430"),u=c((function(){var t,e,i=this.iterator,s=this.mapper;while(1){if(e=this.inner)try{if(t=r(a(e.next,e.iterator)),!t.done)return t.value;this.inner=null}catch(o){d(i,"throw",o)}if(t=r(a(this.next,i)),this.done=!!t.done)return;try{this.inner=l(s(t.value,this.counter++),!1)}catch(o){d(i,"throw",o)}}}));s({target:"Iterator",proto:!0,real:!0,forced:p},{flatMap:function(t){return r(this),o(t),new u(n(this),{mapper:t,inner:null})}})},"891e":function(t,e,i){"use strict";i("17b3");var s=i("9d26"),a=i("dc22"),o=i("a9ad"),r=i("de2c"),n=i("7560"),l=i("58df");e["a"]=Object(l["a"])(o["a"],Object(r["a"])({onVisible:["init"]}),n["a"]).extend({name:"v-pagination",directives:{Resize:a["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:t=>t%1===0},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data(){return{maxButtons:0,selected:null}},computed:{classes(){return{"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled,...this.themeClasses}},items(){const t=parseInt(this.totalVisible,10);if(0===t||isNaN(this.length)||this.length>Number.MAX_SAFE_INTEGER)return[];const e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);const i=e%2===0?1:0,s=Math.floor(e/2),a=this.length-s+1+i;if(this.value>s&&this.value<a){const t=1,e=this.length,a=this.value-s+2,o=this.value+s-2-i,r=a-1===t+1?2:"...",n=o+1===e-1?o+1:"...";return[1,r,...this.range(a,o),n,this.length]}if(this.value===s){const t=this.value+s-1-i;return[...this.range(1,t),"...",this.length]}if(this.value===a){const t=this.value-s+1;return[1,"...",...this.range(t,this.length)]}return[...this.range(1,s),"...",...this.range(a,this.length)]}},watch:{value(){this.init()}},beforeMount(){this.init()},methods:{init(){this.selected=null,this.onResize(),this.$nextTick(this.onResize),setTimeout(()=>this.selected=this.value,100)},onResize(){const t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range(t,e){const i=[];t=t>0?t:1;for(let s=t;s<=e;s++)i.push(s);return i},genIcon(t,e,i,a,o){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":i},attrs:{disabled:i,type:"button","aria-label":o},on:i?{}:{click:a}},[t(s["a"],[e])])])},genItem(t,e){const i=e===this.value&&(this.color||"primary"),s=e===this.value,a=s?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(i,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":s,"aria-label":this.$vuetify.lang.t(a,e)},on:{click:()=>this.$emit("input",e)}}),[e.toString()])},genItems(t){return this.items.map((e,i)=>t("li",{key:i},[isNaN(Number(e))?t("span",{class:"v-pagination__more"},[e.toString()]):this.genItem(t,e)]))},genList(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render(t){const e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}})},"93d9":function(t,e,i){"use strict";var s=i("8336"),a=i("b0af"),o=i("62ad"),r=i("a523"),n=i("4bd4"),l=i("891e"),c=i("0fd9"),d=i("2fa4"),p=i("8654"),u=(i("e9f5"),i("910d"),function(){var t=this,e=t._self._c;return e(r["a"],{attrs:{fluid:""}},[t.$store.state.pricing.llenadoCostos?e(a["a"],{staticClass:"px-5"},[e("h1",[t._v(" OPCIÓN COSTOS "+t._s(t.$store.state.pricing.opcionCostos[t.$store.state.pricing.index].nro_propuesta)+" ")]),e(n["a"],{ref:"frmDatosOpcion"},[e(c["a"],[e(o["a"],{attrs:{cols:"12",lg:"2",xl:"2"}},[e(p["a"],{attrs:{type:"date",name:"Fecha Validez de la Opción "+(t.$store.state.pricing.index+1),label:"Fecha Validez de la Opción "+(t.$store.state.pricing.index+1),rules:[t=>!!t||"Dato Requerido",e=>t.isDateValid(e)||"La fecha debe ser mayor que hoy."]},model:{value:t.$store.state.pricing.opcionCostos[t.$store.state.pricing.index].date_end,callback:function(e){t.$set(t.$store.state.pricing.opcionCostos[t.$store.state.pricing.index],"date_end",e)},expression:"\n              $store.state.pricing.opcionCostos[$store.state.pricing.index]\n                .date_end\n            "}})],1),e(o["a"],{attrs:{cols:"12",lg:"2",xl:"2"}},[e(p["a"],{attrs:{type:"number",name:"Tiempo en tránsito de la Opción "+(t.$store.state.pricing.index+1),label:"Tiempo en tránsito de la Opción "+(t.$store.state.pricing.index+1),rules:[t=>!!t||"Dato Requerido",t=>t>0||"El valor tiene que ser positivo."]},model:{value:t.$store.state.pricing.opcionCostos[t.$store.state.pricing.index].tiempo_transito,callback:function(e){t.$set(t.$store.state.pricing.opcionCostos[t.$store.state.pricing.index],"tiempo_transito",e)},expression:"\n              $store.state.pricing.opcionCostos[$store.state.pricing.index]\n                .tiempo_transito\n            "}})],1),e(o["a"],{attrs:{cols:"8"}},[t.btnIngresarCostos?e(s["a"],{staticClass:"mx-1 btn-ingresarcostos",attrs:{color:"#3363A2","x-large":"",dark:""},on:{click:function(e){return t.pasarLlenadoCostos()}}},[t._v(" INGRESAR COSTOS OPCIÓN "+t._s(t.$store.state.pricing.index+1)+" ")]):t._e(),t.$store.state.pricing.index>0&&t.btnIngresarCostos?e(s["a"],{staticClass:"mx-1",attrs:{color:"red","x-large":"",dark:""},on:{click:function(e){return t.cancelarLlenadoCostos()}}},[t._v(" CANCELAR ")]):t._e()],1)],1)],1),t.mostrarCostos?e(r["a"],{attrs:{fluid:""}},[e(c["a"],[e(o["a"],{attrs:{cols:"12"}},[e("CostosComponent",{attrs:{valores:t.$store.state.pricing.opcionCostos[t.$store.state.pricing.index].listCostos.filter(t=>1==t.esopcionflag),amount:t.$store.state.pricing.datosPrincipales.amount,index:""}})],1),e(o["a"],{staticClass:"derecha",attrs:{cols:"12"}},[e(d["a"]),t.$store.state.pricing.mostrarGuardarCostos?e(s["a"],{attrs:{color:"#3363A2",dark:""},on:{click:function(e){return t.agregarNuevoCostoIrAVentas()}}},[t._v("GUARDAR COSTOS OPCIÓN "+t._s(t.$store.state.pricing.index+1))]):t._e()],1)],1)],1):t._e()],1):e(a["a"],{staticClass:"px-5"},[e("h1",[t._v(" OPCIÓN COSTOS "+t._s(t.opcionesSeleccionadas[t.$store.state.pricing.page-1].nro_propuesta)+" ")]),e(c["a"],[e(o["a"],{attrs:{cols:"12",lg:"4",xl:"4"}},[e(p["a"],{attrs:{type:"date",name:"Fecha Validez de la Opción "+t.opcionesSeleccionadas[t.$store.state.pricing.page-1].nro_propuesta,label:"Fecha Validez de la Opción "+t.opcionesSeleccionadas[t.$store.state.pricing.page-1].nro_propuesta,rules:[t=>!!t||"Dato Requerido",e=>t.isDateValid(e)||"La fecha debe ser mayor que hoy."]},model:{value:t.opcionesSeleccionadas[t.$store.state.pricing.page-1].date_end,callback:function(e){t.$set(t.opcionesSeleccionadas[t.$store.state.pricing.page-1],"date_end",e)},expression:"\n            opcionesSeleccionadas[$store.state.pricing.page - 1].date_end\n          "}})],1),e(o["a"],{attrs:{cols:"12",lg:"4",xl:"4"}},[e(p["a"],{attrs:{type:"number",name:"Tiempo en tránsito de la Opción "+t.opcionesSeleccionadas[t.$store.state.pricing.page-1].nro_propuesta,label:"Tiempo en tránsito de la Opción "+t.opcionesSeleccionadas[t.$store.state.pricing.page-1].nro_propuesta,rules:[t=>!!t||"Dato Requerido",t=>t>0||"El valor tiene que ser positivo."]},model:{value:t.opcionesSeleccionadas[t.$store.state.pricing.page-1].tiempo_transito,callback:function(e){t.$set(t.opcionesSeleccionadas[t.$store.state.pricing.page-1],"tiempo_transito",e)},expression:"\n            opcionesSeleccionadas[$store.state.pricing.page - 1]\n              .tiempo_transito\n          "}})],1),e(o["a"],{staticClass:"derecha",attrs:{cols:"12"}},[[e("div",{staticClass:"text-center"},[e(l["a"],{attrs:{length:t.opcionesSeleccionadas.length,circle:""},model:{value:t.$store.state.pricing.page,callback:function(e){t.$set(t.$store.state.pricing,"page",e)},expression:"$store.state.pricing.page"}})],1)]],2),e(o["a"],{attrs:{cols:"12"}},[e(c["a"],[e(o["a"],{attrs:{cols:"12",lg:"6",xl:"6"}},[e("CostosComponent",{attrs:{valores:t.opcionesSeleccionadas[t.$store.state.pricing.page-1].listCostos.filter(t=>1==t.esopcionflag),actualizarCostosFlag:t.$store.state.pricing.actualizarCostosFlag,amount:t.$store.state.pricing.datosPrincipales.amount,index:t.$store.state.pricing.page}})],1),e(o["a"],{attrs:{cols:"12",lg:"6",xl:"6"}},[e("VentasComponent",{attrs:{valores:t.opcionesSeleccionadas[t.$store.state.pricing.page-1].listCostos.filter(t=>1==t.esventaflag),amount:t.$store.state.pricing.datosPrincipales.amount}})],1),t.mostrarContinuarVentas&&t.mostrarBtn?e(o["a"],{staticClass:"derecha",attrs:{cols:"12"}},[e(s["a"],{attrs:{color:"#3363A2",dark:""},on:{click:t.activarImpuesto}},[t._v(" Continuar Impuesto ")])],1):t._e()],1)],1),t.mostrarImpuestos&&t.mostrarImpuestosEditar?e(o["a"],{attrs:{cols:"12",lg:"6",xl:"6",id:"cmpImpuesto"}},[t.mostrarImpuestos&&t.mostrarImpuestosEditar?e("center",[e("h3",[t._v("Impuestos de Aduana")])]):t._e(),t.mostrarImpuestos&&t.mostrarImpuestosEditar?e("ImpuestosComponent",{staticClass:"col-12",attrs:{index:t.$store.state.pricing.opcionCostos[t.$store.state.pricing.index].nro_propuesta,amount:t.$store.state.pricing.datosPrincipales.amount,impuestos:t.opcionesSeleccionadas[t.$store.state.pricing.page-1].listImpuestos}}):t._e()],1):t._e(),e(o["a"],{attrs:{cols:"12"}},[e(c["a"],[e(o["a"],{staticClass:"izquierda",attrs:{cols:"12",lg:"4",xl:"4"}},[t.$store.state.pricing.opcionCostos.length>1&&t.mostrarBtn?e(s["a"],{attrs:{color:"default"},on:{click:function(e){return t.irAComparativa()}}},[t._v("Regresar a la comparativa")]):t._e()],1),t.mostrarBotonIrANotas?e(o["a"],{staticClass:"derecha"},[e(s["a"],{attrs:{color:"success"},on:{click:function(e){return t.irANotas()}}},[t._v("IR A NOTAS DE COSTOS")])],1):t._e()],1)],1)],1)],1)],1)}),g=[],h=(i("14d9"),i("7d54"),i("ab43"),i("a732"),i("c1df")),m=i.n(h),f=i("3d20"),v=i.n(f),$={props:{mostrarBtn:{type:Boolean,default:!0},mostrarImpuestosEditar:{type:Boolean,default:!1},indexCostos:{type:Number}},components:{CostosComponent:()=>Promise.all([i.e("chunk-cd92fa2e"),i.e("chunk-79b62dc7")]).then(i.bind(null,"3203")),VentasComponent:()=>i.e("chunk-129fcc08").then(i.bind(null,"a7f6")),ImpuestosComponent:()=>i.e("chunk-2d0c7b72").then(i.bind(null,"5298"))},data(){return{mostrarCostos:!1,mostrarVentasFlag:!1,btnIngresarCostos:!0,mostrarContinuarVentas:!0,mostrarBtnContinuarNotas:!1}},mounted(){this.llenadoCostos||(this.opcionesSeleccionadas=this.$store.state.pricing.opcionCostos.filter(t=>!!t.selected))},methods:{irAComparativa(){this.$store.state.pricing.tab=3,this.$store.state.pricing.actualizarComparativa=!this.$store.state.pricing.actualizarComparativa},pasarLlenadoCostos(){this.$refs.frmDatosOpcion.validate()&&(this.btnIngresarCostos=!1,this.mostrarCostos=!0)},cancelarLlenadoCostos(){this.$store.state.pricing.opcionCostos.splice(-1,1),this.$store.state.pricing.index=this.$store.state.pricing.index-1,this.btnIngresarCostos=!1,this.mostrarCostos=!0,setTimeout(()=>{this.$store.state.pricing.cancelarLlenadoNuevaOpcion=!this.$store.state.pricing.cancelarLlenadoNuevaOpcion},100)},agregarNuevoCostoIrAVentas(){0==this.$store.state.pricing.index&&v.a.fire({icon:"question",width:1e3,html:"<h1>¿Desea agregar una nueva opción para los costos o ir la venta al Cliente Final?</h1>",allowEnterKey:!1,allowOutsideClick:!1,allowEnterKey:!1,allowOutsideClick:!1,confirmButtonColor:"green",denyButtonColor:"#3363A2",confirmButtonText:`<h1>Agregar Costos - Opcion ${this.$store.state.pricing.index+2}</h1> `,denyButtonText:"<h1>Ir a la venta del cliente final</h1>",showDenyButton:!0,showCancelButton:!1,showCloseButton:!0}).then(t=>{if(t.isConfirmed){let t=this.$store.state.pricing.index+2;this.$emit("anadirNuevaOpcion",t),this.$store.state.pricing.index=parseInt(this.$store.state.pricing.index)+1,this.mostrarCostos=!1,this.btnIngresarCostos=!0,this.$refs.frmDatosOpcion.resetValidation()}t.isDenied&&(this.$store.state.pricing.opcionCostos[0].selected=1,this.$store.state.pricing.llenadoCostos=!1)}),this.$store.state.pricing.index>0&&v.a.fire({icon:"question",width:1e3,html:"<h1>¿Desea agregar una nueva opción para los costos o ir la venta al Cliente Final?</h1>",allowEnterKey:!1,allowOutsideClick:!1,allowEnterKey:!1,allowOutsideClick:!1,confirmButtonColor:"green",denyButtonColor:"#3363A2",confirmButtonText:`<h1>Agregar Costos - Opcion ${this.$store.state.pricing.index+2} </h1>`,denyButtonText:"<h1>Ir a la comparativa</h1>",showDenyButton:!0,showCancelButton:!1,showCloseButton:!0}).then(t=>{if(t.isConfirmed){let t=this.$store.state.pricing.index+2,e=this.$store.state.pricing.listCostos.map(e=>({...e,nro_propuesta:t})),i=this.$store.state.pricing.listImpuestos.map(e=>({...e,nro_propuesta:t})),s=this.$store.state.pricing.listNotasQuote.map(e=>({...e,nro_propuesta:t}));this.$store.state.pricing.opcionCostos.push({nro_propuesta:this.$store.state.pricing.index+2,date_end:"",tiempo_transito:0,listCostos:e,listImpuestos:i,listNotasQuote:s,selected:!1}),this.$store.state.pricing.index=parseInt(this.$store.state.pricing.index)+1,this.mostrarCostos=!1,this.btnIngresarCostos=!0,this.$refs.frmDatosOpcion.resetValidation()}t.isDenied&&(console.log("ddd"),this.$store.state.pricing.actualizarComparativa=!this.$store.state.pricing.actualizarComparativa,this.$emit("continuarComparativa"))})},activarCosto(){if(this.$refs.frmFecha.validate()){this.$store.state.pricing.costoflag=!0;let t=this.$store.state.pricing.listCostos.filter(t=>1==t.esopcionflag);t.forEach(t=>{let e=this.validateCost({costo:t});t.error=e?"El costo que tiene un valor 0.00.":""})}},activarImpuesto(){this.mostrarContinuarVentas=!1,console.log(this.$store.state.pricing.listServices.some(t=>"15"==t.code_service||15==t.code_service)),this.$store.state.pricing.listServices.some(t=>"15"==t.code_service||15==t.code_service)&&(this.mostrarSeccionImpuestos=!0,this.$nextTick(()=>{const t=document.getElementById("cmpImpuesto");t&&t.scrollIntoView({behavior:"smooth",block:"start"})})),this.mostrarBtnContinuarNotas=!0},irANotas(){this.$store.state.pricing.actualizarNotas=!this.$store.state.pricing.actualizarNotas,this.$store.state.pricing.bloquearBtnImprimir=!1,this.$store.state.pricing.page=1,this.$emit("irANotas")},activarVenta(){this.$store.state.pricing.ventaflag=!0,this.scrollToComponent("ventas-component")},isDateValid(t){if(!t)return!0;const e=m()(t,"YYYY-MM-DD",!0),i=m()();return e.isAfter(i)},validateCost({costo:t}){let e=this.$store.state.pricing.listServices.filter(t=>1==t.status),i=this.$store.state.pricing.listMultiplicador.filter(t=>this.comienzaNoConCaracter(t.text,"%")),s=i.map(t=>t.id),a=e.map(t=>t.id_groupservices);return!(!s.includes(t.id_multiplicador)||!a.includes(t.id_groupservices)||0!=t.costounitario)},comienzaNoConCaracter(t,e){return t.charAt(0).toUpperCase()!==e.toUpperCase()},comienzaConCaracter(t,e){return t.charAt(0).toUpperCase()===e.toUpperCase()},scrollToComponent(t){setTimeout(()=>{const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100)}},computed:{opcionesSeleccionadas(){return this.$store.state.pricing.opcionCostos.filter(t=>!!t.selected)},llenadoCostos:{get(){return this.$store.state.pricing.llenadoCostos},set(t){return this.$store.state.pricing.llenadoCostos=llenadoCostos}},recargarCostoSeleccionados:{get(){return this.$store.state.pricing.recargarCostoSeleccionados},set(t){return this.$store.state.pricing.recargarCostoSeleccionados=recargarCostoSeleccionados}},reset:{get(){return this.$store.state.pricing.reset},set(t){return this.$store.state.pricing.reset=reset}},mostrarImpuestos(){let t=this.$store.state.pricing.listServices.some(t=>(15==t.code_service||"15"==t.code_service)&&1==t.status);return t},mostrarBotonIrANotas(){return this.opcionesSeleccionadas.length==this.$store.state.pricing.page&&this.opcionesSeleccionadas.length>0&&this.mostrarBtnContinuarNotas}},watch:{llenadoCostos(){this.llenadoCostos||(this.opcionesSeleccionadas=this.$store.state.pricing.opcionCostos.filter(t=>!!t.selected),this.$store.state.pricing.page=1)},recargarCostoSeleccionados(){this.opcionesSeleccionadas=this.$store.state.pricing.opcionCostos.filter(t=>!!t.selected),this.$store.state.pricing.page=1},reset(){this.$store.state.pricing.llenadoCostos=!0,this.mostrarCostos=!1,this.mostrarVentasFlag=!1,this.btnIngresarCostos=!0,this.$store.state.pricing.page=1,this.mostrarContinuarVentas=!0,this.mostrarBtnContinuarNotas=!1,this.$store.state.pricing.index=0,this.mostrarContinuarVentas=!0}}},C=$,b=(i("f381"),i("2877")),_=Object(b["a"])(C,u,g,!1,null,"5f4cbe7f",null);e["a"]=_.exports},"9c58e":function(t,e,i){},"9fef":function(t,e,i){"use strict";var s=i("8336"),a=i("b0af"),o=i("99d9"),r=i("62ad"),n=i("8fea"),l=i("169a"),c=i("cd55"),d=i("49e2"),p=i("c865"),u=i("0393"),g=i("4bd4"),h=i("132d"),m=i("891e"),f=i("67b6"),v=i("43a6"),$=i("0fd9"),C=i("1f4f"),b=i("2fa4"),_=i("8654"),x=i("a844"),P=(i("e9f5"),i("910d"),function(){var t=this,e=t._self._c;return this.opcionesSeleccionadas.length>0?e(a["a"],{attrs:{fluid:""}},[e(l["a"],{attrs:{persistent:"","max-width":"30%",transition:"dialog-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(a["a"],[e(o["d"],{attrs:{"primary-title":""}},[t._v(" Registro de nueva nota - Opción "+t._s(t.opcionesSeleccionadas[t.$store.state.pricing.page-1].nro_propuesta)),e(b["a"]),e(s["a"],{attrs:{icon:"",color:"default"},on:{click:function(e){return t.abrirDialog()}}},[e(h["a"],[t._v("mdi-close")])],1)],1),e(o["c"],[e(g["a"],{ref:"frmNota"},[e(_["a"],{attrs:{label:"Descripción Nota Nueva",id:"id",rules:[t=>!!t||"Dato requerido"]},model:{value:t.descripcion,callback:function(e){t.descripcion=e},expression:"descripcion"}})],1)],1),e(o["a"],[e(b["a"]),e(s["a"],{attrs:{color:"success"},on:{click:t.anidarNota}},[t._v("Agregar Nueva nota")])],1)],1)],1),e($["a"],[e(r["a"],{attrs:{cols:"12"}},[t._v(" Añadir nueva Nota: Opción "+t._s(t.opcionesSeleccionadas[t.$store.state.pricing.page-1].nro_propuesta)+" "),e(s["a"],{attrs:{icon:"",color:"primary"},on:{click:function(e){t.dialog=!t.dialog}}},[e(h["a"],[t._v("mdi-plus")])],1)],1),e(r["a"],{staticClass:"derecha",attrs:{cols:"12"}},[[e("div",{staticClass:"text-center"},[e(m["a"],{attrs:{length:t.opcionesSeleccionadas.length,circle:""},model:{value:t.$store.state.pricing.page,callback:function(e){t.$set(t.$store.state.pricing,"page",e)},expression:"$store.state.pricing.page"}})],1)]],2),e(r["a"],{attrs:{cols:"12"}},[e(u["a"],{staticClass:"my-1 condensed",attrs:{hover:""}},[e(c["a"],[e(p["a"],[t._v(" Notas Principales ")]),e(d["a"],[e(n["a"],{attrs:{headers:t.headers,items:t.opcionesSeleccionadas[t.$store.state.pricing.page-1].listNotasQuote.filter(t=>1==t.estado&&!t.statusincluye&&!t.statusnoincluye),"hide-default-footer":"",dense:"","disable-sort":"","items-per-page":-1},scopedSlots:t._u([{key:"item",fn:function(i){return[e("tr",[e("td",{staticClass:"indexTblClass"},[t._v(t._s(i.index+1))]),e("td",{staticClass:"btnDescriptionClass"},[e(x["a"],{attrs:{"hide-details":"",dense:"",rows:"1","auto-grow":""},model:{value:i.item.descripcion,callback:function(e){t.$set(i.item,"descripcion",e)},expression:"row.item.descripcion"}})],1),e("td",{staticClass:"btnTblClass"},[e(s["a"],{attrs:{icon:"",color:"red","x-small":""},on:{click:function(t){i.item.estado=0}}},[e(h["a"],[t._v("mdi-delete")])],1)],1)])]}}],null,!1,2238541751)})],1)],1)],1)],1),e(r["a"],{attrs:{cols:"12"}},[e(u["a"],{staticClass:"my-1 condensed",attrs:{hover:""}},[e(c["a"],[e(p["a"],[e("span",{staticClass:"d-inline-flex align-center"},[t._v(" Se incluye "),e(s["a"],{staticClass:"ml-2",attrs:{color:"success","x-small":"",icon:""},on:{click:function(e){return t.abrirDialog({statusincluye:1})}}},[e(h["a"],[t._v("mdi-plus")])],1)],1)]),e(d["a"],[e(n["a"],{attrs:{headers:t.headers,items:t.lstSeIncluye,"hide-default-footer":"",dense:"","items-per-page":-1,"disable-sort":""},scopedSlots:t._u([{key:"item",fn:function(i){return[e("tr",[e("td",{staticClass:"indexTblClass"},[t._v(t._s(i.index+1))]),e("td",{staticClass:"btnDescriptionClass"},[e(x["a"],{attrs:{readonly:"","hide-details":"",dense:"",rows:"1","auto-grow":""},model:{value:i.item.service,callback:function(e){t.$set(i.item,"service",e)},expression:"row.item.service"}})],1)])]}}],null,!1,11825076)})],1)],1)],1)],1),e(u["a"],{staticClass:"my-1 condensed",attrs:{hover:""}},[e(c["a"],[e(p["a"],[e("span",{staticClass:"d-inline-flex align-center"},[t._v(" No Se Incluye "),e(s["a"],{staticClass:"ml-2",attrs:{color:"success","x-small":"",icon:""},on:{click:function(e){return t.abrirDialog({statusnoincluye:1})}}},[e(h["a"],[t._v("mdi-plus")])],1)],1)]),e(d["a"],[e(n["a"],{attrs:{headers:t.headers,items:t.lstNoIncluye,"hide-default-footer":"",dense:"","items-per-page":-1,"disable-sort":""},scopedSlots:t._u([{key:"item",fn:function(i){return[e("tr",[e("td",{staticClass:"indexTblClass"},[t._v(t._s(i.index+1))]),e("td",{staticClass:"btnDescriptionClass"},[e(x["a"],{attrs:{readonly:"","hide-details":"",dense:"",rows:"1","auto-grow":""},model:{value:i.item.service,callback:function(e){t.$set(i.item,"service",e)},expression:"row.item.service"}})],1)])]}}],null,!1,11825076)})],1)],1)],1),e(r["a"],{staticClass:"derecha"},[e(s["a"],{attrs:{color:"#3363A2",dark:""},on:{click:function(e){return t.abrirModalCambioNombreSecciones()}}},[t._v(" PREVIEW COTIZACIÓN(es)")])],1)],1),e(l["a"],{attrs:{scrollable:"",persistent:"",width:"50%"},model:{value:t.dialogCambioNombreSecciones,callback:function(e){t.dialogCambioNombreSecciones=e},expression:"dialogCambioNombreSecciones"}},[e(a["a"],[e(o["d"],[t._v(" Secciones de los costos ")]),e(o["c"],[e(C["a"],[e("thead",[e("tr",[e("th",[t._v("Código")]),e("th",[t._v("Nombre")])])]),e("tbody",t._l(t.$store.state.pricing.namesection,(function(i,s){return e("tr",{key:s},[e("td",[t._v(t._s(i.codigo))]),e("td",[e(_["a"],{model:{value:i.name,callback:function(e){t.$set(i,"name",e)},expression:"tipocosto.name"}})],1)])})),0)])],1),e(o["a"],[e(s["a"],{staticClass:"mx-1",attrs:{color:"success"},on:{click:function(e){return t.abrirModalTipoReportePreview()}}},[t._v("Aceptar")]),e(s["a"],{staticClass:"mx-1",attrs:{color:"warning"},on:{click:function(e){t.dialogCambioNombreSecciones=!t.dialogCambioNombreSecciones}}},[t._v("Cerrar")])],1)],1)],1),t.imprimirFlag?e(l["a"],{attrs:{"max-width":"40%"},model:{value:t.imprimirFlag,callback:function(e){t.imprimirFlag=e},expression:"imprimirFlag"}},[e(a["a"],{staticClass:"py-5",attrs:{color:""}},[e(o["d"],{attrs:{"primary-title":""}},[t._v(" SELECCIÓN DE TIPO DE REPORTE A IMPRIMIR ")]),e(o["c"],[e(g["a"],{ref:"frmReporte"},[e(v["a"],{attrs:{disabled:"",column:"",rules:[t=>!!t||"Dato requerido"]},model:{value:t.tiporeporte,callback:function(e){t.tiporeporte=e},expression:"tiporeporte"}},[e(f["a"],{attrs:{label:"Costo detallado por cada item",color:"red darken-3",value:"DETALLE"}}),e(f["a"],{attrs:{label:"Totales por servicios",color:"indigo darken-3",value:"TOTAL"}}),e(f["a"],{attrs:{label:"Reporte total general sin desglose",color:"orange darken-3",value:"AGRUPADO"}})],1)],1)],1),e(o["a"],[e(b["a"]),e(s["a"],{attrs:{color:"primary",loading:t.loading,text:""},on:{click:t.generar}},[t._v(" Aceptar ")]),e(s["a"],{attrs:{color:"red",text:""},on:{click:function(e){t.imprimirFlag=!1}}},[t._v(" Cancelar ")])],1)],1)],1):t._e(),t.previewFlag?e(l["a"],{attrs:{"max-width":"40%"},model:{value:t.previewFlag,callback:function(e){t.previewFlag=e},expression:"previewFlag"}},[e(a["a"],{staticClass:"py-5",attrs:{color:""}},[e(o["d"],{attrs:{"primary-title":""}},[t._v(" SELECCIÓN DE TIPO DE REPORTE PARA LA PREVISUALIZACIÓN ")]),e(o["c"],[e(g["a"],{ref:"frmReporte"},[e(v["a"],{attrs:{column:"",rules:[t=>!!t||"Dato requerido"]},model:{value:t.tiporeporte,callback:function(e){t.tiporeporte=e},expression:"tiporeporte"}},[e(f["a"],{attrs:{label:"Costo detallado por cada item",color:"red darken-3",value:"DETALLE"}}),e(f["a"],{attrs:{label:"Totales por servicios",color:"indigo darken-3",value:"TOTAL"}}),e(f["a"],{attrs:{label:"Reporte total general sin desglose",color:"orange darken-3",value:"AGRUPADO"}})],1)],1)],1),e(o["a"],[e(b["a"]),e(s["a"],{attrs:{color:"primary",text:""},on:{click:t.generarPreview}},[t._v(" Aceptar ")]),e(s["a"],{attrs:{color:"red",text:""},on:{click:function(e){t.previewFlag=!1}}},[t._v(" Cancelar ")])],1)],1)],1):t._e(),e(l["a"],{attrs:{scrollable:"",persistent:"","max-width":"80%",transition:"dialog-transition"},model:{value:t.dialogPreview,callback:function(e){t.dialogPreview=e},expression:"dialogPreview"}},[e(a["a"],[e(o["d"],{staticClass:"indigo white--text my-0 py-0",attrs:{dark:""}},[t._v(" PREVISUALIZACIÓN DE LA COTIZACIÓN - NO TIENE NINGÚN VALOR COMERCIAL "),e(b["a"]),e(s["a"],{attrs:{icon:"",color:"white"},on:{click:function(e){t.dialogPreview=!t.dialogPreview}}},[e(h["a"],[t._v("mdi-close")])],1)],1),e(o["c"],[e("previewCotizacion",{attrs:{data:t.predataCotizacion,index:t.pagePrev},on:{cerrar:function(e){t.dialogPreview=e}}})],1),e(o["a"],[[e("div",{staticClass:"text-center"},[e(m["a"],{attrs:{length:t.opcionesSeleccionadas.length,circle:""},model:{value:t.pagePrev,callback:function(e){t.pagePrev=e},expression:"pagePrev"}})],1)],e(b["a"]),e(s["a"],{staticClass:"mx-1",staticStyle:{color:"white !important"},attrs:{color:"#A43542",small:"",disabled:t.$store.state.pricing.bloquearBtnImprimir},on:{click:function(e){return t.abrirModalTipoReporte()}}},[t._v(" Imprimir Cotizacion ")])],2)],1)],1)],1):t._e()}),y=[],k=(i("14d9"),i("ab43"),i("2f62")),F=i("3d20"),S=i.n(F),O={components:{previewCotizacion:()=>i.e("chunk-73b7296e").then(i.bind(null,"2cb4"))},data(){return{dialog:!1,headers:[{value:"index",text:"#"},{value:"description",text:"Descripción",align:"center"}],pagePrev:1,tiporeporte:"",descripcion:"",predataCotizacion:null,dialogPreview:!1,previewFlag:!1,imprimirFlag:!1,loading:!1,dialogCambioNombreSecciones:!1,statusincluye:0,statusnoincluye:0}},mounted(){this.dialog=!1},methods:{...Object(k["b"])(["registrarQuote","getQuote","obtenerDatosEmpresa","generarReporte","crearCarpetaOneDrive","actualizarURLEnElQuote","predata","updateQuote"]),llenarNotasSeleccionadas(){this.opcionesSeleccionadas=this.$store.state.pricing.opcionCostos.filter(t=>!!t.selected)},abrirModalTipoReporte(){this.tiporeporte="",this.dialogPreview=!1,this.previewFlag=!0},abrirModalCambioNombreSecciones(){S.a.fire({icon:"question",width:1e3,html:"<h1> ¿Desea cambiar el nombre de la secciones?. Recuerde que  este cambio se verá reflejado solo en la cotización(pdf) </h1>",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1,confirmButtonText:"<h1>Si cambiar</h1>",showCancelButton:!0,showDenyButton:!0,cancelButtonText:"<h1>No cambiar<h1>",denyButtonText:"<h1>Cerrar<h1>"}).then(t=>{t.isConfirmed&&(this.dialogCambioNombreSecciones=!0),t.isDismissed&&this.abrirModalTipoReportePreview()})},abrirDialog({statusincluye:t=0,statusnoincluye:e=0}){this.statusincluye=t,this.statusnoincluye=e,this.dialog=!0},anidarNota(){this.$refs.frmNota.validate()&&this.opcionesSeleccionadas[this.$store.state.pricing.page-1].listNotasQuote.push({descripcion:this.descripcion,estado:1,statusincluye:this.statusincluye,statusnoincluye:this.statusnoincluye}),setTimeout(()=>{this.descripcion="",this.$refs.frmNota.resetValidation()},10),this.dialog=!this.dialog},async generar(){if(this.$store.state.pricing.tiporeporte=this.tiporeporte,this.loading=!0,this.$route.params.id){if(this.$refs.frmReporte.validate()){this.$store.state.spiner=!0,this.imprimirFlag=!1,await this.updateQuote(),await this.obtenerDatosEmpresa();for(let t=0;t<this.$store.state.pricing.opcionCostos.length;t++)S.a.fire({icon:"info",text:"Se está generando el (los) pdf.",allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1,timerProgressBar:!0,timer:null,didOpen:()=>{S.a.showLoading()}}),1==this.$store.state.pricing.opcionCostos[t].selected&&await this.generarReporte({tipo:this.$store.state.pricing.tiporeporte,nro_propuesta:this.$store.state.pricing.opcionCostos[t].nro_propuesta}).catch(t=>{console.error(t)});S.a.close(),this.$router.push({name:"verQuote",params:{id:this.$store.state.pricing.id}}),this.$store.state.spiner=!1}}else if(this.$refs.frmReporte.validate()&&(this.$store.state.spiner=!0,await this.registrarQuote({fullflag:!0}).catch(t=>{console.log(t)}),this.$store.state.pricing.nro_quote)){this.$store.state.spiner=!1;await this.obtenerDatosEmpresa().catch(t=>{console.log(t)});for(let i=0;i<this.$store.state.pricing.opcionCostos.length;i++)1==this.$store.state.pricing.opcionCostos[i].selected&&await this.generarReporte({tipo:this.tiporeporte,nro_propuesta:this.$store.state.pricing.opcionCostos[i].nro_propuesta}).catch(t=>{console.log(t)});this.loadingTable=!1,this.loading=!1,this.$store.state.spiner=!1;let t=JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch,e=[1,2];e.includes(t)&&(this.crearCarpetaOneDrive({nro_quote:this.$store.state.pricing.nro_quote,nombre:this.$store.state.pricing.datosPrincipales.nombre}).catch(t=>{console.log("crearCarpetaOneDrive",t)}),await this.actualizarURLEnElQuote({id:this.$store.state.pricing.id,url:this.$store.state.pricing.urlFolder}).catch(t=>{console.log("actualizarURLEnElQuote",t)})),this.$router.push({name:"verQuote",params:{id:this.$store.state.pricing.id}})}},abrirModalTipoReporte(){this.imprimirFlag=!0},abrirModalTipoReportePreview(){this.tiporeporte="",this.previewFlag=!0,this.dialogCambioNombreSecciones=!1,this.$store.state.pricing.bloquearBtnImprimir=!1},async generarPreview(){this.$refs.frmReporte.validate()&&(this.$store.state.spiner=!0,this.previewFlag=!1,await this.obtenerDatosEmpresa(),this.predataCotizacion=await this.predata({tipo:this.tiporeporte}),this.$store.state.spiner=!1,this.dialogPreview=!0)}},computed:{opcionesSeleccionadas(){return this.$store.state.pricing.opcionCostos.filter(t=>!!t.selected)},actualizarNotas:{get(){return this.$store.state.pricing.actualizarNotas},set(t){return this.$store.state.pricing.actualizarNotas=actualizarNotas}},lstSeIncluye(){let t=this.$store.state.pricing.listServices.filter(t=>1==t.status),e=this.opcionesSeleccionadas[this.$store.state.pricing.page-1].listNotasQuote.filter(t=>1==t.estado&&1==t.statusincluye);e=e.map(t=>({...t,service:t.descripcion}));let i=[...t,...e];return i},lstNoIncluye(){let t=this.$store.state.pricing.listServices.filter(t=>0==t.status),e=this.opcionesSeleccionadas[this.$store.state.pricing.page-1].listNotasQuote.filter(t=>1==t.estado&&1==t.statusnoincluye);e=e.map(t=>({...t,service:t.descripcion}));let i=[...t,...e];return i}},watch:{actualizarNotas(){this.llenarNotasSeleccionadas()}}},M=O,w=(i("c0d9"),i("2877")),I=Object(w["a"])(M,P,y,!1,null,"7d8193a6",null);e["a"]=I.exports},aaf1:function(t,e,i){"use strict";i("9c58e")},bcc2:function(t,e,i){"use strict";i("c5c5")},c0d9:function(t,e,i){"use strict";i("53a0")},c384:function(t,e,i){"use strict";var s=i("c6a6"),a=i("8336"),o=i("b0af"),r=i("99d9"),n=i("62ad"),l=i("a523"),c=i("8fea"),d=i("169a"),p=i("0e8f"),u=i("4bd4"),g=i("132d"),h=i("0fd9"),m=i("b974"),f=i("1f4f"),v=i("2fa4"),$=i("8654"),C=function(){var t=this,e=t._self._c;return e(l["a"],{staticClass:"pa-0",attrs:{fluid:""}},[e(o["a"],{attrs:{elevation:"0"}},[e(r["d"],{attrs:{"primary-title":""}},[t._v(" Datos de la Carga ")]),e(r["c"],[e(u["a"],{ref:"frmPuerto"},[e(h["a"],[e(n["a"],{staticClass:"py-1",attrs:{cols:"12",lg:"6",xl:"6"}},[e(s["a"],{staticClass:"my-1",attrs:{label:"Puerto Origen",outlined:"",dense:"",rules:[t=>!!t||"Dato requerido"],items:t.$store.state.pricing.listPortBegin,"item-text":"name","item-value":"id_port"},on:{"update:search-input":t.recargarPuertoOrigen},model:{value:t.$store.state.pricing.datosPrincipales.idorigen,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"idorigen",e)},expression:"$store.state.pricing.datosPrincipales.idorigen"}})],1),e(n["a"],{staticClass:"py-1",attrs:{cols:"12",lg:"6",xl:"6"}},[e(s["a"],{staticClass:"my-1",attrs:{label:"Puerto Destino",outlined:"",dense:"",rules:[t=>!!t||"Dato requerido"],items:this.$store.state.pricing.listPortEnd,"item-text":"name","item-value":"id_port"},on:{"update:search-input":t.recargarPuertoDestino},model:{value:t.$store.state.pricing.datosPrincipales.iddestino,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"iddestino",e)},expression:"$store.state.pricing.datosPrincipales.iddestino"}})],1),t.mostrarComboPercepcionAduana()?e(n["a"],{staticClass:"py-1",attrs:{cols:"12",lg:"6",xl:"6"}},[e(s["a"],{staticClass:"my-1",attrs:{label:"Primera o Segunda Importación",outlined:"",dense:"",rules:[t=>!!t||"Dato requerido"],items:t.$store.state.masterusuarios.lstPercepcionAduana,"item-text":"descripcion","item-value":"id"},on:{change:function(e){return t.cambiarImpuesto()}},model:{value:t.$store.state.pricing.datosPrincipales.id_percepcionaduana,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"id_percepcionaduana",e)},expression:"\n                $store.state.pricing.datosPrincipales.id_percepcionaduana\n              "}})],1):t._e()],1)],1),e(h["a"],[e(n["a"],{staticClass:"center"},[e(g["a"],{attrs:{color:"red"}},[t._v("mdi-arrow-down-left-bold")]),e("b",[t._v("LLENAR ESTOS CAMPOS")]),e(g["a"],{attrs:{color:"red"}},[t._v("mdi-arrow-down-right-bold")])],1)],1),e(u["a"],{ref:"frmDatosCarga"},[t.isFcl?e(h["a"],[e(n["a"],{attrs:{cols:"12",align:"right"}},[e(a["a"],{attrs:{color:"success"},on:{click:function(e){t.dialogConteiner=!t.dialogConteiner}}},[t._v(" Agregar Contenedor ")])],1),e(n["a"],{attrs:{cols:"12"}},[e(c["a"],{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.$store.state.pricing.datosPrincipales.containers},scopedSlots:t._u([{key:"item.action",fn:function(i){return[e(a["a"],{attrs:{icon:"",color:"red",dark:""},on:{click:function(e){return t.eliminarContainer({index:i.index})}}},[e(g["a"],[t._v("mdi-delete")])],1)]}},{key:"item.number",fn:function(e){return[t._v(" "+t._s(e.index+1)+" ")]}}],null,!0)})],1)],1):e(h["a"],[e(n["a"],{attrs:{cols:"12",lg:"4",xl:"4"}},[e($["a"],{attrs:{label:"Número Bultos",outlined:"",dense:"",type:"number",suffix:"uni","error-messages":t.err,step:"1",rules:[t=>!!t||"Dato Requerido",t=>/^-?\d+$/.test(t)||"Debe ser un número entero válido",t=>t>0||"El valor tiene que ser un númro positivo"]},model:{value:t.numerobultos,callback:function(e){t.numerobultos=e},expression:"numerobultos"}})],1),e(n["a"],{attrs:{cols:"12",lg:"4",xl:"4"}},[e($["a"],{attrs:{label:"Volumen",outlined:"",dense:"",type:"number",suffix:"m3",rules:[t=>!!t||"Dato Requerido",t=>t>0||"El valor tiene que ser un númro positivo"]},model:{value:t.volumen,callback:function(e){t.volumen=e},expression:"volumen"}})],1),e(n["a"],{attrs:{cols:"12",lg:"4",xl:"4"}},[e($["a"],{attrs:{label:"Peso",outlined:"",dense:"",type:"number",suffix:"kg",rules:[t=>!!t||"Dato Requerido",t=>t>0||"El valor tiene que ser un númro positivo"]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.anadirCarga()}},model:{value:t.peso,callback:function(e){t.peso=e},expression:"peso"}})],1),e(n["a"],{attrs:{cols:"12",align:"center"}},[e(a["a"],{staticClass:"mx-1",attrs:{small:"",color:"info"},on:{click:function(e){return t.anadirCarga()}}},[t._v(" AGREGAR ")]),e(a["a"],{staticClass:"mx-1",attrs:{small:"",color:"warning"},on:{click:function(e){t.calculadoraFlag=!t.calculadoraFlag}}},[t._v(" USAR CALCULADORA ")])],1),e(n["a"],{attrs:{cols:"12"}},[e(f["a"],{staticClass:"elevation-1 my-2",attrs:{dense:""}},[e("thead",{staticClass:"teal lighten-2 white--text"},[e("tr",[e("th",[t._v("Cant. Bultos")]),e("th",[t._v("Peso")]),e("th",[t._v("Volumen")])])]),e("tbody",[e("tr",[e("td",[t._v(" "+t._s(t.$store.state.pricing.datosPrincipales.numerobultos)+" ")]),e("td",[t._v(t._s(t.$store.state.pricing.datosPrincipales.peso))]),e("td",[t._v(t._s(t.$store.state.pricing.datosPrincipales.volumen))])])])])],1)],1)],1)],1),t.mostrarContinuarFlag&&t.mostrarBtn?e(r["a"],{staticClass:"mt-auto"},[e(v["a"]),e(a["a"],{attrs:{color:"#3F51B5",small:"",dark:""},on:{click:function(e){return t.aceptar()}}},[t._v(" Continuar Servicios ")])],1):t._e()],1),e(d["a"],{attrs:{scrollable:"",persistent:"","max-width":"30%",transition:"dialog-transition"},model:{value:t.dialogConteiner,callback:function(e){t.dialogConteiner=e},expression:"dialogConteiner"}},[e(o["a"],[e(r["d"],{attrs:{"primary-title":""}},[t._v(" Añadir Contenedor ")]),e(r["c"],[e(u["a"],{ref:"frmContainer"},[e(m["a"],{attrs:{items:t.$store.state.itemsContainers,label:"Container","item-text":"name","item-value":"id",rules:[t=>!!t||"Dato Requerido"],"error-messages":t.err,"return-object":""},model:{value:t.containers.container,callback:function(e){t.$set(t.containers,"container",e)},expression:"containers.container"}}),e($["a"],{attrs:{name:"Cantidad",label:"Cantidad",type:"number",rules:[t=>!!t||"Dato Requerido"]},model:{value:t.containers.cantidad,callback:function(e){t.$set(t.containers,"cantidad",e)},expression:"containers.cantidad"}})],1)],1),e(r["a"],[e(v["a"]),e(a["a"],{attrs:{color:"success"},on:{click:function(e){return t.guardarContainer()}}},[t._v("Aceptar")]),e(a["a"],{attrs:{color:"red",dark:""},on:{click:function(e){t.dialogConteiner=!t.dialogConteiner}}},[t._v(" Cancelar ")])],1)],1)],1),e(d["a"],{attrs:{"max-width":"40%"},model:{value:t.calculadoraFlag,callback:function(e){t.calculadoraFlag=e},expression:"calculadoraFlag"}},[e(o["a"],[e(r["d"],{staticClass:"custom-card-title justify-center"},[e("h3",[t._v("CALCULADORA VOLUMÉTRICA")])]),e(r["c"],[e(l["a"],[e(u["a"],{ref:"calcularPesoFrom"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"},[e(s["a"],{attrs:{dense:"",items:t.unidadesLongitud,label:"Longitud",rules:[t=>!!t||"Dato Requerido.",t=>t>0||"El valor tiene que ser un númro positivo"]},model:{value:t.fromMedidas.idLongitud,callback:function(e){t.$set(t.fromMedidas,"idLongitud",e)},expression:"fromMedidas.idLongitud"}})],1),e("div",{staticClass:"col-4"},[e(s["a"],{attrs:{dense:"",items:t.unidadesPeso,label:"Peso",rules:[t=>!!t||"Dato Requerido."]},model:{value:t.fromMedidas.idpeso,callback:function(e){t.$set(t.fromMedidas,"idpeso",e)},expression:"fromMedidas.idpeso"}})],1),e("div",{staticClass:"col-4"},[e($["a"],{attrs:{type:"number",min:"1",label:"N° Bultos",required:"",dense:"",step:"1",rules:[t=>!!t||"Dato Requerido.",t=>/^-?\d+$/.test(t)||"Debe ser un número entero válido",t=>t>0||"El dato debe ser positivo"]},model:{value:t.fromMedidas.bultos,callback:function(e){t.$set(t.fromMedidas,"bultos",e)},expression:"fromMedidas.bultos"}})],1),e("div",{staticClass:"col-12 t-blue justify-center"},[e("b",[t._v("MEDIDAS POR CADA BULTO")])]),e("div",{staticClass:"col-3"},[e($["a"],{attrs:{type:"text",label:"Largo",required:"",dense:"",rules:[t=>!!t||"Dato Requerido.",t=>t>0||"El valor tiene que ser un númro positivo"],inputmode:"numeric"},model:{value:t.fromMedidas.largo,callback:function(e){t.$set(t.fromMedidas,"largo",e)},expression:"fromMedidas.largo"}})],1),e("div",{staticClass:"col-3"},[e($["a"],{attrs:{type:"text",label:"Ancho",required:"",dense:"",rules:[t=>!!t||"Dato Requerido.",t=>t>0||"El valor tiene que ser un númro positivo"],inputmode:"numeric"},model:{value:t.fromMedidas.ancho,callback:function(e){t.$set(t.fromMedidas,"ancho",e)},expression:"fromMedidas.ancho"}})],1),e("div",{staticClass:"col-3"},[e($["a"],{attrs:{type:"text",label:"Alto",required:"",dense:"",rules:[t=>!!t||"Dato Requerido.",t=>t>0||"El valor tiene que ser un númro positivo"],inputmode:"numeric"},model:{value:t.fromMedidas.alto,callback:function(e){t.$set(t.fromMedidas,"alto",e)},expression:"fromMedidas.alto"}})],1),e("div",{staticClass:"col-3"},[e($["a"],{attrs:{type:"number",min:"0",step:"0.01",label:"Peso X Bulto",required:"",dense:"",rules:[t=>!!t||"Dato Requerido.",t=>t>0||"El valor tiene que ser un númro positivo"]},model:{value:t.fromMedidas.peso,callback:function(e){t.$set(t.fromMedidas,"peso",e)},expression:"fromMedidas.peso"}})],1),e(p["a"],{attrs:{"text-right":""}},[e(a["a"],{staticClass:"me-2 text-white",attrs:{dense:"",small:"",color:"#fb9514",dark:""},on:{click:function(e){return t.calcular()}}},[e("b",[t._v("Calcular")])])],1)],1)]),e("div",{staticClass:"col-12"},[e("span",{staticClass:"mt-2 ma-1 pa-1"},[t._v(" Nota: Los valores de Peso y Volumen serán convertidos automáticamente al sistema MKS (Metros, Kilogramos, segundos) respectivamente. ")]),t.tblMedida.length>0?e(f["a"],{staticClass:"elevation-1",attrs:{dense:""}},[e("thead",{staticClass:"success white--text"},[e("tr",[e("td",[t._v("#")]),e("td",[t._v("Uni(s)")]),e("td",[t._v("Peso (Kg.)")]),e("td",[t._v("Volumen (m "),e("sup",[t._v("3")]),t._v(")")]),e("td")])]),e("tbody",[t._l(t.tblMedida,(function(i,s){return e("tr",{key:s},[e("td",[t._v(t._s(s+1))]),e("td",[e($["a"],{attrs:{type:"number",outlined:"",solo:"",dense:"","hide-details":""},on:{input:t.recalcularCalculadora},model:{value:i.uni,callback:function(e){t.$set(i,"uni",e)},expression:"medida.uni"}})],1),e("td",[e($["a"],{attrs:{type:"number",outlined:"",solo:"",dense:"","hide-details":""},on:{input:t.recalcularCalculadora},model:{value:i.peso,callback:function(e){t.$set(i,"peso",e)},expression:"medida.peso"}})],1),e("td",[e($["a"],{attrs:{type:"number",outlined:"",solo:"",dense:"","hide-details":""},on:{input:t.recalcularCalculadora},model:{value:i.volumen,callback:function(e){t.$set(i,"volumen",e)},expression:"medida.volumen"}})],1),e("td",[e(a["a"],{staticClass:"ma-0 pa-0",attrs:{dense:"",icon:""}},[e(g["a"],{attrs:{color:"orange darken-4"},on:{click:function(e){return t.borrarFila(s)}}},[t._v("mdi-delete-circle")])],1)],1)])})),e("tr",[e("td",[t._v(t._s(t.tblTotal.descripcion))]),e("td",[t._v(t._s(t.tblTotal.uni))]),e("td",[t._v(t._s(t.tblTotal.peso))]),e("td",[t._v(t._s(t.tblTotal.volumen))])])],2)]):t._e()],1)],1)],1),e(r["a"],[e(v["a"]),e(a["a"],{attrs:{color:"success",dark:"",small:"",disabled:t.tblMedida.length<0},on:{click:function(e){return t.guardarDatosCalculadora()}}},[t._v(" Aceptar ")]),e(a["a"],{attrs:{color:"red white--text",small:""},on:{click:function(e){t.calculadoraFlag=!t.calculadoraFlag}}},[t._v(" Cerrar ")])],1)],1)],1)],1)},b=[],_=(i("14d9"),i("e9f5"),i("910d"),i("7d54"),i("a732"),i("2f62")),x=i("3d20"),P=i.n(x),y=i("54e1"),k={name:"DatosCargaComponent",mixins:[y["a"]],props:{mostrarBtn:{type:Boolean,default:!0},abrirModalContenedorRecargar:{type:Boolean,default:!1}},data(){return{mostrarContinuarFlag:!0,headers:[{text:"",value:"action"},{text:"#",value:"number"},{text:"Tipo Contendor",value:"description"},{text:"Cantidad",value:"cantidad"}],dialogConteiner:!1,numerobultos:"",volumen:"",peso:"",err:"",containers:{container:"",cantidad:""},calculadoraFlag:!1,unidadesLongitud:[{text:"Centimetros",value:1,factor:.01},{text:"Metros",value:2,factor:1},{text:"Pulgadas",value:3,factor:.0254},{text:"Pie",value:4,factor:.3048},{text:"Milímetros",value:5,factor:.001}],unidadesPeso:[{text:"Kilo",value:1,factor:1},{text:"Libra",value:2,factor:.4535},{text:"Tonelada",value:3,factor:1e3}],fromMedidas:{idLongitud:null,idpeso:null,bultos:null,largo:null,ancho:null,alto:null,peso:null},tblMedida:[],tblTotal:{descripcion:null,uni:null,peso:null,volumen:null}}},async mounted(){},computed:{abrirModalContenedor:{get(){return this.$store.state.pricing.abrirModalContenedor}}},watch:{abrirModalContenedorRecargar(){0==this.$store.state.pricing.datosPrincipales.containers.length&&(this.dialogConteiner=!0)},async abrirModalContenedor(){let t=this.$store.state.pricing.listShipment.some(t=>t.id==(this.$store.state.pricing.datosPrincipales.idtipocarga.id?this.$store.state.pricing.datosPrincipales.idtipocarga.id:this.$store.state.pricing.datosPrincipales.idtipocarga)&&"FCL"==t.code);t&&0==this.$store.state.pricing.datosPrincipales.containers.length&&(this.dialogConteiner=!0),t||0!=this.$store.state.pricing.datosPrincipales.numerobultos&&0!=this.$store.state.pricing.datosPrincipales.peso&&0!=this.$store.state.pricing.datosPrincipales.volumen||P.a.fire({icon:"info",title:"Importante",text:"Es necesario llenar los datos, el Nro Bultos, Volumen, Peso."})}},methods:{...Object(_["b"])(["_getContainers","getPortBegin","getPortEnd"]),async recargarPuertoOrigen(t){let e="object"===typeof this.$store.state.pricing.datosPrincipales.idtipocarga?this.$store.state.pricing.datosPrincipales.idtipocarga.id:this.$store.state.pricing.datosPrincipales.idtipocarga,i=this.$store.state.pricing.listShipment.filter(t=>t.id==e);await this.getPortBegin({id_transport:i[0].id_transport,id:this.$store.state.pricing.datosPrincipales.idorigen,search:t})},async recargarPuertoDestino(t){let e="object"===typeof this.$store.state.pricing.datosPrincipales.idtipocarga?this.$store.state.pricing.datosPrincipales.idtipocarga.id:this.$store.state.pricing.datosPrincipales.idtipocarga,i=this.$store.state.pricing.listShipment.filter(t=>t.id==e);await this.getPortEnd({id_transport:i[0].id_transport,id:this.$store.state.pricing.datosPrincipales.iddestino,search:t})},anadirCarga(){this.$refs.frmDatosCarga.validate()&&(this.$store.state.pricing.datosPrincipales.numerobultos=this.numerobultos,this.$store.state.pricing.datosPrincipales.volumen=this.volumen,this.$store.state.pricing.datosPrincipales.peso=this.peso,this.$refs.frmDatosCarga.reset(),this.$store.state.pricing.actualizarCostosFlag=!this.$store.state.pricing.actualizarCostosFlag)},async guardarContainer(){this.$store.state.pricing.listCostos.length;this.err="",this.$refs.frmContainer.validate()&&(0==this.$store.state.pricing.datosPrincipales.containers.filter(t=>t.id==this.containers.container.id).length?(this.$store.state.pricing.datosPrincipales.containers.push({id_containers:this.containers.container.id,id:this.containers.container.id,description:this.containers.container.name,cantidad:this.containers.cantidad,code:this.containers.container.code}),this.dialogConteiner=!1,this.containers={container:"",cantidad:""},this.$emit("recargarCostos",!1)):this.err="Contenedor ya se encuentra en la lista")},async eliminarContainer({index:t=null}){this.$store.state.pricing.datosPrincipales.containers.splice(t,1),this.$emit("recargarCostos")},async aceptar(){let t=!0;this.$refs.frmPuerto.validate()&&("FCL"==this.$store.state.pricing.datosPrincipales.idtipocarga.code&&0==this.$store.state.pricing.datosPrincipales.containers.length&&(P.a.fire({icon:"error",title:"Aviso",text:"Se necesita al menos un contenedor"}),t=!1),"FCL"!=this.$store.state.pricing.datosPrincipales.idtipocarga.code&&(this.$store.state.pricing.datosPrincipales.numerobultos||this.$store.state.pricing.datosPrincipales.volumen||this.$store.state.pricing.datosPrincipales.peso||(P.a.fire({icon:"error",title:"Aviso",text:"Se necesita los datos de la carga"}),t=!1)),t&&(this.$emit("activarServicios"),this.mostrarContinuarFlag=!1))},calcular(){if(this.$refs.calcularPesoFrom.validate()){let t=this.unidadesLongitud.filter(t=>t.value==this.fromMedidas.idLongitud)[0].factor,e=this.unidadesPeso.filter(t=>t.value==this.fromMedidas.idpeso)[0].factor,i=this.fromMedidas.largo*this.fromMedidas.ancho*this.fromMedidas.alto*Math.pow(t,3),s=e*this.fromMedidas.peso*this.fromMedidas.bultos;this.tblMedida.push({uni:this.fromMedidas.bultos,peso:parseFloat(s).toFixed(2),volumen:parseFloat(this.fromMedidas.bultos*i).toFixed(2)}),this.$nextTick(()=>{this.$refs.calcularPesoFrom.reset(),this.total()})}},total(){this.tblTotal=null;let t=0,e=0,i=0;this.tblMedida.forEach(s=>{t+=parseFloat(s.uni),e+=parseFloat(s.peso),i+=parseFloat(s.volumen)}),this.tblTotal={descripcion:"Total:",uni:t,peso:e,volumen:i}},borrarFila(t){this.tblMedida.splice(t,1),this.total()},guardarDatosCalculadora(){this.$store.state.pricing.datosPrincipales.numerobultos=this.tblTotal.uni,this.$store.state.pricing.datosPrincipales.volumen=this.tblTotal.volumen,this.$store.state.pricing.datosPrincipales.peso=this.tblTotal.peso,this.calculadoraFlag=!1,this.$store.state.pricing.actualizarCostosFlag=!this.$store.state.pricing.actualizarCostosFlag},mostrarComboPercepcionAduana(){let t=9589==JSON.parse(sessionStorage.getItem("iso_pais"));return t&&this.$store.state.pricing.listModality.some(t=>t.id==this.$store.state.pricing.datosPrincipales.idsentido&&"I"==t.code)},cambiarImpuesto(){let t="10";this.$store.state.pricing.listImpuestos.length>0&&(this.$store.state.pricing.listImpuestos.filter(t=>"09"==t.codigo)[0].codigo01="10"),this.$store.state.pricing.datosPrincipales.id_percepcionaduana&&(t=this.$store.state.masterusuarios.lstPercepcionAduana.filter(t=>t.id==this.$store.state.pricing.datosPrincipales.id_percepcionaduana)[0].codigo01,this.$store.state.pricing.listImpuestos.length>0&&(this.$store.state.pricing.listImpuestos.filter(t=>"09"==t.codigo)[0].codigo01="10"));let e=[...this.$store.state.pricing.listImpuestos];e.length>0&&(e.filter(t=>"09"==t.codigo)[0].codigo01=t,this.$store.commit("ACTUALIZAR_IMPUEST",e)),this.$store.state.pricing.opcionCostos.forEach(e=>{e.listImpuestos.length>0&&(e.listImpuestos.filter(t=>"09"==t.codigo)[0].codigo01=t)}),this.$forceUpdate()},recalcularCalculadora(){let t=0,e=0,i=0;this.tblMedida.forEach(s=>{t+=parseFloat(s.uni),e+=parseFloat(s.peso),i+=parseFloat(s.volumen)}),this.tblTotal.uni=parseFloat(t).toFixed(2),this.tblTotal.peso=parseFloat(e).toFixed(2),this.tblTotal.volumen=parseFloat(i).toFixed(2)}},computed:{getPuertoOrigen(){let t=[];if(!this.$store.state.pricing.datosPrincipales.iddestino)return this.$store.state.pricing.listPortBegin;var e=this.$store.state.pricing.listPortEnd.filter(t=>t.id_port==this.$store.state.pricing.datosPrincipales.iddestino)[0].id_port;return t=this.$store.state.pricing.listPortBegin.filter(t=>t.id_port!=e),t},getPuertoDestino(){let t=[];if(this.$store.state.pricing.datosPrincipales.idorigen){var e=this.$store.state.pricing.listPortBegin.filter(t=>t.id_port==this.$store.state.pricing.datosPrincipales.idorigen)[0].id_port;t=this.$store.state.pricing.listPortEnd.filter(t=>t.id_port!=e)}else t=this.$store.state.pricing.listPortEnd;return t},isFcl(){return"object"===typeof this.$store.state.pricing.datosPrincipales.idtipocarga?"FCL"===this.$store.state.pricing.datosPrincipales.idtipocarga.code:"object"!==typeof this.$store.state.pricing.datosPrincipales.idtipocarga&&this.$store.state.pricing.listShipment.some(t=>t.id==this.$store.state.pricing.datosPrincipales.idtipocarga&&"FCL"==t.code)}}},F=k,S=(i("7581"),i("2877")),O=Object(S["a"])(F,C,b,!1,null,null,null);e["a"]=O.exports},c5c5:function(t,e,i){},dacf:function(t,e,i){},f381:function(t,e,i){"use strict";i("5b01")}}]);