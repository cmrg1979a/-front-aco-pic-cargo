(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7080abb3"],{"17b3":function(t,a,e){},2221:function(t,a,e){"use strict";e("d3db")},"41a5":function(t,a,e){"use strict";e.r(a);var s=e("0798"),i=e("c6a6"),o=e("8336"),r=e("b0af"),n=e("99d9"),l=e("62ad"),c=e("a523"),d=e("169a"),u=e("4bd4"),p=e("132d"),h=e("891e"),g=e("67b6"),v=e("43a6"),m=e("0fd9"),f=e("1f4f"),C=e("2fa4"),_=e("8654"),b=(e("e9f5"),e("910d"),function(){var t=this,a=t._self._c;return a(c["a"],[a(l["a"],{attrs:{cols:"12"}},[[a("div",{staticClass:"text-center"},[a(h["a"],{attrs:{length:t.$store.state.aduana.opcionCostos.filter(t=>!!t.selected).length,circle:""},model:{value:t.page,callback:function(a){t.page=a},expression:"page"}})],1)]],2),a(d["a"],{staticClass:"classDialog",attrs:{scrollable:"",persistent:"","max-width":"50%",transition:"dialog-transition"},model:{value:t.aprobarflag,callback:function(a){t.aprobarflag=a},expression:"aprobarflag"}},[a(r["a"],[a(n["d"],{attrs:{"primary-title":""}},[t._v(" SELECCIONE EL EXPEDIENTE A ASOCIAR: "),a(C["a"]),a(o["a"],{attrs:{icon:"",color:"default"},on:{click:function(a){t.aprobarflag=!t.aprobarflag}}},[a(p["a"],[t._v("mdi-close")])],1)],1),a(n["c"],[a(u["a"],{ref:"frmAprobar"},[a(m["a"],[a(i["a"],{staticClass:"mx-5 my-5",attrs:{items:t.$store.state.itemsMasterList,label:"Expediente","item-text":"code_master","item-value":"id",rules:[t=>!!t||"Dato Requerido"],"no-data-text":t.noDataText()},on:{change:function(a){return t.verificarMaster()}},model:{value:t.id_exp,callback:function(a){t.id_exp=a},expression:"id_exp"}})],1)],1),t.mostrarAdvertencia?a(s["a"],{attrs:{border:"left","colored-border":"",type:"error",elevation:"2"}},[t._v(" El Master seleccionado no coincide con "+t._s(t.textValidacionCotizacionMaster.join(", "))+" asociados a la cotización. "),a("h3",[t._v("¿Está seguro, de asociar la cotización a este registro?")])]):t._e()],1),a(n["a"],[a(C["a"]),a(o["a"],{staticClass:"mx-1",attrs:{small:"",color:"success",loading:t.loading},on:{click:function(a){return t.continuarAprobar()}}},[t._v(" SELECCIONAR ")]),a(o["a"],{staticClass:"mx-1",attrs:{small:"",color:"error"},on:{click:function(a){t.aprobarflag=!t.aprobarflag}}},[t._v(" Cancelar ")])],1)],1)],1),a(d["a"],{staticClass:"classDialog",attrs:{scrollable:"",persistent:"","max-width":"35%",transition:"dialog-transition"},model:{value:t.seleccionQuoteAprobar,callback:function(a){t.seleccionQuoteAprobar=a},expression:"seleccionQuoteAprobar"}},[a(r["a"],{staticClass:"pa-5"},[a("h2",{staticClass:"blue--text"},[t._v(" ESTÁS A PUNTO DE GENERAR UN INSTRUCTIVO A OPERACIONES ")]),t._v(" Seleccione la opción aprobada por el cliente: "),a(n["c"],[a(u["a"],{ref:"frmAprobar"},[a(v["a"],{attrs:{rules:[t=>!!t||"Seleccione una opción"]},model:{value:t.nro_propuesta,callback:function(a){t.nro_propuesta=a},expression:"nro_propuesta"}},t._l(t.$store.state.aduana.opcionCostos.filter(t=>t.selected),(function(e,s){return a(g["a"],{key:s,attrs:{value:e.nro_propuesta,label:`Opción ${e.nro_propuesta} - ${t.getProveedor(e)}`}})})),1)],1)],1),a(n["a"],[a(C["a"]),a(o["a"],{staticClass:"mx-1",attrs:{color:"success"},on:{click:function(a){return t.abrirModalAprobar()}}},[t._v(" Enviar a Operaciones - Tráfico ")]),a(o["a"],{staticClass:"mx-1",attrs:{color:"error"},on:{click:function(a){t.seleccionQuoteAprobar=!t.seleccionQuoteAprobar}}},[t._v("Cancelar")])],1)],1)],1),a("div",{staticClass:"col-12 mb-0 pa-0"},[t.mostrarBtnAprobar()?a(o["a"],{staticClass:"mx-1",attrs:{color:"#004D40",elevation:"2",small:""},on:{click:function(a){return t.abrirSeleccionDeQuoteAAprobar()}}},[a("span",{staticStyle:{color:"#ffffff"}},[t._v("Enviar a Operaciones/ Tráfico")])]):t._e(),a("center",[a("h3",[t._v(" INSTRUCTIVO COMPRA "+t._s(t.$store.state.aduana.listInstructivo[0].expediente)+" - N°"+t._s(t.$store.state.aduana.listIngresosInstructivo[t.page-1].nro_propuesta)+" ")]),a("h3",{staticClass:"mb-1 ml-1"},[t._v(" "+t._s(1==t.$store.state.aduana.aprobadoflag?"APROBADO":t.$store.state.pricing.listQuoteStatus.filter(a=>a.id==t.$store.state.aduana.datosPrincipales.id_status)[0].name)+" | Exp. Master: "+t._s(t.$store.state.aduana.listInstructivo[0].code_master?t.$store.state.aduana.listInstructivo[0].code_master:"--")+" | Exp. House: "+t._s(t.$store.state.aduana.listInstructivo[0].code_house?t.$store.state.aduana.listInstructivo[0].code_house:"--")+" ")]),a("h4",{staticClass:"mb-1 ml-1"},[t._v(" "+t._s(t.$store.state.aduana.listInstructivo[0].sentido)+" - "+t._s(t.$store.state.aduana.listInstructivo[0].carga)+" - "+t._s(t.$store.state.aduana.listInstructivo[0].incoterms)+" ")])])],1),a(m["a"],[a(l["a"],{attrs:{cols:"12",md:"4",lg:"4",xl:"4"}},[a(l["a"],{attrs:{cols:"12"}},[a(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[a("h4",{staticClass:"mb-5 ml-1"},[t._v("DATOS DEL CLIENTE")]),a(_["a"],{staticClass:"my-1",attrs:{readonly:"",label:"NOMBRE:",dense:""},model:{value:t.$store.state.aduana.datosPrincipales.nombre,callback:function(a){t.$set(t.$store.state.aduana.datosPrincipales,"nombre",a)},expression:"$store.state.aduana.datosPrincipales.nombre"}}),a(_["a"],{staticClass:"my-1",attrs:{readonly:"",label:"DIRECCIÓN:",dense:""},model:{value:t.$store.state.aduana.listInstructivo[0].direccion,callback:function(a){t.$set(t.$store.state.aduana.listInstructivo[0],"direccion",a)},expression:"$store.state.aduana.listInstructivo[0].direccion"}}),a(_["a"],{staticClass:"my-1",attrs:{readonly:"",label:"CONTACTO:",dense:""},model:{value:t.$store.state.aduana.datosPrincipales.telefono,callback:function(a){t.$set(t.$store.state.aduana.datosPrincipales,"telefono",a)},expression:"$store.state.aduana.datosPrincipales.telefono"}}),a(_["a"],{staticClass:"my-1",attrs:{readonly:"",label:"VENDEDOR:",dense:""},model:{value:t.$store.state.aduana.vendedor,callback:function(a){t.$set(t.$store.state.aduana,"vendedor",a)},expression:"$store.state.aduana.vendedor"}})],1)],1),a(l["a"],{attrs:{cols:"12"}},[a(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[a("h4",{staticClass:"mb-1 ml-1"},[t._v("SERVICIOS A REALIZAR")]),a(f["a"],{attrs:{dense:""}},[a("tbody",t._l(t.$store.state.aduana.listServiciosInstructivo,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.status))])])})),0)])],1)],1),a(l["a"],{attrs:{cols:"12"}},[a(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[a("h4",{staticClass:"mb-5 ml-1"},[t._v("DATOS DE MOVIMIENTO DE MERCANCIA")]),a(_["a"],{staticClass:"my-1",attrs:{dense:"",label:"NOMBRE DEL PROVEEDOR:",required:""},model:{value:t.$store.state.aduana.listInstructivo[0].proveedor,callback:function(a){t.$set(t.$store.state.aduana.listInstructivo[0],"proveedor",a)},expression:"$store.state.aduana.listInstructivo[0].proveedor"}}),"SXWORK"==t.$store.state.aduana.listInstructivo[0].icotems?a(_["a"],{staticClass:"my-1",attrs:{dense:"",readonly:"",label:"DIRECCION ORIGEN:"},model:{value:t.$store.state.aduana.listInstructivo[0].direccionorigen,callback:function(a){t.$set(t.$store.state.aduana.listInstructivo[0],"direccionorigen",a)},expression:"$store.state.aduana.listInstructivo[0].direccionorigen"}}):t._e(),a(_["a"],{staticClass:"my-1",attrs:{dense:"",readonly:"",label:"POL:"},model:{value:t.$store.state.aduana.listInstructivo[0].origen,callback:function(a){t.$set(t.$store.state.aduana.listInstructivo[0],"origen",a)},expression:"$store.state.aduana.listInstructivo[0].origen"}}),a(_["a"],{staticClass:"my-1",attrs:{dense:"",readonly:"",label:"POD:"},model:{value:t.$store.state.aduana.listInstructivo[0].destino,callback:function(a){t.$set(t.$store.state.aduana.listInstructivo[0],"destino",a)},expression:"$store.state.aduana.listInstructivo[0].destino"}}),a(_["a"],{staticClass:"my-1",attrs:{dense:"",required:"",label:"NOMBRE FISCAL"},model:{value:t.$store.state.aduana.listInstructivo[0].fiscal,callback:function(a){t.$set(t.$store.state.aduana.listInstructivo[0],"fiscal",a)},expression:"$store.state.aduana.listInstructivo[0].fiscal"}}),a(_["a"],{staticClass:"my-1",attrs:{dense:"",readonly:"",label:"RUC:"},model:{value:t.$store.state.aduana.listInstructivo[0].ruc,callback:function(a){t.$set(t.$store.state.aduana.listInstructivo[0],"ruc",a)},expression:"$store.state.aduana.listInstructivo[0].ruc"}})],1)],1),a(l["a"],{attrs:{cols:"12"}},[a(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[a("h4",{staticClass:"mb-5 ml-1"},[t._v(" NOTAS ESPECIALES: "),a(o["a"],{attrs:{color:"success",icon:""},on:{click:function(a){t.dialog=!t.dialog}}},[a(p["a"],[t._v("mdi-plus")])],1)],1),a(f["a"],{attrs:{dense:"",border:""}},[a("tbody",t._l(t.$store.state.aduana.listInstructivo[0].notas,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.description))])])})),0)])],1)],1),a("div",{staticClass:"col-12"})],1),a(l["a"],{attrs:{cols:"12",md:"8",lg:"8",xl:"8"}},[a(m["a"],[a(l["a"],{attrs:{cols:"12"}},[a(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[a("h4",{staticClass:"mb-1 ml-1"},[t._v("INGRESOS")]),a(f["a"],{attrs:{dense:""}},[a("thead",[a("tr",[a("th",{staticClass:"header align-right"}),a("th",{staticClass:"header align-left"},[t._v("DESCRIPCIÓN")]),a("th",{staticClass:"header align-right"}),a("th",{staticClass:"header align-right"},[t._v("TOTAL")])])]),a("tbody",t._l(t.$store.state.aduana.listIngresosInstructivo[t.page-1].opcion,(function(e,s){return a("tr",{key:s,class:["TOTAL"===e.descripcion?"totalClass":"SubTotal"===e.descripcion?"subTotalClass":"","TOTAL"===e.service?"totalClass":"SubTotal"===e.service?"subTotalClass":""]},[a("td",[t._v(" "+t._s(e.descripcion)+" ")]),a("td",[t._v(" "+t._s(e.service)+" ")]),a("td",{staticClass:"align-right"},[t._v(" "+t._s(e.igv)+" ")]),a("td",{staticClass:"align-right"},[t._v(" "+t._s(e.total)+" ")])])})),0)])],1)],1),a(l["a"],{attrs:{cols:"12"}},[a(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[a("h4",{staticClass:"mb-1 ml-1"},[t._v("COSTOS:")]),a(f["a"],{attrs:{dense:""}},[a("thead",[a("tr",[a("th",{staticClass:"header"}),a("th",{staticClass:"header align-left"},[t._v("DESCRIPCIÓN")]),a("th",{staticClass:"header align-right"},[t._v("TOTAL")])])]),a("tbody",t._l(t.$store.state.aduana.listCostosInstructivo[t.page-1].opcion,(function(e,s){return a("tr",{key:s,class:["TOTAL"===e.proveedor?"totalClass":"SubTotal"===e.proveedor?"subTotalClass":"","TOTAL"===e.service?"totalClass":"SubTotal"===e.service?"subTotalClass":""]},[a("td",[t._v(" "+t._s(e.proveedor)+" ")]),a("td",[t._v(" "+t._s(e.service)+" ")]),a("td",{staticClass:"align-right"},[t._v(" "+t._s(e.total)+" ")])])})),0)])],1)],1),t.$store.state.aduana.listImpuestosInstructivo.length>0?a(l["a"],{attrs:{cols:"12"}},[a(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[a("h4",{staticClass:"mb-1 ml-1"},[t._v("IMPUESTOS")]),a(f["a"],{attrs:{dense:""}},[a("thead",[a("tr",[a("th",{staticClass:"header align-left"},[t._v("DESCRIPCIÓN")]),a("th",{staticClass:"header align-left"},[t._v("PORCENTAJE")]),a("th",{staticClass:"header align-right"},[t._v("TOTAL")])])]),a("tbody",t._l(t.$store.state.aduana.listImpuestosInstructivo[t.page-1].opcion,(function(e,s){return a("tr",{key:s,class:["TOTAL"===e.name?"totalClass":"SubTotal"===e.name?"subTotalClass":""]},[a("td",[t._v(" "+t._s(e.name)+" ")]),a("td",[t._v(" "+t._s(e.percentage)+" ")]),a("td",{staticClass:"align-right"},[t._v(" "+t._s(e.valor)+" ")])])})),0)])],1)],1):t._e()],1)],1)],1),a(d["a"],{attrs:{"max-width":"600px",transition:"dialog-transition"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[a(r["a"],[a(n["d"],{attrs:{"primary-title":""}},[t._v(" NUEVA NOTA: ")]),a(n["c"],[a(u["a"],{ref:"nota"},[a(_["a"],{attrs:{label:"DESCRIPCIÓN"},model:{value:t.descripcionNota,callback:function(a){t.descripcionNota=a},expression:"descripcionNota"}})],1)],1),a(n["a"],[a(o["a"],{attrs:{color:"success",text:""},on:{click:t.guardarNota}},[t._v("Añadir")])],1)],1)],1),a(d["a"],{attrs:{persistent:"","max-width":"30%",transition:"dialog-transition"},model:{value:t.dialogConfig,callback:function(a){t.dialogConfig=a},expression:"dialogConfig"}},[a(r["a"],[a("ConfigCotizacion"),a(n["a"],[a(C["a"]),a(o["a"],{staticClass:"mx-1",attrs:{color:"success"},on:{click:function(a){return t.guardarConfig()}}},[t._v(" Guardar ")])],1)],1)],1),a(d["a"],{staticClass:"classDialog",attrs:{scrollable:"",persistent:"","max-width":"50%",transition:"dialog-transition"},model:{value:t.dialogHouse,callback:function(a){t.dialogHouse=a},expression:"dialogHouse"}},[a(r["a"],{attrs:{cass:"px-5 "}},[a(n["d"],{attrs:{"primary-title":""}},[t._v(" CREAR NUEVO HOUSE O ASOCIAR A UNO "),a(C["a"]),a(o["a"],{attrs:{icon:"",color:"default"},on:{click:function(a){t.dialogHouse=!t.dialogHouse}}},[a(p["a"],[t._v("mdi-close")])],1)],1),a(n["c"],[a(i["a"],{attrs:{items:t.lstHouse,"item-text":"code_house","item-value":"id"},on:{change:t.validarExistePagosHouse},model:{value:t.id_house,callback:function(a){t.id_house=a},expression:"id_house"}}),0==t.id_house||t.textValidacionPago?t._e():a(i["a"],{attrs:{items:t.optionHouse,"item-value":"id"},on:{change:t.validarExistePagosMaster},model:{value:t.id_opcion_house,callback:function(a){t.id_opcion_house=a},expression:"id_opcion_house"}}),a("p",{staticClass:"red--text mx-5 my-0"},[t._v(" "+t._s(t.textValidacionPago)+" ")])],1),a(n["a"],[a(C["a"]),a(o["a"],{staticClass:"mx-1",attrs:{small:"",color:"success",disabled:t.activarBtnContinuar,loading:t.loading},on:{click:function(a){return t.aprobar()}}},[t._v(" APROBAR ")]),a(o["a"],{staticClass:"mx-1",attrs:{small:"",color:"error"},on:{click:function(a){t.dialogHouse=!t.dialogHouse}}},[t._v(" Cancelar ")])],1)],1)],1),a(d["a"],{staticClass:"classDialog",attrs:{scrollable:"",persistent:"","max-width":"50%",transition:"dialog-transition"},model:{value:t.dialogCostos,callback:function(a){t.dialogCostos=a},expression:"dialogCostos"}},[a(r["a"],{attrs:{cass:"px-5"}},[a(n["d"],{attrs:{"primary-title":""}},[t._v(" OPCIÓN SOBRE LOS COSTOS "),a(C["a"]),a(o["a"],{attrs:{icon:"",color:"default"},on:{click:function(a){t.dialogCostos=!t.dialogCostos}}},[a(p["a"],[t._v("mdi-close")])],1)],1),a(n["c"],[a(i["a"],{attrs:{items:t.optionCostos,"item-value":"id"},on:{change:t.validarExistePagosMaster},model:{value:t.id_opcion,callback:function(a){t.id_opcion=a},expression:"id_opcion"}})],1),a("p",{staticClass:"red--text mx-5 my-0"},[t._v(" "+t._s(t.textValidacionPago)+" ")]),a(n["a"],[a(C["a"]),a(o["a"],{staticClass:"mx-1",attrs:{small:"",color:"success",disabled:t.activarBtnContinuar,loading:t.loading},on:{click:t.buscarHouseAsociadosAMaster}},[t._v(" CONITNUAR ")]),a(o["a"],{staticClass:"mx-1",attrs:{small:"",color:"error",loading:t.loading},on:{click:function(a){t.dialogCostos=!t.dialogCostos}}},[t._v(" Cancelar ")])],1)],1)],1)],1)}),I=[],x=(e("14d9"),e("a732"),e("2f62")),A=e("3d20"),$=e.n(A),E=e("c1df"),y=e.n(E),O=e("54e1"),T=e("bc3a"),S=e.n(T),w={mixins:[O["a"]],components:{ConfigCotizacion:()=>e.e("chunk-2d0de6e3").then(e.bind(null,"862a"))},data(){return{nuevoexpediente:"",aprobarflag:"",id_exp:"",fecha_validez:"",descripcionNota:"",dialog:!1,seleccionQuoteAprobar:!1,opcionesSeleccionadas:[],page:1,nro_propuesta:"",mostrarAdvertencia:!1,textValidacionCotizacionMaster:[],dialogConfig:!1,dialogCostos:!1,textValidacionPago:"",activarBtnContinuar:!0,loading:!1,lstHouse:[],dialogHouse:!1,id_house:"",optionCostos:[{id:"0",text:"No hacer ninguna acción"},{id:"1",text:"Reemplazar los costos, ya existente de proveedores"},{id:"2",text:"Sumar los nuevos costos, a los costos ya existentes de proveedores"}],optionHouse:[{id:"1",text:"Reemplazar los nuevos montos, ya existente del house"},{id:"2",text:"Sumar los nuevos montos, a los costos ya existentes del house"}],id_opcion:"0",id_opcion_house:"0"}},async mounted(){this.$nextTick(async()=>{setTimeout(async()=>{await this.generaInstructivoparaguardataAduana()},4e3)})},methods:{...Object(x["b"])(["imprimirInstructivoQuote","aprobarCotizacionAduana","cargarMaster","setNoteQuote","getInstructivoId","generaInstructivoparaguardataAduana","GuardarConfiguracionEmpresa","ObtenerDatosConfig"]),async guardarConfig(){await this.GuardarConfiguracionEmpresa(),await this.ObtenerDatosConfig(),this.dialogConfig=!1,this.abrirSeleccionDeQuoteAAprobar()},verificarMaster(){this.mostrarAdvertencia=!1,this.textValidacionCotizacionMaster=[];let t=this.$store.state.itemsMasterList.filter(t=>t.id==this.id_exp)[0];this.$store.state.aduana.datosPrincipales.idsentido!=t.id_modality&&(this.mostrarAdvertencia=!0,this.textValidacionCotizacionMaster.push("Modalidad")),this.$store.state.aduana.datosPrincipales.idtipocarga!=t.id_shipment&&(this.mostrarAdvertencia=!0,this.textValidacionCotizacionMaster.push("Tipó de Cargar")),this.$store.state.aduana.datosPrincipales.idincoterms!=t.id_incoterms&&(this.mostrarAdvertencia=!0,this.textValidacionCotizacionMaster.push("Incoterms")),this.$store.state.aduana.datosPrincipales.idorigen!=t.id_port_begin&&(this.mostrarAdvertencia=!0,this.textValidacionCotizacionMaster.push("Puerto de origien")),this.$store.state.aduana.datosPrincipales.iddestino!=t.id_port_end&&(this.mostrarAdvertencia=!0,this.textValidacionCotizacionMaster.push("Puerto de Destino")),console.log(this.textValidacionCotizacionMaster)},async imprimir(){for(let t=0;t<this.$store.state.aduana.opcionCostos.filter(t=>!!t.selected).length;t++)(function(t){this.imprimirInstructivoQuote(this.$store.state.aduana.opcionCostos[t].nro_propuesta)}).call(this,t)},async guardarNota(){if(this.$refs.nota.validate()){this.$store.state.spiner=!0;let t={name:this.descripcionNota,id_quote:this.$route.params.id};await this.setNoteQuote(t),this.$refs.nota.reset(),await this.getInstructivoId({id:this.$route.params.id}),this.dialog=!1,this.$store.state.spiner=!1}},async abrirSeleccionDeQuoteAAprobar(){let t=JSON.parse(sessionStorage.getItem("ConfigEmpresa"));if(this.dialogConfig=!t.existemaster,this.dialogConfig)return!1;await this.cargarMaster(this.$store.state.aduana.datosPrincipales),this.seleccionQuoteAprobar=!0},mostrarBtnAprobar(){return!this.$store.state.aduana.aprobadoflag},async abrirModalAprobar(){if(await this.generaInstructivoparaguardataAduana(),this.$refs.frmAprobar.validate()){let t=this.$store.state.aduana.opcionCostos.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].date_end,a=y()(t).isSameOrAfter(y()(),"day");if(!a)return $.a.fire({icon:"warning",title:"Advertencia",text:"No se puede aprobar ya que la validez ya expiró."}).then(()=>!1);a=y()(t,"YYYY-MM-DD").isSameOrAfter(y()().add(15,"days").startOf("day"));let e=y()(),s=y()(t),i=s.diff(e,"days");if(!a)return $.a.fire({icon:"question",title:"Advertencia",text:`Quedan ${i+1} días de validez. ¿Desea continuar.? `,allowEnterKey:!1,allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonText:"Enviar a Operaciones.",cancelButtonText:"No aprobar."}).then(t=>{if(t.isDismissed)return!1;this.nuevoexpediente=!0,this.id_exp="";let a=this;$.a.fire({icon:"question",iconColor:"red",width:1e3,html:this.$store.state.itemsMasterList.length>0?"<h1>¿Desea crear un nuevo expediente o seleccionar uno registrado?</h1>":"<h1>¿Desea crear un nuevo expediente?</h1>",showConfirmButton:!0,confirmButtonText:"CREAR NUEVO EXPEDIENTE",showDenyButton:this.$store.state.itemsMasterList.length>0,denyButtonText:"SELECCIONAR EXPEDIENTE YA CREADO",showCloseButton:!0,showCancelButton:!1,allowOutsideClick:!1}).then(async t=>{t.isConfirmed&&$.a.fire({icon:"warning",width:1e3,title:"Fecha de Disponibilidad - Master",html:'<input type="date" id="swal-input1" class="swal2-input">\n              <p>Si es Importación seria el ETA </p>\n              <p>SI  es Exportación Colocar el ETD </p>\n              <p style="color:red">Esto te Ayudara a Controlar tus Operaciones  </p>\n\n\n              ',allowOutsideClick:!1,confirmButtonText:"ACEPTAR",showCancelButton:!0,cancelButtonText:"CANCELAR",preConfirm:()=>{const t=document.getElementById("swal-input1").value;if(t){const a=y()(t,"YYYY-MM-DD"),e=y()();if(!a.isSameOrBefore(e))return t;$.a.showValidationMessage("La fecha debe ser mayor que la fecha actual")}else $.a.showValidationMessage("La fecha de validez es requerida")}}).then(async t=>{this.fecha_validez=t.value,console.log("b",this.$store.state.aduana.listIngresosInstructivoAprobar);this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta);let e=this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataIngresos.filter(t=>"TOTAL"===t.descripcion)[0].igv,s=this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataIngresos.filter(t=>"TOTAL"===t.descripcion)[0].valor,i=this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataCostos,o=this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataVentas;t.isConfirmed&&($.a.fire({icon:"info",title:"Aprobando Cotizacion",timerProgressBar:!0,allowOutsideClick:!1,timer:null,didOpen:()=>{$.a.showLoading()}}),await a.aprobarCotizacionAduana({id_quote:a.$route.params.id,nuevoexpediente:!0,id_exp:a.id_exp,fecha_validez:a.fecha_validez,totalIngreso:s,igvIngreso:e,valorIngreso:s,listCostosInstructivo:i,listVentasInstructivo:o,id_house:this.id_house,id_opcion:this.id_opcion}),this.$store.state.spiner=!0,this.$store.state.spiner=!1)}),t.isDenied&&(this.nuevoexpediente=!1,this.aprobarflag=!0)})});{this.nuevoexpediente=!0,this.id_exp="";let t=this;$.a.fire({icon:"question",iconColor:"red",width:1e3,html:this.$store.state.itemsMasterList.length>0?"<h1>¿Desea crear un nuevo expediente o seleccionar uno registrado?</h1>":"<h1>¿Desea crear un nuevo expediente?</h1>",showConfirmButton:!0,confirmButtonText:"CREAR NUEVO EXPEDIENTE",showDenyButton:this.$store.state.itemsMasterList.length>0,denyButtonText:"SELECCIONAR EXPEDIENTE YA CREADO",showCloseButton:!0,showCancelButton:!1,allowOutsideClick:!1}).then(async a=>{a.isConfirmed&&$.a.fire({icon:"warning",width:1e3,title:"Fecha de Disponibilidad - Master",html:'<input type="date" id="swal-input1" class="swal2-input">\n              <p>Si es Importación seria el ETA </p>\n              <p>SI  es Exportación Colocar el ETD </p>\n              <p style="color:red">Esto te Ayudara a Controlar tus Operaciones  </p>\n\n\n              ',allowOutsideClick:!1,confirmButtonText:"ACEPTAR",showCancelButton:!0,cancelButtonText:"CANCELAR",preConfirm:()=>{const t=document.getElementById("swal-input1").value;if(t){const a=y()(t,"YYYY-MM-DD"),e=y()();if(!a.isSameOrBefore(e))return t;$.a.showValidationMessage("La fecha debe ser mayor que la fecha actual")}else $.a.showValidationMessage("La fecha de validez es requerida")}}).then(async a=>{this.fecha_validez=a.value,console.log("a",this.$store.state.aduana.listIngresosInstructivoAprobar);this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta);let e=this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataIngresos.filter(t=>"TOTAL"===t.descripcion)[0].igv,s=this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataIngresos.filter(t=>"TOTAL"===t.descripcion)[0].valor,i=this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataCostos,o=this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataVentas;a.isConfirmed&&($.a.fire({icon:"info",title:"Aprobando Cotizacion",timerProgressBar:!0,allowOutsideClick:!1,timer:null,didOpen:()=>{$.a.showLoading()}}),await t.aprobarCotizacionAduana({id_quote:t.$route.params.id,nuevoexpediente:!0,id_exp:t.id_exp,fecha_validez:t.fecha_validez,totalIngreso:s,igvIngreso:e,valorIngreso:s,listCostosInstructivo:i,listVentasInstructivo:o}),this.$store.state.spiner=!0,this.$store.state.spiner=!1)}),a.isDenied&&(this.nuevoexpediente=!1,this.aprobarflag=!0)})}}},async validarExistePagosMaster(){if(this.loading=!0,this.activarBtnContinuar=!0,this.textValidacionPago="","1"==this.id_opcion){var t={method:"get",url:"https://api.agentedecargaonline.com/validar_existe_pago_master",headers:{"Content-Type":"application/json","auth-token":sessionStorage.getItem("auth-token")},params:{id:this.id_exp}};let a=await S()(t).then(t=>t.data);return this.activarBtnContinuar=a.estadoflag,this.textValidacionPago=a.mensaje,void(this.loading=!1)}this.activarBtnContinuar=!1,this.loading=!1},async validarExistePagosHouse(){this.activarBtnContinuar=!0,this.textValidacionPago="",this.loading=!0;var t={method:"get",url:"https://api.agentedecargaonline.com/validar_existe_pago_house",headers:{"Content-Type":"application/json","auth-token":sessionStorage.getItem("auth-token")},params:{id:this.id_house}};let a=await S()(t).then(t=>t.data);this.activarBtnContinuar=a.estadoflag,this.textValidacionPago=a.mensaje,this.loading=!1},async buscarHouseAsociadosAMaster(){this.lstHouse=[];var t={method:"get",url:"https://api.agentedecargaonline.com/cargar_house_asociado_master",headers:{"Content-Type":"application/json","auth-token":sessionStorage.getItem("auth-token")},params:{id_master:this.id_exp}};this.loading=!0;let a=await S()(t).then(t=>t.data);this.loading=!1,a.estadoflag&&(this.lstHouse=a.data),this.lstHouse.unshift({id:0,code_house:"CREAR UN NUEVO HOUSE"}),this.activarBtnContinuar=!0,this.textValidacionPago="",this.aprobarflag=!1,this.dialogHouse=!0},continuarAprobar(){this.id_opcion="",this.aprobarflag=!1,this.dialogCostos=!0},async aprobar(){await this.generaInstructivoparaguardataAduana();this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta);let t=this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataIngresos.filter(t=>"TOTAL"===t.descripcion)[0].igv,a=this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataIngresos.filter(t=>"TOTAL"===t.descripcion)[0].valor,e=this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataCostos,s=this.$store.state.aduana.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataVentas;this.$refs.frmAprobar.validate()&&($.a.fire({icon:"info",title:"Aprobando Cotizacion",timerProgressBar:!0,allowOutsideClick:!1,timer:null,didOpen:()=>{$.a.showLoading()}}),await this.aprobarCotizacionAduana({id_quote:this.$route.params.id,nuevoexpediente:!1,id_exp:this.id_exp,fecha_validez:this.fecha_validez,totalIngreso:a,igvIngreso:t,valorIngreso:a,listCostosInstructivo:e,listVentasInstructivo:s,id_house:this.id_house,id_opcion:this.id_opcion,id_opcion_house:this.id_opcion_house}),this.$store.state.spiner=!0,this.aprobarflag=!1,this.$store.state.spiner=!1)},noDataText(){return"No se encontraron Masters con la misma Modalidad, Tipo de Carga, Incoterms y/o Puerto Origen/ Destino asociados a la cotización."},getProveedor(t){let a=t.listCostos.some(t=>4==t.code_cost&&1==t.esopcionflag)?t.listCostos.filter(t=>4==t.code_cost&&1==t.esopcionflag)[0].id_proveedor:"",e=a?this.$store.state.provedores.filter(t=>t.id==a)[0].namelong:"";return e}}},N=w,k=(e("2221"),e("2877")),D=Object(k["a"])(N,b,I,!1,null,"26da1260",null);a["default"]=D.exports},"891e":function(t,a,e){"use strict";e("17b3");var s=e("9d26"),i=e("dc22"),o=e("a9ad"),r=e("de2c"),n=e("7560"),l=e("58df");a["a"]=Object(l["a"])(o["a"],Object(r["a"])({onVisible:["init"]}),n["a"]).extend({name:"v-pagination",directives:{Resize:i["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:t=>t%1===0},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data(){return{maxButtons:0,selected:null}},computed:{classes(){return{"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled,...this.themeClasses}},items(){const t=parseInt(this.totalVisible,10);if(0===t||isNaN(this.length)||this.length>Number.MAX_SAFE_INTEGER)return[];const a=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=a)return this.range(1,this.length);const e=a%2===0?1:0,s=Math.floor(a/2),i=this.length-s+1+e;if(this.value>s&&this.value<i){const t=1,a=this.length,i=this.value-s+2,o=this.value+s-2-e,r=i-1===t+1?2:"...",n=o+1===a-1?o+1:"...";return[1,r,...this.range(i,o),n,this.length]}if(this.value===s){const t=this.value+s-1-e;return[...this.range(1,t),"...",this.length]}if(this.value===i){const t=this.value-s+1;return[1,"...",...this.range(t,this.length)]}return[...this.range(1,s),"...",...this.range(i,this.length)]}},watch:{value(){this.init()}},beforeMount(){this.init()},methods:{init(){this.selected=null,this.onResize(),this.$nextTick(this.onResize),setTimeout(()=>this.selected=this.value,100)},onResize(){const t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range(t,a){const e=[];t=t>0?t:1;for(let s=t;s<=a;s++)e.push(s);return e},genIcon(t,a,e,i,o){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":e},attrs:{disabled:e,type:"button","aria-label":o},on:e?{}:{click:i}},[t(s["a"],[a])])])},genItem(t,a){const e=a===this.value&&(this.color||"primary"),s=a===this.value,i=s?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(e,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":a===this.value},attrs:{type:"button","aria-current":s,"aria-label":this.$vuetify.lang.t(i,a)},on:{click:()=>this.$emit("input",a)}}),[a.toString()])},genItems(t){return this.items.map((a,e)=>t("li",{key:e},[isNaN(Number(a))?t("span",{class:"v-pagination__more"},[a.toString()]):this.genItem(t,a)]))},genList(t,a){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},a)}},render(t){const a=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,a)])}})},d3db:function(t,a,e){}}]);