(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-87c19530"],{"2f8c":function(t,e,i){},"40a8":function(t,e,i){"use strict";i("2f8c")},"42b1":function(t,e,i){"use strict";i.r(e);var o=i("c6a6"),a=i("8336"),s=i("b0af"),r=i("99d9"),l=i("62ad"),n=i("a523"),c=i("132d"),d=i("f774"),p=i("0fd9"),f=i("1f4f"),u=i("2fa4"),h=i("8654"),_=i("3a2f"),m=function(){var t=this,e=t._self._c;return e(n["a"],{attrs:{fluid:""}},[e(d["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"20%"},model:{value:t.filtroFlag,callback:function(e){t.filtroFlag=e},expression:"filtroFlag"}},[e(s["a"],{attrs:{"min-height":"80vh"}},[e(r["d"],{attrs:{"primary-title":""}},[t._v(" Filtrar Flujo "),e(u["a"]),e(a["a"],{attrs:{icon:"",color:"default"},on:{click:function(e){t.filtroFlag=!t.filtroFlag}}},[e(c["a"],[t._v("mdi-close")])],1)],1),e(r["c"],[e(o["a"],{attrs:{items:t.$store.state.provedores,"item-text":"namelong","item-value":"id",clearable:"",label:"Proveedor"},model:{value:t.filtro.id_proveedor,callback:function(e){t.$set(t.filtro,"id_proveedor",e)},expression:"filtro.id_proveedor"}}),e(o["a"],{attrs:{items:t.$store.state.clientes,"item-text":"namelong","item-value":"id",clearable:"",label:"Cliente"},model:{value:t.filtro.id_cliente,callback:function(e){t.$set(t.filtro,"id_cliente",e)},expression:"filtro.id_cliente"}}),e(h["a"],{attrs:{label:"Nro. Expediente",id:"id",clearable:""},model:{value:t.filtro.nro_expediente,callback:function(e){t.$set(t.filtro,"nro_expediente",e)},expression:"filtro.nro_expediente"}})],1),e(r["a"],[e(u["a"]),e(a["a"],{attrs:{color:"success"},on:{click:function(e){return t.Filtrar()}}},[t._v("Filtrar")]),e(a["a"],{attrs:{color:"warning"},on:{click:function(e){return t.Formatear()}}},[t._v("Limpiar")]),e(a["a"],{attrs:{color:"error"},on:{click:function(e){t.filtroFlag=!t.filtroFlag}}},[t._v("Cerrar")])],1)],1)],1),e(p["a"],[e(l["a"],{attrs:{cols:"1"}},[e("b",[t._v("Desde:")])]),e(l["a"],{attrs:{cols:"1"}},[t._v(" "+t._s(t.getFechaNombreMes({fecha:t.$store.state.balances.lstFlujoOperacionesMes[0].fecha_inicio}))+" ")]),e(l["a"],{attrs:{cols:"1"}},[e("b",[t._v("Hasta:")])]),e(l["a"],{attrs:{cols:"1"}},[t._v(" "+t._s(t.getFechaNombreMes({fecha:t.$store.state.balances.lstFlujoOperacionesMes[0].fecha_fin}))+" ")]),e(l["a"],{attrs:{offset:"5"}},[e(a["a"],{staticClass:"mx-1",attrs:{color:"info"},on:{click:function(e){t.filtroFlag=!t.filtroFlag}}},[t._v("Filtrar")])],1)],1),e(p["a"],[e(l["a"],{attrs:{cols:"12"}},[e(f["a"],[e("thead",[e("tr",{staticClass:"thead"},[e("th",{style:t.getColumnWidth(7)},[t._v("CATEGORÍA")]),e("th",{style:t.getColumnWidth(10)},[t._v("TIPO")]),e("th",{style:t.getColumnWidth(7)},[t._v("DESCRIPCIÓN")]),e("th",{style:t.getColumnWidth(7)},[t._v("CLIENTE/ PROVEEDOR")]),e("th",{attrs:{width:"2%"}},[e(a["a"],{attrs:{color:"default",icon:""},on:{click:function(e){return t.previous()}}},[e(c["a"],{attrs:{"x-large":""}},[t._v("mdi-chevron-left")])],1)],1),t._l(t.fechas,(function(i,o){return e("th",{key:o,style:t.getColumnWidth(5)},[t._v(" "+t._s(i)+" ")])})),e("th",[t._v("TOTALES")]),e("th",{attrs:{width:"2%"}},[e(a["a"],{attrs:{icon:"",color:"default"},on:{click:function(e){return t.next()}}},[e(c["a"],{attrs:{"x-large":""}},[t._v("mdi-chevron-right")])],1)],1)],2)]),e("tbody",[t._l(t.items,(function(i,o){return[e("tr",{key:"row-"+o,staticClass:"tipo",on:{dblclick:function(t){i.subtipoflag=!i.subtipoflag}}},[e("td",{attrs:{colspan:5}},[e(a["a"],{attrs:{icon:"",color:"default"},on:{click:function(t){i.subtipoflag=!i.subtipoflag}}},[i.subtipoflag?e(c["a"],[t._v("mdi-minus-thick")]):e(c["a"],[t._v("mdi-plus")])],1),t._v(" "+t._s(i.tipo)+" ")],1),t._l(t.$store.state.balances.lstFlujoOperacionesMes[0].cantidad_semanas,(function(o){return e("td",{key:o},[e("center",[t._v(" "+t._s(t.calcularTotalTipo({tipo:i.tipo,semana:o}))+" ")])],1)})),e("td",[t._v(t._s(parseFloat(i.totalTipo).toFixed(2)))]),e("td")],2),t._l(i.subtipo,(function(s,r){return[i.subtipoflag?e("tr",{key:"subdetail-"+o+"-"+r,staticClass:"subtipo",on:{dblclick:function(t){s.descripcionflag=!s.descripcionflag}}},[e("td",{attrs:{colspan:1}}),e("td",{attrs:{colspan:4}},[e(a["a"],{attrs:{icon:"",color:"default"},on:{click:function(t){s.descripcionflag=!s.descripcionflag}}},[s.descripcionflag?e(c["a"],[t._v("mdi-minus-thick")]):e(c["a"],[t._v("mdi-plus")])],1),e(_["a"],{attrs:{right:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:o}){return[e("span",t._g(t._b({},"span",o,!1),i),[t._v(" "+t._s(s.subtipo)+" ")])]}}],null,!0)},[e("span",[e("div",{domProps:{innerHTML:t._s(s.informacion)}})])])],1),t._l(t.$store.state.balances.lstFlujoOperacionesMes[0].cantidad_semanas,(function(o){return e("td",{key:o},[e("center",[t._v(" "+t._s(t.calcularTotalSubTipo({tipo:i.tipo,subtipo:s.subtipo,semana:o}))+" ")])],1)})),e("td",[t._v(t._s(parseFloat(s.totalSubTipo).toFixed(2)))]),e("td")],2):t._e(),t._l(s.descripcion,(function(l,n){return[s.descripcionflag&&i.subtipoflag?e("tr",{key:"subdetail-"+o+"-"+r+"-"+n,staticClass:"descripcion"},[e("td",{attrs:{colspan:"2"}}),e("td",{attrs:{colspan:"2"}},[e(a["a"],{attrs:{icon:"",color:"default"},on:{click:function(t){l.costoflag=!l.costoflag}}},[l.costoflag?e(c["a"],[t._v("mdi-minus-thick")]):e(c["a"],[t._v("mdi-plus")])],1),t._v(" "+t._s(l.descripcion)+" ")],1),e("td"),t._l(t.$store.state.balances.lstFlujoOperacionesMes[0].cantidad_semanas,(function(o){return e("td",{key:o},[e("center",[t._v(" "+t._s(t.calcularTotalDescripcion({tipo:i.tipo,subtipo:s.subtipo,descripcion:l.descripcion,semana:o}))+" ")])],1)})),e("td",[t._v(t._s(parseFloat(l.totalDescripcion).toFixed(2)))]),e("td")],2):t._e(),t._l(l.costo,(function(a,n){return[s.descripcionflag&&l.costoflag&&i.subtipoflag?e("tr",{key:"subdetail-"+o+"-"+r+"-"+n,staticClass:"details"},[e("td",{attrs:{colspan:"3"}}),e("td",[t._v(t._s(a.persona))]),e("td"),t._l(t.$store.state.balances.lstFlujoOperacionesMes[0].cantidad_semanas,(function(i){return e("td",{key:i},[e("center",[t._v(" "+t._s(a.semana==i?parseFloat(a.costo).toFixed(2):"0")+" ")])],1)})),e("td",[t._v(t._s(parseFloat(a.costo).toFixed(2)))]),e("td")],2):t._e()]}))]}))]}))]})),e("tr",{staticClass:"totales"},[e("td",{attrs:{colspan:"5"}},[t._v("SALDOS")]),t._l(t.$store.state.balances.lstFlujoOperacionesMes[0].cantidad_semanas,(function(i){return e("td",{key:i},[e("center",[t._v(t._s(t.calcularTotales({semana:i})))])],1)})),e("td",[t._v(" "+t._s(t.calcularTotal())+" ")]),e("td")],2)],2)])],1)],1)],1)},b=[],g=(i("14d9"),i("13d5"),i("e9f5"),i("910d"),i("7d54"),i("ab43"),i("9485"),i("2f62")),v=i("c1df"),F=i.n(v),x={data:()=>({cantidadmes:0,items:[],fechas:[],flujo:[],filtroFlag:!1,items:[],filtro:{id_proveedor:"",id_cliente:"",nro_expediente:""}}),methods:{...Object(g["b"])(["getListFlujoOperacionMes","cargarClientes","cargarProveedores"]),formatearData(){let t=this;t.flujo=this.$store.state.balances.lstFlujoOperacionesMes[0].flujo,t.fechas=t.$store.state.balances.lstFlujoOperacionesMes[0].fechahasta;let e=this.flujo.map(t=>t.tipo);e=e.filter((t,i)=>e.indexOf(t)===i);let i=this.flujo.map(t=>({tipo:t.tipo,subtipo:t.subtipo,informacion:t.informacion})).filter((t,e,i)=>e===i.findIndex(e=>e.tipo===t.tipo&&e.subtipo===t.subtipo)),o=this.flujo.map(t=>({tipo:t.tipo,subtipo:t.subtipo,informacion:t.informacion,descripcion:t.descripcion})).filter((t,e,i)=>e===i.findIndex(e=>e.tipo===t.tipo&&e.subtipo===t.subtipo&&e.descripcion===t.descripcion)),a=[];e.forEach(t=>{let e=[],s=0;i.filter(e=>e.tipo==t).forEach(i=>{let a=0,r=[];o.filter(e=>e.subtipo==i.subtipo&&e.tipo==t).forEach(e=>{let o=0,l=[];this.flujo.filter(o=>o.subtipo==i.subtipo&&o.tipo==t&&e.descripcion==o.descripcion).forEach(t=>{s+=parseFloat(t.monto),a+=parseFloat(t.monto),o+=parseFloat(t.monto),l.push({descripcion:t.descripcion,persona:t.persona,costo:t.monto,semana:t.semana})}),r.push({subtipo:i.subtipo,costo:l,descripcion:e.descripcion,costoflag:!1,totalDescripcion:o})}),e.push({subtipo:i.subtipo,descripcion:r,descripcionflag:!1,totalSubTipo:a,informacion:i.informacion})}),a.push({tipo:t,subtipo:e,subtipoflag:!1,totalTipo:s})}),this.items=a},async previous(){this.$store.state.spiner=!0,this.items=[],this.cantidadmes--;let t={cantidadmes:this.cantidadmes,id_proveedor:this.filtro.id_proveedor,id_cliente:this.filtro.id_cliente,nro_expediente:this.filtro.nro_expediente};await this.getListFlujoOperacionMes(t),this.formatearData(),this.$store.state.spiner=!1},async next(){this.$store.state.spiner=!0,this.items=[],this.cantidadmes++;let t={cantidadmes:this.cantidadmes,id_proveedor:this.filtro.id_proveedor,id_cliente:this.filtro.id_cliente,nro_expediente:this.filtro.nro_expediente};await this.getListFlujoOperacionMes(t),this.formatearData(),this.$store.state.spiner=!1},async Filtrar(){this.$store.state.spiner=!0,this.items=[];let t={cantidadmes:this.cantidadmes,id_proveedor:this.filtro.id_proveedor,id_cliente:this.filtro.id_cliente,nro_expediente:this.filtro.nro_expediente};await this.getListFlujoOperacionMes(t),this.formatearData(),this.$store.state.spiner=!1,this.filtroFlag=!this.filtroFlag},async Formatear(){this.$store.state.spiner=!0,this.items=[],this.cantidadmes=0,this.filtro.id_proveedor="",this.filtro.id_cliente="",this.filtro.nro_expediente="";let t={cantidadmes:this.cantidadmes,id_proveedor:this.filtro.id_proveedor,id_cliente:this.filtro.id_cliente,nro_expediente:this.filtro.nro_expediente};await this.getListFlujoOperacionMes(t),this.formatearData(),this.filtroFlag=!this.filtroFlag,this.$store.state.spiner=!1},calcularTotalDescripcion({tipo:t="",subtipo:e="",semana:i=0,descripcion:o=""}){let a=this.flujo.filter(a=>a.semana==i&&a.tipo==t&&a.subtipo==e&&a.descripcion==o).reduce((t,e)=>t+parseFloat(e.monto),0);return parseFloat(a).toFixed(2)},calcularTotalSubTipo({tipo:t="",subtipo:e="",semana:i=0}){let o=this.flujo.filter(o=>o.semana==i&&o.tipo==t&&o.subtipo==e).reduce((t,e)=>t+parseFloat(e.monto),0);return parseFloat(o).toFixed(2)},calcularTotalTipo({tipo:t="",semana:e=0}){let i=this.flujo.filter(i=>i.semana==e&&i.tipo==t).reduce((t,e)=>t+parseFloat(e.monto),0);return parseFloat(i).toFixed(2)},getColumnWidth(t){const e=5,i=this.fechas.length*e+35;return`width: ${t/i*100}%;`},calcularTotales({semana:t=0}){let e=0;return this.flujo.filter(e=>e.semana==t).forEach(t=>{t.ingresoflag&&(e+=parseFloat(t.monto)),t.gastoflag&&(e-=parseFloat(t.monto)),t.proyeccionflag&&(e-=parseFloat(t.monto))}),parseFloat(e).toFixed(2)},calcularTotal(){let t=0;return this.flujo.forEach(e=>{e.ingresoflag&&(t+=parseFloat(e.monto)),e.gastoflag&&(t-=parseFloat(e.monto)),e.proyeccionflag&&(t-=parseFloat(e.monto))}),parseFloat(t).toFixed(2)},getFechaNombreMes({fecha:t=""}){F.a.locale("es");let e=F()(t).format("LL");return e}},async mounted(){this.$store.state.spiner=!0,await this.cargarClientes(),await this.cargarProveedores();let t={cantidadmes:this.cantidadmes,id_proveedor:this.filtro.id_proveedor,id_cliente:this.filtro.id_cliente,nro_expediente:this.filtro.nro_expediente};await this.getListFlujoOperacionMes(t),this.formatearData(),this.$store.state.spiner=!1}},k=x,j=(i("40a8"),i("2877")),y=Object(j["a"])(k,m,b,!1,null,"65727c8c",null);e["default"]=y.exports}}]);