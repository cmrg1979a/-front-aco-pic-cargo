(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e18d85b4"],{"614e":function(t,e,a){},de75:function(t,e,a){"use strict";a.r(e);var i=a("c6a6"),s=a("8336"),r=a("b0af"),o=a("99d9"),n=a("ac7c"),l=a("62ad"),c=a("a523"),d=a("8fea"),u=a("169a"),m=a("ce7e"),f=a("4bd4"),h=a("132d"),p=a("f774"),v=a("0fd9"),_=a("1f4f"),b=a("2fa4"),x=a("8654"),g=a("a844"),C=function(){var t=this,e=t._self._c;return e(r["a"],[e(c["a"],{attrs:{fluid:""}},[e(v["a"],[e(l["a"],{attrs:{cols:"12"}},[e(o["d"],{attrs:{"primary-title":""}},[e(x["a"],{attrs:{label:"Buscar..."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),e(b["a"]),e(s["a"],{staticClass:"mx-2",attrs:{color:"success",small:""},on:{click:function(e){return t.nuevoStatus()}}},[t._v(" CREAR ESTATUS "),e(h["a"],{staticClass:"ml-1",attrs:{dense:""}},[t._v("mdi-plus")])],1),e(s["a"],{staticClass:"mx-2",attrs:{color:"purple",dark:"",small:""},on:{click:function(e){return t.abrirModalOrden()}}},[t._v(" Cambiar Orden "),e(h["a"],{staticClass:"ml-1",attrs:{dense:""}},[t._v("mdi-swap-vertical")])],1),e(s["a"],{staticClass:"mx-2",attrs:{color:"info",small:""},on:{click:function(e){t.filtrar=!t.filtrar}}},[t._v(" Filtrar "),e(h["a"],{staticClass:"ml-1",attrs:{dense:""}},[t._v("mdi-filter-outline")])],1),e(s["a"],{staticClass:"mx-2",attrs:{color:"default",small:""},on:{click:function(e){return t.getListStatusHouse()}}},[t._v(" Limpiar "),e(h["a"],{staticClass:"ml-1",attrs:{dense:""}},[t._v("mdi-clean")])],1)],1)],1),e(l["a"],{attrs:{cols:"12"}},[e(d["a"],{attrs:{headers:t.headers,items:t.listStatusHouse,"item-key":"id",loading:"true",search:t.search},scopedSlots:t._u([{key:"item.exw",fn:function({item:e}){return[t._v(" "+t._s(e.exwflag?"Si":"No")+" ")]}},{key:"item.fca",fn:function({item:e}){return[t._v(" "+t._s(e.fcaflag?"Si":"No")+" ")]}},{key:"item.cfr",fn:function({item:e}){return[t._v(" "+t._s(e.cfrflag?"Si":"No")+" ")]}},{key:"item.cif",fn:function({item:e}){return[t._v(" "+t._s(e.cifflag?"Si":"No")+" ")]}},{key:"item.fob",fn:function({item:e}){return[t._v(" "+t._s(e.fobflag?"Si":"No")+" ")]}},{key:"item.ddp",fn:function({item:e}){return[t._v(" "+t._s(e.ddpflag?"Si":"No")+" ")]}},{key:"item.comentarios",fn:function({item:a}){return[a.comentarios.length>0?e("div",{},[a.verComentarios?e(s["a"],{attrs:{color:"warning","x-small":""},on:{click:function(t){a.verComentarios=!a.verComentarios}}},[t._v(" Ocultar Comentarios ")]):e(s["a"],{attrs:{color:"success","x-small":""},on:{click:function(t){a.verComentarios=!a.verComentarios}}},[t._v(" Ver Comentarios ")]),a.verComentarios?e("ol",{attrs:{type:"I"}},t._l(a.comentarios,(function(a,i){return e("li",{key:i,staticClass:"justify"},[t._v(" "+t._s(a.descripcion)+" ")])})),0):t._e()],1):t._e()]}},{key:"item.action",fn:function({item:a}){return[e(s["a"],{attrs:{"x-small":"",color:"warning"},on:{click:function(e){return t.editar(a)}}},[t._v(" AÑADIR COMENTARIOS ")]),e(s["a"],{staticClass:"mx-1",attrs:{"x-small":"",color:"error"},on:{click:function(e){return t.eliminar(a)}}},[e(h["a"],{attrs:{size:"medium"}},[t._v("mdi-delete")])],1)]}}],null,!0)})],1)],1)],1),e(u["a"],{attrs:{scrollable:"",persistent:"","max-width":"70%",transition:"dialog-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(r["a"],[t.id?e(o["d"],{attrs:{"primary-title":""}},[t._v(" Editar Status ")]):e(o["d"],{attrs:{"primary-title":""}},[t._v(" Agregar Status ")]),e(o["c"],[e(f["a"],{ref:"frmStatus"},[e(v["a"],[e(l["a"],{attrs:{cols:"6"}},[e(i["a"],{attrs:{items:t.$store.state.pricing.listModality,label:"Sentido*","item-text":"name","item-value":"id",rules:[t=>!!t||"Dato Requerido"]},on:{change:function(e){return t.obtenerOrden()}},model:{value:t.id_modality,callback:function(e){t.id_modality=e},expression:"id_modality"}})],1),e(l["a"],{attrs:{cols:"6"}},[e(i["a"],{attrs:{items:t.$store.state.pricing.listShipment,label:"Tipo de Embarque*","item-text":"embarque","item-value":"id",rules:[t=>!!t||"Dato Requerido"]},on:{change:t.obtenerOrden},model:{value:t.id_shipment,callback:function(e){t.id_shipment=e},expression:"id_shipment"}})],1),e(l["a"],{attrs:{cols:"6"}},[e(x["a"],{attrs:{label:"Estatus",rules:[t=>!!t||"Dato Requerido"]},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e(l["a"],{attrs:{cols:"6"}},[t.nroorden?e(x["a"],{attrs:{label:"Orden",type:"number",rules:[t=>!!t||"Dato Requerido",t=>t>0||"No puede ser 0 o menor"],min:"1"},model:{value:t.nroorden,callback:function(e){t.nroorden=e},expression:"nroorden"}}):t._e()],1)],1),e(v["a"],[e(l["a"],{attrs:{cols:"12"}},[e("h4",[t._v("Incoterms")])]),t.errorInconterms?e(l["a"],{attrs:{cols:"12"}},[e("span",{staticClass:"red--text"},[t._v(" "+t._s(t.errorInconterms)+" ")])]):t._e()],1),e(v["a"],[e(n["a"],{staticClass:"mx-2",attrs:{row:"",label:"EXW",value:!0},model:{value:t.exw,callback:function(e){t.exw=e},expression:"exw"}}),e(n["a"],{staticClass:"mx-2",attrs:{row:"",label:"FOB",value:!0},model:{value:t.fob,callback:function(e){t.fob=e},expression:"fob"}}),e(n["a"],{staticClass:"mx-2",attrs:{row:"",label:"FCA",value:!0},model:{value:t.fca,callback:function(e){t.fca=e},expression:"fca"}}),e(n["a"],{staticClass:"mx-2",attrs:{row:"",label:"CFR",value:!0},model:{value:t.cfr,callback:function(e){t.cfr=e},expression:"cfr"}}),e(n["a"],{staticClass:"mx-2",attrs:{row:"",label:"CIF",value:!0},model:{value:t.cif,callback:function(e){t.cif=e},expression:"cif"}}),e(n["a"],{staticClass:"mx-2",attrs:{row:"",label:"DDP",value:!0},model:{value:t.ddp,callback:function(e){t.ddp=e},expression:"ddp"}})],1),e(v["a"],[e(l["a"],{attrs:{cols:"12"}},[e(s["a"],{attrs:{color:"success",small:""},on:{click:function(e){return t.anadirComentario()}}},[t._v(" Añadir Comentario ")])],1),e(l["a"],{attrs:{cols:"12"}},[e(_["a"],[e("thead",[e("tr",[e("th",[t._v("Orden")]),e("th",[t._v("Comentario")]),e("th",[t._v("Mover")])])]),e("tbody",t._l(t.items,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(i+1))]),e("td",[e(g["a"],{attrs:{"auto-grow":"",dense:"","hide-details":"",solo:"",rows:"1"},model:{value:a.descripcion,callback:function(e){t.$set(a,"descripcion",e)},expression:"item.descripcion"}})],1),e("td",[e(s["a"],{attrs:{color:"error",icon:"",disabled:0===i},on:{click:function(e){return t.moveUp(i)}}},[e(h["a"],[t._v("mdi-arrow-up-drop-circle-outline")])],1),e(s["a"],{attrs:{color:"success",icon:"",disabled:i===t.items.length-1},on:{click:function(e){return t.moveDown(i)}}},[e(h["a"],[t._v("mdi-arrow-down-drop-circle-outline")])],1),e(s["a"],{attrs:{icon:"",color:"error"},on:{click:function(e){return t.eliminarComentario(a)}}},[e(h["a"],[t._v("mdi-delete")])],1)],1)])})),0)])],1)],1)],1)],1),t.id?e(o["a"],[e(b["a"]),e(s["a"],{staticClass:"mx-1",attrs:{small:"",color:"success"},on:{click:function(e){return t.guardarStatus()}}},[t._v(" Actualizar ")]),e(s["a"],{staticClass:"mx-1",attrs:{small:"",color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancelar ")])],1):e(o["a"],[e(b["a"]),e(s["a"],{staticClass:"mx-1",attrs:{small:"",color:"success"},on:{click:function(e){return t.guardarStatus()}}},[t._v(" Guardar ")]),e(s["a"],{staticClass:"mx-1",attrs:{small:"",color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancelar ")])],1)],1)],1),e(u["a"],{attrs:{scrollable:"",persistent:"",width:"80%"},model:{value:t.dialogOrden,callback:function(e){t.dialogOrden=e},expression:"dialogOrden"}},[e(r["a"],[e(o["d"],{attrs:{"primary-title":""}},[t._v(" Ordenar Estatus: ")]),e(o["c"],[e(f["a"],{ref:"frmOrdenEstatus"},[e(v["a"],[e(l["a"],{attrs:{cols:"4"}},[e(i["a"],{attrs:{items:t.$store.state.pricing.listModality,label:"Sentido*","item-text":"name","item-value":"id",rules:[t=>!!t||"Dato Requerido"]},model:{value:t.id_modality,callback:function(e){t.id_modality=e},expression:"id_modality"}})],1),e(l["a"],{attrs:{cols:"4"}},[e(i["a"],{attrs:{items:t.$store.state.pricing.listShipment,label:"Tipo de Embarque*","item-text":"embarque","item-value":"id",rules:[t=>!!t||"Dato Requerido"]},model:{value:t.id_shipment,callback:function(e){t.id_shipment=e},expression:"id_shipment"}})],1),e(l["a"],{attrs:{cols:"4"}},[e(s["a"],{attrs:{small:"",color:"info"},on:{click:function(e){return t.buscarEstatusPorModalidadYEmbarque()}}},[t._v("Buscar")])],1)],1)],1),e(v["a"],[e(l["a"],{attrs:{cols:"12"}},[e(d["a"],{staticClass:"elevation-1",attrs:{headers:t.headerEstado,items:t.lstStatus,"item-key":"index",loading:t.loadingTable},scopedSlots:t._u([{key:"item.exw",fn:function({item:e}){return[t._v(" "+t._s(e.exwflag?"Si":"No")+" ")]}},{key:"item.fob",fn:function({item:e}){return[t._v(" "+t._s(e.fobflag?"Si":"No")+" ")]}},{key:"item.fca",fn:function({item:e}){return[t._v(" "+t._s(e.fcaflag?"Si":"No")+" ")]}},{key:"item.cfr",fn:function({item:e}){return[t._v(" "+t._s(e.cfrflag?"Si":"No")+" ")]}},{key:"item.cif",fn:function({item:e}){return[t._v(" "+t._s(e.cifflag?"Si":"No")+" ")]}},{key:"item.ddp",fn:function({item:e}){return[t._v(" "+t._s(e.ddpflag?"Si":"No")+" ")]}},{key:"item.orden",fn:function({item:a,index:i}){return[e(x["a"],{attrs:{dense:"","hide-details":"",type:"number",min:0},on:{input:function(e){return t.cambiarOrdenEstado(i)}},model:{value:a.orden,callback:function(e){t.$set(a,"orden",e)},expression:"item.orden"}})]}}],null,!0)})],1)],1)],1),e(o["a"],[e(b["a"]),e(s["a"],{staticClass:"mx-1",attrs:{color:"success",small:""},on:{click:function(e){return t.guardarOrden()}}},[t._v(" Guardar ")]),e(s["a"],{staticClass:"mx-1",attrs:{color:"error",small:""},on:{click:function(e){t.dialogOrden=!1}}},[t._v(" Cerrar ")])],1)],1)],1),e(p["a"],{staticClass:"px-5 py-5",attrs:{right:"",absolute:"",bottom:"",persistent:"",width:"30%",temporary:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[t._v(" FILTRAR ")]},proxy:!0}]),model:{value:t.filtrar,callback:function(e){t.filtrar=e},expression:"filtrar"}},[e(m["a"]),e(i["a"],{attrs:{items:t.$store.state.pricing.listModality,label:"Sentido*","item-text":"name","item-value":"id",rules:[t=>!!t||"Dato Requerido"]},model:{value:t.id_modality,callback:function(e){t.id_modality=e},expression:"id_modality"}}),e(i["a"],{attrs:{items:t.$store.state.pricing.listShipment,label:"Tipo de Embarque*","item-text":"embarque","item-value":"id",rules:[t=>!!t||"Dato Requerido"]},model:{value:t.id_shipment,callback:function(e){t.id_shipment=e},expression:"id_shipment"}}),e(m["a"],{staticClass:"mb-5"}),e(s["a"],{staticClass:"mx-1",attrs:{color:"success",small:""},on:{click:function(e){return t.filtrarListado()}}},[t._v("Filtrar")]),e(s["a"],{staticClass:"mx-1",attrs:{color:"error",small:""}},[t._v("Cancelar")])],1)],1)},k=[],S=(a("14d9"),a("e9f5"),a("910d"),a("ab43"),a("2f62")),y=a("3d20"),w=a.n(y),O={data(){return{filtrar:!1,loadingTable:!1,lstStatus:[],dialogOrden:!1,dialog:!1,search:"",name:"",id:"",exw:!1,fob:!1,fca:!1,cfr:!1,cif:!1,ddp:!1,headerComentario:[{text:"Orden",value:"index"},{text:"Nombre",value:"name"},{text:"Mover",value:""}],headerEstado:[{text:"Nombre",value:"name",sortable:!1},{value:"exw",text:"EXW",sortable:!1},{value:"fob",text:"fob",sortable:!1},{value:"fca",text:"FCA",sortable:!1},{value:"cfr",text:"CFR",sortable:!1},{value:"cif",text:"CIF",sortable:!1},{value:"ddp",text:"DDP",sortable:!1},{text:"Orden",value:"orden",sortable:!1}],headers:[{value:"modalidad",text:"Modalidad",sort:!1},{value:"shipment",text:"Tipo de Embarque",sort:!1},{value:"name",text:"Status",sort:!1},{value:"comentarios",text:"Comentarios",sort:!1},{value:"exw",text:"EXW",sort:!1},{value:"fob",text:"FOB",sortable:!1},{value:"fca",text:"FCA",sort:!1},{value:"cfr",text:"CFR",sort:!1},{value:"cif",text:"CIF",sort:!1},{value:"ddp",text:"DDP",sort:!1},{value:"orden",text:"Orden",sort:!1},{value:"action",text:"",sort:!1}],items:[],id_modality:"",id_shipment:"",nroorden:"",errorInconterms:""}},methods:{...Object(S["b"])("statushouse",["getListStatusHouse","getObtenerOrdenStatusHouse","GuardarStatusHouse","GuardarStatus","EliminarStatus","EliminarComentario"]),...Object(S["b"])(["getModality","getShipment"]),eliminarComentario(t){console.log(t),w.a.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminarlo!"}).then(async e=>{e.isConfirmed&&(this.$store.state.spiner=!0,await this.EliminarComentario(t),this.$store.state.spiner=!1,this.dialog=!1)})},eliminar(t){w.a.fire({title:"¿Estás seguro?",text:"¡No podrás revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminarlo!"}).then(async e=>{e.isConfirmed&&(this.$store.state.spiner=!0,await this.EliminarStatus(t),this.$store.state.spiner=!1)})},nuevoStatus(){this.dialog=!0,this.id="",this.items=[],this.$nextTick(()=>{this.$refs.frmStatus.reset()})},async filtrarListado(){let t={id_modalidad:this.id_modality,id_shipment:this.id_shipment};await this.getListStatusHouse(t),this.filtrar=!1},moveUp(t){const e=this.items[t];this.items.splice(t,1),this.items.splice(t-1,0,e)},moveDown(t){const e=this.items[t];this.items.splice(t,1),this.items.splice(t+1,0,e)},abrirModalOrden(){this.lstStatus=[],this.dialogOrden=!0,this.$nextTick(()=>{this.$refs.frmOrdenEstatus.reset()})},buscarEstatusPorModalidadYEmbarque(){this.$refs.frmOrdenEstatus.validate()&&(this.lstStatus=[],this.lstStatus=[...this.listStatusHouse.filter(t=>t.id_modalidad==this.id_modality&&t.id_shipment==this.id_shipment)])},cambiarOrdenEstado(t){const e=this.lstStatus[t],a=parseFloat(e.orden);isNaN(a)||a<=0?console.warn("El orden debe ser un número positivo."):(this.loadingTable=!0,setTimeout(()=>{const i=this.lstStatus.filter((e,a)=>a!==t);let s=1;const r=i.map(t=>(s===a&&s++,{...t,orden:s++}));r.splice(a-1,0,{...e,orden:a}),this.lstStatus=[],this.$nextTick(()=>{this.lstStatus=r,this.loadingTable=!1,this.$nextTick(()=>{const t=document.querySelector(`[data-index="${a-1}"] input`);t&&(t.focus(),t.select())})})},500))},async obtenerOrden(){if(this.id_modality&&this.id_shipment){await this.getObtenerOrdenStatusHouse({id_modalidad:this.id_modality,id_shipment:this.id_shipment});let t={...this.orden};this.nroorden=t.orden}},anadirComentario(){this.items.push({descripcion:""})},async guardarStatus(){if(this.errorInconterms="",this.$refs.frmStatus.validate()){if(!this.exw&&!this.fca&&!this.cfr&&!this.cif&&!this.ddp)return this.errorInconterms="Es necesario seleccionar al menos un Incoterms",!1;this.items.map((t,e)=>{t.orden=e+1});let t={id:this.id,id_modality:this.id_modality,id_shipment:this.id_shipment,name:this.name,nroorden:this.nroorden,exw:this.exw,fob:this.fob,fca:this.fca,cfr:this.cfr,cif:this.cif,ddp:this.ddp,lstComentatios:this.items};await this.GuardarStatusHouse(t),this.dialog=!1}},editar(t){this.dialog=!0,this.id=t.id,this.id_modality=t.id_modalidad,this.id_shipment=t.id_shipment,this.name=t.name,this.exw=t.exwflag,this.fob=t.fobflag,this.fca=t.fcaflag,this.cfr=t.cfrflag,this.cif=t.cifflag,this.ddp=t.ddpflag,this.lst=t.itemsflag,this.items=t.comentarios,this.nroorden=t.orden},mostrarComentario(t){t.verComentarios=t.verComentarios,this.$forceUpdate()},async guardarOrden(){await this.GuardarStatus(this.lstStatus),this.dialogOrden=!1}},computed:{...Object(S["c"])("statushouse",["listStatusHouse","orden"])},async mounted(){this.$store.state.spiner=!0,await this.getListStatusHouse(),this.$store.state.spiner=!1,await this.getModality(),await this.getShipment()}},E=O,$=(a("f028"),a("2877")),N=Object($["a"])(E,C,k,!1,null,"0cf2434a",null);e["default"]=N.exports},f028:function(t,e,a){"use strict";a("614e")}}]);