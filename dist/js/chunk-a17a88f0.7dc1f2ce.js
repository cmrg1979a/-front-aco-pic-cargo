(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a17a88f0"],{"08cc":function(t,o,s){"use strict";s.r(o);var e=s("0798"),a=s("8336"),r=s("b0af"),i=s("99d9"),l=s("62ad"),n=s("a523"),p=s("0fd9"),_=function(){var t=this,o=t._self._c;return o(n["a"],{staticClass:"py-0 mx-0",attrs:{fluid:""}},[o(p["a"],[o(l["a"],{attrs:{cols:"12",md:"8",xl:"8",lg:"8"}},[t.$store.state.controlGastos?o(r["a"],{staticClass:"cardHouse"},[o(i["c"],[o(p["a"],[o(l["a"],{attrs:{cols:"12",xl:"3",lg:"3"}},[o("div",{staticClass:"divExped"},[o("h3",{staticClass:"mt-4"},[t._v(" Master: "+t._s(t.$store.state.controlGastos.listControlGastos[0]&&t.$store.state.controlGastos.listControlGastos[0].master_codemaster||"")+" ")]),o("h3",{staticClass:"mt-1"})])]),o(l["a"],{attrs:{cols:"12",xl:"3",lg:"3"}},[o("h3",[t._v("Datos Generales")]),o("div",[o("p",[t._v(" Sentido: "+t._s(t.$store.state.controlGastos.listControlGastos[0]&&t.$store.state.controlGastos.listControlGastos[0].master_modality||"")+" ")]),o("p",[t._v(" Tipo de Embarque: "+t._s(t.$store.state.controlGastos.listControlGastos[0]&&t.$store.state.controlGastos.listControlGastos[0].master_shipment||"")+" ")]),o("p",[t._v(" Puerto de Origen: "+t._s(t.$store.state.controlGastos.listControlGastos[0]&&t.$store.state.controlGastos.listControlGastos[0].master_port_begin||"")+" ")]),o("p",[t._v(" Puerto de Destino: "+t._s(t.$store.state.controlGastos.listControlGastos[0]&&t.$store.state.controlGastos.listControlGastos[0].master_port_end||"")+" ")])])]),o(l["a"],{attrs:{cols:"12",xl:"3",lg:"3"}},[o("h3",[t._v("Datos del Embarque")]),o("div",[o("p",[t._v(" Agente: "+t._s(t.$store.state.controlGastos.listControlGastos[0]&&t.$store.state.controlGastos.listControlGastos[0].master_operador||"")+" ")]),o("p",[t._v(" Consignatario: "+t._s(t.$store.state.controlGastos.listControlGastos[0]&&t.$store.state.controlGastos.listControlGastos[0].master_consigner||"")+" ")]),o("p",[t._v(" Notify: "+t._s(t.$store.state.controlGastos.listControlGastos[0]&&t.$store.state.controlGastos.listControlGastos[0].master_notify||"")+" ")])])]),o(l["a"],{attrs:{cols:"12",xl:"3",lg:"3"}},[o("h3",[t._v("Datos de la carga")]),o("div",[o("p",[t._v(" Bultos: "+t._s(t.$store.state.controlGastos.listControlGastos[0]&&t.$store.state.controlGastos.listControlGastos[0].master_bultos||"")+" ")]),o("p",[t._v(" Peso: "+t._s(t.$store.state.controlGastos.listControlGastos[0]&&t.$store.state.controlGastos.listControlGastos[0].master_peso||"")+" Kg ")]),o("p",[t._v(" Volumen: "+t._s(t.$store.state.controlGastos.listControlGastos[0]&&t.$store.state.controlGastos.listControlGastos[0].master_volumen||"")+" m"),o("sup",[t._v("3")])])])])],1)],1)],1):t._e()],1),o(l["a"],{attrs:{cols:"12",lg:"4",xl:"4",md:"4"}},[o(e["a"],{staticClass:"my-1 text-center",attrs:{icon:"mdi-currency-usd",border:"left","colored-border":"",color:"deep-purple accent-4",elevation:"2",outlined:"",prominent:"",dense:""}},[o("h2",[t._v(" PROFIT PR: "+t._s(parseFloat(t.ingreso_pr-t.egreso_pr).toFixed(2))+" USD / OP: "+t._s(parseFloat(t.ingreso_op-t.egreso_op).toFixed(2))+" USD ")])]),o(a["a"],{staticClass:"my-1",attrs:{color:"info",block:""},on:{click:function(o){return t.imprimirControlDetallado()}}},[t._v(" IMPRIMIR CONTROL DETALLADO ")])],1),o(l["a"],{attrs:{cols:"12"}},[o("Ingresos",{attrs:{statusBtn:t.statusBtn,prFlag:t.prFlag,opFlag:t.opFlag,ingreso_pr:t.ingreso_pr,ingreso_op:t.ingreso_op},on:{recargarDatos:function(o){return t.recargarDatos()},recalcularProfit:function(o){return t.calcularProfit()}}})],1),o(l["a"],{attrs:{cols:"12"}},[o("Egresos",{attrs:{statusBtn:t.statusBtn,prFlag:t.prFlag,opFlag:t.opFlag,egreso_pr:t.egreso_pr,egreso_op:t.egreso_op},on:{recalcularProfit:function(o){return t.calcularProfit()},statusBtn:function(o){t.statusBtn=o}}})],1)],1)],1)},c=[],g=(s("14d9"),s("13d5"),s("e9f5"),s("7d54"),s("ab43"),s("9485"),s("2f62")),d=(s("c1df"),s("bc3a")),m=s.n(d),u=(s("3d20"),{components:{Ingresos:()=>Promise.resolve().then(s.bind(null,"98d2")),Egresos:()=>Promise.resolve().then(s.bind(null,"9984"))},data:()=>({dataProveedor:null,loadingFile:!1,errfile:"",msgfile:"",id:"",id_coins:null,ingreso_pr:0,egreso_pr:0,ingreso_op:0,egreso_op:0,loading:!1,dialog:!1,dialogListInvoince:!1,dialogInvoice:!1,dialogFacturar:!1,dialogIngreso:!1,dialogEngreso:!1,dialogDebsEdit:!1,prFlag:!1,opFlag:!1,datosFactura:!1,id_branch:null,proveedorId:null,conceptos:[],statusBtn:1,id_correlativo:1,pathfile:"",payPath:"",pathfileAll:"",menu:!1,number:"",id_banks:"",monto:0,monto_abonado:"",id_cuenta_pic:"",cuentas:[],tipocambio:1,comentario:"",itemsListInvoice:[],id_house:null,sPaymentId:"",dataList:[],search:null,egreso_pr:0,egreso_op:0,selected:[],id_correlativo:null,id_master:null,egreso:null,msgFile:"",errFile:""}),methods:{...Object(g["b"])(["getListControlGastos","setControl","cargarBranch","_getBanksList","_getCoinsList","_getProveedor","getListBanksDetailsCargar","cargarCorrelativo","_uploadFile","guardarCuotasCgeTipoProveedor","obtenerImpuestoXEmpresa"]),async recargarDatos(){this.$store.state.spiner=!0,await this.getListControlGastos(this.$route.params.id),this.$store.state.spiner=!1,this._getCoinsList()},calcularMontoDolar(){this.monto=parseFloat((this.monto_abonado?this.monto_abonado:0)/this.tipocambio).toFixed(2)},openDoc(t){window.open(t,"_blank")},cleandData(){this.date=new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),this.number="",this.monto=0,this.comentario="",this.payfile=[],this.payPath="",this.boolFile=!1,this.id_cuenta_pic="",this.tipocambio=1,this.id_coins="",this.monto_abonado="",this.number=""},currentDate(){const t=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],o=new Date,s=`${o.getDate()} de ${t[o.getMonth()]} del ${o.getFullYear()}`;return s},calcularProfit(){this.$nextTick(()=>{setTimeout(()=>{let t=this.$store.state.controlGastos.listControlGastos[0]&&this.$store.state.controlGastos.listControlGastos[0].master_houses||[],o=this.$store.state.controlGastos.listControlGastos[0]&&this.$store.state.controlGastos.listControlGastos[0].master_egresos||[];this.ingreso_pr=t.map(t=>t.total_total_pr_ingresos).reduce((t,o)=>t+o,0),this.ingreso_op=t.map(t=>t.total_total_op_ingresos).reduce((t,o)=>t+o,0),this.egreso_pr=o.map(t=>t.total_total_pr).reduce((t,o)=>t+o,0),this.egreso_op=o.map(t=>t.total_total_op).reduce((t,o)=>t+o,0)},1e3),this.$forceUpdate()})},async imprimirControlDetallado(){let t=this.$store.state.controlGastos.listControlGastos[0],o=[],s=0,e=0,a=0,r=0,i=0,l=0;t.master_egresos.forEach(t=>{t.detalle.forEach(t=>{o.push({namePagado:"",nameproveedor:t.nombre_proveedor,concepto:t.concepto,monto_pr:t.monto_pr,igv_pr:t.igv_pr,total_pr:t.total_pr,monto_op:t.monto_op,igv_op:t.igv_op,total_op:t.total_op}),s+=parseFloat(t.monto_pr),e+=parseFloat(t.igv_pr),a+=parseFloat(t.total_pr),r+=parseFloat(t.monto_op),i+=parseFloat(t.igv_op),l+=parseFloat(t.total_op)})});let n={bultos:t.master_volumen,peso:t.master_peso,puerto_origen:t.master_port_begin,puerto_destino:t.master_port_end,tipo_embarque:t.master_shipment,volumen:t.master_volumen,sentido:t.master_modality,gananciapr:parseFloat(this.ingreso_pr-this.egreso_pr).toFixed(2),gananciaop:parseFloat(this.ingreso_op-this.egreso_op).toFixed(2),exp:this.codigo_master,totalEgreso:s,totalIgvEgresos:e,totalTotalEgresos:a,totalEgresoOp:r,totalIgvEgresosOp:i,totalTotalEgresosOp:l,itemsTotalesProveedores:t.master_egresos.map(t=>({nameproveedor:t.nombre_proveedor,restante:parseFloat(t.monto_pagar_op).toFixed(2),total_op:parseFloat(t.total_total_op).toFixed(2),total_p:parseFloat(t.total_total_op).toFixed(2),total_pr:parseFloat(t.total_total_pr).toFixed(2)})),itemTotalHouse:t.master_houses.map(t=>({consigner:t.consigner,code_house:t.code_house,total_igv_op_ingresos:parseFloat(t.total_igv_op_ingresos).toFixed(2),total_igv_pr_ingresos:parseFloat(t.total_igv_pr_ingresos).toFixed(2),total_monto_op_ingresos:parseFloat(t.total_monto_op_ingresos).toFixed(2),total_monto_pr_ingresos:parseFloat(t.total_monto_pr_ingresos).toFixed(2),total_total_op_ingresos:parseFloat(t.total_total_op_ingresos).toFixed(2),total_total_pr_ingresos:parseFloat(t.total_total_pr_ingresos).toFixed(2)})),itemHouses:t.master_houses,itemEgresos:t.master_egresos};var p=this;p.$swal({icon:"info",title:"Generando PDF...",text:"Por favor espere"});var _={method:"post",url:"https://api.agentedecargaonline.com/getPdfInstructivoDetallado",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:n};await m()(_).then((function(t){p.$swal({icon:"success",title:"PDF Generado",text:"El PDF se descargar√° automaticamente"}),window.open("https://api.agentedecargaonline.com/"+t.data.path,"_blank")})).catch((function(t){console.log(t)}))}},async mounted(){this.$store.state.spiner=!0,this.prFlag=1==JSON.parse(sessionStorage.getItem("dataUser"))[0].departamento,this.opFlag=2==JSON.parse(sessionStorage.getItem("dataUser"))[0].departamento,Promise.all([await this.obtenerImpuestoXEmpresa(this.$route.params.id_branch),await this.cargarCorrelativo(),await this.getListControlGastos(this.$route.params.id),await this.cargarBranch(),await this._getBanksList(),await this._getCoinsList(),await this._getProveedor(),await this.getListBanksDetailsCargar()]),this.calcularProfit(),this.codigo_master=this.$store.state.controlGastos.listControlGastos[0].master_nromaster,this.$store.state.spiner=!1}}),h=u,v=(s("dbe7"),s("2877")),G=Object(v["a"])(h,_,c,!1,null,"cff68d3a",null);o["default"]=G.exports},"174e":function(t,o,s){},dbe7:function(t,o,s){"use strict";s("174e")}}]);