(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d7267"],{"761c":function(a,t,e){"use strict";e.r(t);var o=e("8336"),r=e("b0af"),i=e("99d9"),s=e("cc20"),c=e("62ad"),n=e("a523"),l=e("8fea"),d=e("169a"),u=e("ce7e"),_=e("132d"),m=e("8860"),p=e("da13"),h=e("5d23"),y=e("f774"),v=e("67b6"),f=e("43a6"),g=e("0fd9"),b=e("b974"),x=e("2fa4"),k=e("8654"),P=(e("14d9"),function(){var a=this,t=a._self._c;return t(n["a"],{attrs:{fluid:""}},[t(g["a"],[t(k["a"],{attrs:{name:"Buscar",label:"Buscar Proyección"},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}}),t(x["a"]),a.generarflag?t(o["a"],{staticClass:"mx-1",attrs:{dark:"",color:"#3F51B5",small:"",rounded:""},on:{click:function(t){a.dialogn=!a.dialogn}}},[a._v(" GENERAR ")]):a._e(),t(o["a"],{staticClass:"mx-1",attrs:{color:"success",small:"",rounded:""},on:{click:function(t){return a.$router.push({name:"nuevaProyeccionCXP"})}}},[a._v("NUEVA ")]),t(o["a"],{staticClass:"mx-1",attrs:{color:"info",small:"",rounded:""},on:{click:function(t){a.filtar=!a.filtar}}},[a._v("FILTRAR")]),t(o["a"],{staticClass:"mx-1",attrs:{color:"success",small:"",rounded:""}},[a._v("EXPORTAR")]),t(c["a"],{attrs:{cols:"12"}},[t(l["a"],{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.$store.state.proyecciones.listProyeccion,"item-key":"id",loading:"true",search:a.search},scopedSlots:a._u([{key:"item.action",fn:function({item:e}){return[t(o["a"],{attrs:{icon:""}},[t(_["a"],{attrs:{color:"info"},on:{click:function(t){return a.ver(e.proyeccion_id)}}},[a._v("mdi-eye")])],1),e.proyeccion_aprobadoflag?a._e():t(o["a"],{attrs:{icon:""}},[t(_["a"],{attrs:{color:"orange"},on:{click:function(t){return a.editar(e.proyeccion_id)}}},[a._v("mdi-pencil")])],1),t(o["a"],{attrs:{icon:""}},[t(_["a"],{attrs:{color:"blue-grey darken-4"},on:{click:function(t){return a.copiar(e)}}},[a._v("mdi-content-copy")])],1),!e.proyeccion_aprobadoflag&&e.proyeccion_estado?t(o["a"],{attrs:{icon:""},on:{click:function(t){return a.eliminar(e.proyeccion_id)}}},[t(_["a"],{attrs:{color:"red"}},[a._v("mdi-trash-can")])],1):a._e()]}},{key:"item.proyeccion_estado",fn:function({item:e}){return[t(s["a"],{attrs:{dark:"",color:e.proyeccion_estado?"green":"red"}},[a._v(" "+a._s(e.proyeccion_estado?"Activo":"Inactivo")+" ")])]}},{key:"item.proyeccion_aprobadoflag",fn:function({item:e}){return[t(s["a"],{attrs:{dark:"",color:e.proyeccion_aprobadoflag?"green":"red"}},[a._v(" "+a._s(e.proyeccion_aprobadoflag?"Si":"No"))])]}}],null,!0)})],1)],1),t(d["a"],{attrs:{persistent:"",overlay:!1,"max-width":"30%"},model:{value:a.dialog,callback:function(t){a.dialog=t},expression:"dialog"}},[t(r["a"],[t(i["d"],{attrs:{"primary-title":""}},[a._v(" Copiar Proyección "+a._s(a.item.proyeccion_correlativo)+" "),t(x["a"]),t(o["a"],{attrs:{icon:"",color:"defaul"},on:{click:function(t){a.dialog=!a.dialog}}},[t(_["a"],[a._v("mdi-close")])],1)],1),t(i["c"],[t(g["a"],[t(c["a"],{attrs:{cols:"12"}},[t(b["a"],{attrs:{items:a.$store.state.month,label:"Mes",dense:"","item-text":"description","item-value":"id",rules:[a=>!!a||"Dato requerido"]},model:{value:a.id_month,callback:function(t){a.id_month=t},expression:"id_month"}})],1),t(c["a"],{attrs:{cols:"12"}},[t(b["a"],{attrs:{items:a.$store.state.year,label:"Año",dense:"","item-text":"description","item-value":"id",rules:[a=>!!a||"Dato requerido"]},model:{value:a.id_year,callback:function(t){a.id_year=t},expression:"id_year"}})],1)],1)],1),t(i["a"],[t(x["a"]),t(o["a"],{staticClass:"mx-1",attrs:{color:"success",loading:a.loading},on:{click:function(t){return a.copyProyeccion()}}},[a._v("Copiar")]),t(o["a"],{staticClass:"mx-1",attrs:{color:"red",dark:""},on:{click:function(t){a.dialog=!a.dialog}}},[a._v("Cancelar")])],1)],1)],1),t(d["a"],{attrs:{persistent:"",overlay:!1,"max-width":"30%"},model:{value:a.dialogn,callback:function(t){a.dialogn=t},expression:"dialogn"}},[t(r["a"],[t(i["d"],{attrs:{"primary-title":""}},[a._v(" REALIZAR PRIMERA PROYECCIÓN "),t(x["a"]),t(o["a"],{attrs:{icon:"",color:"defaul"},on:{click:function(t){a.dialogn=!a.dialogn}}},[t(_["a"],[a._v("mdi-close")])],1)],1),t(i["c"],[t(g["a"],[t(c["a"],{attrs:{cols:"12"}},[t(b["a"],{attrs:{items:a.$store.state.month,label:"Mes",dense:"","item-text":"description","item-value":"id",rules:[a=>!!a||"Dato requerido"]},model:{value:a.id_monthn,callback:function(t){a.id_monthn=t},expression:"id_monthn"}})],1),t(c["a"],{attrs:{cols:"12"}},[t(b["a"],{attrs:{items:a.$store.state.year,label:"Año",dense:"","item-text":"description","item-value":"id",rules:[a=>!!a||"Dato requerido"]},model:{value:a.id_yearn,callback:function(t){a.id_yearn=t},expression:"id_yearn"}})],1)],1)],1),t(i["a"],[t(x["a"]),t(o["a"],{staticClass:"mx-1",attrs:{color:"success",loading:a.loading},on:{click:function(t){return a.pProyeccion()}}},[a._v("Copiar")]),t(o["a"],{staticClass:"mx-1",attrs:{color:"red",dark:""},on:{click:function(t){a.dialogn=!a.dialogn}}},[a._v("Cancelar")])],1)],1)],1),t(y["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"20%",height:"92vh"},model:{value:a.filtar,callback:function(t){a.filtar=t},expression:"filtar"}},[t(p["a"],[t(h["a"],[t(h["c"],{staticClass:"text-h6"},[a._v(" Filtrar ")])],1)],1),t(u["a"]),t(u["a"]),t(m["a"],{attrs:{dense:"",nav:""}},[t(g["a"],[t(c["a"],{attrs:{cols:"12"}},[t(b["a"],{attrs:{items:a.$store.state.month,label:"Mes",dense:"","item-text":"description","item-value":"id",clearable:""},model:{value:a.id_month,callback:function(t){a.id_month=t},expression:"id_month"}})],1),t(c["a"],{attrs:{cols:"12"}},[t(b["a"],{attrs:{items:a.$store.state.year,label:"Año",dense:"","item-text":"description","item-value":"id",clearable:""},model:{value:a.id_year,callback:function(t){a.id_year=t},expression:"id_year"}})],1),t(c["a"],{attrs:{cols:"12"}},[t(k["a"],{attrs:{type:"number",label:"Correlativo",clearable:"",dense:"",step:"1"},model:{value:a.correlativo,callback:function(t){a.correlativo=t},expression:"correlativo"}})],1),t(c["a"],{attrs:{cols:"12"}},[t(k["a"],{attrs:{type:"number",label:"Monto Proyectado (USD)",clearable:"",dense:"",step:"1"},model:{value:a.total_proyectado_ext,callback:function(t){a.total_proyectado_ext=t},expression:"total_proyectado_ext"}})],1),t(c["a"],{attrs:{cols:"12"}},[a._v(" Estado "),t(f["a"],{attrs:{row:"",dense:""},model:{value:a.estado,callback:function(t){a.estado=t},expression:"estado"}},[t(v["a"],{attrs:{label:"Activo",value:"true"}}),t(v["a"],{attrs:{label:"Inactivo",color:"red",value:"false"}}),a.estado?t(o["a"],{attrs:{icon:"",small:""},on:{click:function(t){return a.clearestado()}}},[t(_["a"],[a._v("mdi-close")])],1):a._e()],1)],1),t(c["a"],{attrs:{cols:"12"}},[a._v(" Aprobados "),t(f["a"],{attrs:{row:"",dense:""},model:{value:a.aprobado,callback:function(t){a.aprobado=t},expression:"aprobado"}},[t(v["a"],{attrs:{label:"Aprobados",value:"true"}}),t(v["a"],{attrs:{label:"No Aprobados",color:"red",value:"false"}}),a.aprobado?t(o["a"],{attrs:{icon:"",small:""},on:{click:function(t){return a.clearaprobado()}}},[t(_["a"],[a._v("mdi-close")])],1):a._e()],1)],1)],1)],1),t(i["a"],[t(x["a"]),t(o["a"],{attrs:{small:"",color:"success"},on:{click:function(t){return a.filtrar()}}},[a._v("Aceptar")]),t(o["a"],{attrs:{small:"",dark:"",color:"red"},on:{click:function(t){a.filtar=!a.filtar}}},[a._v("Cerrar")])],1)],1)],1)}),C=[],w=e("2f62"),A={data(){return{filtar:!1,item:"",dialog:!1,search:"",id_month:"",id_year:"",correlativo:"",total_proyectado_ext:"",estado:"",aprobado:"",id_monthn:"",id_yearn:"",headers:[{text:"Correlativo",value:"proyeccion_correlativo"},{text:"Mes",value:"month_description"},{text:"Año",value:"year_description"},{text:"Proyectado (USD)",value:"proyeccion_total_proyectado_ext"},{text:"Usuario Creación",value:"entitie_namelong"},{text:"Estado",value:"proyeccion_estado"},{text:"Aprobado",value:"proyeccion_aprobadoflag"},{text:"Acciones",value:"action"}],items:[{id:"1",correlativo:"000001",description:"Primera Proyección",anio:"2023",mes:"Enero",monto:2394.9,user:"Sistema",status:!0,aprobado:!0}],loading:!1,dialogn:!1,generarflag:!1}},methods:{...Object(w["b"])(["getProyeccion","_getChargeMonth","_getChargeYear","copiarProyeccion","eliminarProyeccion","primeraProyeccion"]),async pProyeccion(){let a={id_month:this.id_monthn,id_year:this.id_yearn,id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch,id_user:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_user};await this.primeraProyeccion(a),this.dialogn=!1},ver(a){this.$router.push({name:"verProyeccion",params:{id:a}})},editar(a){this.$router.push({name:"editarProyeccion",params:{id:a}})},async eliminar(a){this.$store.state.spiner=!0;let t={id:a};await this.eliminarProyeccion(t),t={},await this.getProyeccion(t),this.$store.state.spiner=!1},copiar(a){this.id_month="",this.id_year="",this.item=a,this.dialog=!0},async copyProyeccion(){this.loading=!0;let a={id:this.item.proyeccion_id,id_month:this.id_month,id_year:this.id_year,id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch,id_user:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_user};await this.copiarProyeccion(a),a={id_month:"",id_year:"",correlativo:"",total_proyectado_ext:"",estado:"",aprobadoflag:""},await this.getProyeccion(a),this.loading=!1,this.dialog=!1,this.id_month="",this.id_year=""},async filtrar(){let a={id_month:this.id_month?this.id_month:"",id_year:this.id_year?this.id_year:"",correlativo:this.correlativo?this.correlativo:"",total_proyectado_ext:this.total_proyectado_ext?this.total_proyectado_ext:"",estado:this.estado?this.estado:"",aprobadoflag:this.aprobado?this.aprobado:""};await this.getProyeccion(a),this.filtar=!1},clearestado(){this.estado=""},clearaprobado(){this.aprobado=""}},async mounted(){let a={id_month:"",id_year:"",correlativo:"",total_proyectado_ext:"",estado:"",aprobadoflag:""};this.$store.state.spiner=!0,await Promise.all([this.getProyeccion(a),this._getChargeMonth(),this._getChargeYear()]),0==this.$store.state.proyecciones.listProyeccion.length?this.generarflag=!0:this.generarflag=!1,this.$store.state.spiner=!1,this.$store.state.drawer=!1}},$=A,S=e("2877"),R=Object(S["a"])($,P,C,!1,null,null,null);t["default"]=R.exports}}]);