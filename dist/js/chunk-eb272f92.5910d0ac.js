(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eb272f92"],{"0e8f":function(e,a,t){"use strict";t("20f6");var o=t("e8f2");a["a"]=Object(o["a"])("flex")},"4a9a":function(e,a,t){"use strict";t.r(a);var o=t("c6a6"),s=t("8336"),i=t("b0af"),r=t("99d9"),n=t("62ad"),l=t("a523"),c=t("8fea"),d=t("169a"),u=t("23a7"),m=t("0e8f"),p=t("f774"),_=t("67b6"),h=t("43a6"),g=t("0fd9"),v=t("8654"),f=function(){var e=this,a=e._self._c;return a(l["a"],{staticClass:"elevation-5 px-2"},[a(g["a"],[a(n["a"],[a(u["a"],{attrs:{"show-size":"",dense:"",label:"Excel",placeholder:"Seleccione un archivo",id:"excel","hide-details":""},on:{"click:clear":function(a){e.subir=!1},change:function(a){e.subir=!1}},nativeOn:{click:function(a){e.subir=!1}},model:{value:e.excel,callback:function(a){e.excel=a},expression:"excel"}})],1),a(n["a"],[e.subir?e._e():a(s["a"],{staticClass:"mx-1",attrs:{color:"warning",loading:e.procesando,small:"",disabled:!e.procesarflag},on:{click:function(a){return e.procesarExcel()}}},[e._v(" Procesar ")]),e.subir?a(s["a"],{staticClass:"mx-1",attrs:{color:"info",loading:e.procesando,small:""},on:{click:function(a){e.registrarFlag=!0}}},[e._v(" REGISTRAR ")]):e._e(),a(s["a"],{staticClass:"mx-1",attrs:{color:"info",loading:e.procesando2,small:""},on:{click:function(a){return e.exportarFormato()}}},[e._v(" Descargar Formato ")]),a(s["a"],{staticClass:"mx-1",attrs:{color:"success",small:"",disabled:0==e.itemsLCL.length&&0==e.itemsFCL.length&&0==e.itemsAereo},on:{click:e.guardarDatos}},[e._v(" Guardar ")])],1)],1),a(g["a"],["LCL"==e.type?a(n["a"],{staticClass:"mt-2",attrs:{cols:"12"}},[a(c["a"],{staticClass:"elevation-1",attrs:{headers:e.headerLCL,items:e.itemsLCL,loading:"true","item-key":"id",dense:"","items-per-page":10},scopedSlots:e._u([{key:"item.pais_origen",fn:function({item:t}){return[a(o["a"],{attrs:{items:e.$store.state.itemsPais,"item-value":"id","item-text":"name"},model:{value:t.id_pais_origen,callback:function(a){e.$set(t,"id_pais_origen",a)},expression:"item.id_pais_origen"}})]}},{key:"item.pais_destino",fn:function({item:t}){return[a(o["a"],{attrs:{items:e.$store.state.itemsPais,"item-value":"id","item-text":"name"},model:{value:t.id_pais_destino,callback:function(a){e.$set(t,"id_pais_destino",a)},expression:"item.id_pais_destino"}})]}}],null,!0)})],1):e._e(),"FCL"==e.type?a(n["a"],{staticClass:"mt-2",attrs:{cols:"12"}},[a(c["a"],{staticClass:"elevation-1",attrs:{headers:e.headerFCL,items:e.itemsFCL,loading:"true","item-key":"id",dense:"","items-per-page":10}})],1):e._e(),"AEREO"==e.type?a(n["a"],{staticClass:"mt-2",attrs:{cols:"12"}},[a(c["a"],{staticClass:"elevation-1",attrs:{headers:e.headerAereo,items:e.itemsAereo,loading:"true","item-key":"id",dense:"","items-per-page":10}})],1):e._e()],1),a(d["a"],{attrs:{"max-width":"50%",transition:"dialog-transition",persistent:""},model:{value:e.registrarFlag,callback:function(a){e.registrarFlag=a},expression:"registrarFlag"}},[a(i["a"],[a(r["d"],{attrs:{"primary-title":""}},[e._v(" REGISTRO DE TARIFAS ")]),a(r["c"],[a(o["a"],{attrs:{items:e.$store.state.calculadoras.listSucursal,"item-value":"paises_id","item-text":"paises_nombre",label:"Sucursal(s)",multiple:"",placeholder:"Selecciones un(as) sucursal(es)",chips:"",clearable:"","deletable-chips":"","small-chips":""},model:{value:e.sucursales,callback:function(a){e.sucursales=a},expression:"sucursales"}}),a(h["a"],{attrs:{row:"","hide-details":"",dense:""},model:{value:e.importacionflag,callback:function(a){e.importacionflag=a},expression:"importacionflag"}},[a(_["a"],{attrs:{label:"Importación",value:"true"}}),a(_["a"],{attrs:{label:"Exportación",value:"false"}})],1)],1),a(r["a"],[a(s["a"],{attrs:{color:"success",loading:e.procesando},on:{click:function(a){return e.registrar()}}},[e._v(" Aceptar ")]),a(s["a"],{attrs:{color:"warning"},on:{click:function(a){e.registrarFlag=!1}}},[e._v("Cancelar")])],1)],1)],1),e.offcanvas?a(p["a"],{staticClass:"px-2",attrs:{absolute:"",persistent:"",temporary:"",right:"",width:"28%",height:"100vh"},model:{value:e.offcanvas,callback:function(a){e.offcanvas=a},expression:"offcanvas"}},[a(i["a"],{attrs:{elevation:"5"}},[a(r["d"],{attrs:{"primary-title":""}},[e._v(" Nuevo Registro "+e._s("LCL"==e.type?"LCL":"FCL"==e.type?"FCL":"Aéreo")+" ")]),a(r["a"],{staticClass:"mt-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a(o["a"],{attrs:{items:e.$store.state.itemsPais,"item-text":"pais_descripcion",label:"País de Origen",placeholder:"Seleccione un país",clearable:"",dense:"","return-object":"","hide-details":"","hide-selected":"","hide-no-data":"","prepend-icon":"mdi-ferry"},on:{change:e.cargarPuertoOrigen},model:{value:e.datosFormulario.paisOrigen,callback:function(a){e.$set(e.datosFormulario,"paisOrigen",a)},expression:"datosFormulario.paisOrigen"}})],1),a("div",{staticClass:"col-12"},[a(o["a"],{attrs:{items:e.puertosOrigen,"item-text":"puerto_descripcion",label:"Puerto de Origen",placeholder:"Seleccione un puerto",clearable:"","return-object":"","hide-details":"","hide-selected":"","hide-no-data":"",multiple:"",dense:"","deletable-chips":"","small-chips":"","prepend-icon":"mdi-ferry"},model:{value:e.datosFormulario.puertoOrigen,callback:function(a){e.$set(e.datosFormulario,"puertoOrigen",a)},expression:"datosFormulario.puertoOrigen"}})],1),a("div",{staticClass:"col-12"},[a(o["a"],{attrs:{items:e.$store.state.itemsPais,"item-text":"pais_descripcion",label:"País de Destino",placeholder:"Seleccione un país",clearable:"","return-object":"","hide-details":"",dense:"","prepend-icon":"mdi-import"},on:{change:e.cargarPuertoDestino},model:{value:e.datosFormulario.paisDestino,callback:function(a){e.$set(e.datosFormulario,"paisDestino",a)},expression:"datosFormulario.paisDestino"}})],1),a("div",{staticClass:"col-12"},[a(o["a"],{attrs:{items:e.puertosDestino,"item-text":"puerto_descripcion",label:"Puerto de Destino",placeholder:"Seleccione un puerto",clearable:"","return-object":"","hide-details":"","hide-selected":"","hide-no-data":"",multiple:"",dense:"","prepend-icon":"mdi-import","deletable-chips":"","small-chips":""},model:{value:e.datosFormulario.puertoDestino,callback:function(a){e.$set(e.datosFormulario,"puertoDestino",a)},expression:"datosFormulario.puertoDestino"}})],1),"FCL"==e.type?a("div",{staticClass:"col-12"},[a(o["a"],{attrs:{items:e.$store.state.calculadora.contendedorCalc,"item-text":"contenedores_nombre",label:"Tipo de Contenedor",placeholder:"Seleccione un type Contenedor",clearable:"",dense:"","return-object":"","hide-details":"","hide-selected":"","hide-no-data":"","prepend-icon":"mdi-truck-cargo-container"},model:{value:e.datosFormulario.contenedor,callback:function(a){e.$set(e.datosFormulario,"contenedor",a)},expression:"datosFormulario.contenedor"}})],1):e._e(),"FCL"!=e.type?a("div",{staticClass:"col-4"},[a(v["a"],{attrs:{label:"Volumen Mínimo",step:"0.01",type:"number",suffix:"m3",dense:""},model:{value:e.datosFormulario.volumen_minimo,callback:function(a){e.$set(e.datosFormulario,"volumen_minimo",a)},expression:"datosFormulario.volumen_minimo"}})],1):e._e(),"FCL"!=e.type?a("div",{staticClass:"col-4"},[a(v["a"],{attrs:{label:"Volumen Desde",step:"0.01",type:"number",suffix:"m3",dense:""},model:{value:e.datosFormulario.volumen_desde,callback:function(a){e.$set(e.datosFormulario,"volumen_desde",a)},expression:"datosFormulario.volumen_desde"}})],1):e._e(),"FCL"!=e.type?a("div",{staticClass:"col-4"},[a(v["a"],{attrs:{label:"Volumen Hasta",step:"0.01",type:"number",suffix:"m3",dense:""},model:{value:e.datosFormulario.volumen_hasta,callback:function(a){e.$set(e.datosFormulario,"volumen_hasta",a)},expression:"datosFormulario.volumen_hasta"}})],1):e._e(),a("div",{staticClass:"col-4"},[a(o["a"],{attrs:{items:e.$store.state.moneda.moneda,"item-text":"moneda_descripcion",label:"Moneda",placeholder:"Seleccione una moneda",clearable:"","return-object":"","hide-details":"","hide-selected":"","hide-no-data":"",dense:""},on:{change:function(a){return e.obtenerSimbol()}},model:{value:e.datosFormulario.moneda,callback:function(a){e.$set(e.datosFormulario,"moneda",a)},expression:"datosFormulario.moneda"}})],1),"FCL"!=e.type?a("div",{staticClass:"col-4"},[a(v["a"],{attrs:{label:"Costo mínimo",step:"0.01",type:"number",prefix:e.symbol,dense:""},model:{value:e.datosFormulario.costo_minimo,callback:function(a){e.$set(e.datosFormulario,"costo_minimo",a)},expression:"datosFormulario.costo_minimo"}})],1):e._e(),a("div",{staticClass:"col-4"},[a(v["a"],{attrs:{label:"Costo",step:"0.01",type:"number",prefix:e.symbol,dense:""},model:{value:e.datosFormulario.costo,callback:function(a){e.$set(e.datosFormulario,"costo",a)},expression:"datosFormulario.costo"}})],1),"FCL"!=e.type?a("div",{staticClass:"col-6"},[a(v["a"],{attrs:{label:"SERVICIO/ VÍA/ TRANSBORDO",dense:""},model:{value:e.datosFormulario.servicio,callback:function(a){e.$set(e.datosFormulario,"servicio",a)},expression:"datosFormulario.servicio"}})],1):e._e(),"FCL"!=e.type?a("div",{staticClass:"col-6"},[a(o["a"],{attrs:{items:e.frecuencias,label:"Frecuencia",placeholder:"Seleccione una frecuencia",clearable:"","hide-details":"","hide-selected":"","hide-no-data":"",dense:""},model:{value:e.datosFormulario.frecuencia,callback:function(a){e.$set(e.datosFormulario,"frecuencia",a)},expression:"datosFormulario.frecuencia"}})],1):e._e(),"LCL"==e.type?a("div",{staticClass:"col-6"},[a(v["a"],{attrs:{label:"T.T APROX",step:"0.01",type:"number",dense:""},model:{value:e.datosFormulario.tt_aprox,callback:function(a){e.$set(e.datosFormulario,"tt_aprox",a)},expression:"datosFormulario.tt_aprox"}})],1):e._e(),"LCL"==e.type?a("div",{staticClass:"col-6"},[a(v["a"],{attrs:{label:"Recargos",dense:""},model:{value:e.datosFormulario.recargps,callback:function(a){e.$set(e.datosFormulario,"recargps",a)},expression:"datosFormulario.recargps"}})],1):e._e(),"FCL"!=e.type?a("div",{staticClass:"col-12"},[a(v["a"],{attrs:{label:"Agente",dense:""},model:{value:e.datosFormulario.agente,callback:function(a){e.$set(e.datosFormulario,"agente",a)},expression:"datosFormulario.agente"}})],1):e._e(),"FCL"==e.type?a("div",{staticClass:"col-12"},[a(o["a"],{attrs:{items:e.$store.state.calculadora.navieraCalc,"item-text":"navieras_nombre",label:"Naviera",placeholder:"Seleccione un Naviera",clearable:"","return-object":"","hide-details":"","hide-selected":"","hide-no-data":"",dense:"","prepend-icon":"mdi-shipping-pallet"},model:{value:e.datosFormulario.naviera,callback:function(a){e.$set(e.datosFormulario,"naviera",a)},expression:"datosFormulario.naviera"}})],1):e._e(),"AEREO"==e.type?a("div",{staticClass:"col-6"},[a(v["a"],{attrs:{label:"Cortes",dense:""},model:{value:e.datosFormulario.cortes,callback:function(a){e.$set(e.datosFormulario,"cortes",a)},expression:"datosFormulario.cortes"}})],1):e._e(),"AEREO"==e.type?a("div",{staticClass:"col-6"},[a(v["a"],{attrs:{label:"Carrier T.T ",step:"0.01",type:"number",dense:""},model:{value:e.datosFormulario.carrier_tt,callback:function(a){e.$set(e.datosFormulario,"carrier_tt",a)},expression:"datosFormulario.carrier_tt"}})],1):e._e(),a("div",{staticClass:"col-12"},[a("label",{attrs:{for:""}},[e._v("VALIDEZ")])]),a("div",{staticClass:"col-6"},[a(v["a"],{attrs:{label:"Desde",dense:"",type:"date"},model:{value:e.datosFormulario.vigencia_desde,callback:function(a){e.$set(e.datosFormulario,"vigencia_desde",a)},expression:"datosFormulario.vigencia_desde"}})],1),a("div",{staticClass:"col-6"},[a(v["a"],{attrs:{label:"Hasta",dense:"",type:"date"},model:{value:e.datosFormulario.vigencia_hasta,callback:function(a){e.$set(e.datosFormulario,"vigencia_hasta",a)},expression:"datosFormulario.vigencia_hasta"}})],1)])]),a(r["a"],[a(m["a"],{attrs:{"text-right":""}},[a(s["a"],{staticClass:"mx-1",attrs:{text:"",color:"success"},on:{click:function(a){return e.anadirRegistros()}}},[e._v(" Agregar ")]),a(s["a"],{staticClass:"mx-1",attrs:{text:"",color:"red"},on:{click:function(a){e.offcanvas=!1}}},[e._v(" Cancelar ")])],1)],1)],1)],1):e._e()],1)},b=[],C=(t("14d9"),t("e9f5"),t("7d54"),t("ab43"),t("a732"),t("8134")),F=t("2e92"),x=t("c1df"),L=t.n(x),O=t("3d20"),D=t.n(O),E=t("bc3a"),y=t.n(E),Y=t("2f62"),A={props:{type:{default:"FCL",type:String},id_modality:{default:1,type:Number}},data(){return{tipoSelected:"LCL",excel:null,count:0,subir:!1,procesando:!1,procesando2:!1,sucursal:[],sucursales:null,registrarFlag:!1,offcanvas:!1,importacionflag:"true",symbol:"",headerLCL:[{text:"Pais Origen",value:"pais_origen",sortable:!1},{text:"Puerto Origen",value:"puerto_origen",sortable:!1},{text:"Pais Origen",value:"pais_destino",sortable:!1},{text:"Puertos Origen",value:"puerto_destino",sortable:!1},{text:"0.1 a 5 cbm\t",value:"flete_0_5",sortable:!1},{text:"5.01 a 10 cbm\t",value:"flete_5_10",sortable:!1},{text:"10.01 a 15 cbm",value:"flete_10_15",sortable:!1},{text:"Moneda",value:"moneda",sortable:!1},{text:"Vigencia",value:"vigencia",sortable:!1}],headerFCL:[{text:"PAÍS ORIGEN",value:"pais_origen",sortable:!1},{text:"PUERTO ORIGEN",value:"puerto_origen",sortable:!1},{text:"PAÍS DESTINO",value:"pais_destino",sortable:!1},{text:"PUERTO DESTINO",value:"puerto_destino",sortable:!1},{text:"TIPO CONTENEDOR",value:"Tipo_contenedor",sortable:!1},{text:"COSTO",value:"costo",sortable:!1},{text:"MONEDA",value:"moneda",sortable:!1},{text:"NAVIERA",value:"Naviera",sortable:!1},{text:"DESDE",value:"vigencia_desde",sortable:!1},{text:"HASTA",value:"vigencia_hasta",sortable:!1}],headerAereo:[{text:"PAÍS DESTINO",value:"pais_origen",sortable:!1},{text:"PUERTO DESTINO",value:"puerto_origen",sortable:!1},{text:"PAÍS DESTINO",value:"pais_destino",sortable:!1},{text:"PUERTO DESTINO",value:"puerto_destino",sortable:!1},{text:"VOL. MÍNIMO",value:"volumen_minimo",sortable:!1},{text:"VOL. DESDE",value:"volumen_desde",sortable:!1},{text:"VOL. HASTA",value:"volumen_hasta",sortable:!1},{text:"COSTO MÍNIMO",value:"costo_minimo",sortable:!1},{text:"COSTO ",value:"costo",sortable:!1},{text:"MONEDA",value:"moneda",sortable:!1},{text:"SERVICIO",value:"servicio",sortable:!1},{text:"FRECUENCIA",value:"frecuencia",sortable:!1},{text:"CORTES",value:"cortes",sortable:!1},{text:"CARRIER TT",value:"carrier_tt",sortable:!1},{text:"AGENTE",value:"agente",sortable:!1},{text:"DESDE",value:"vigencia_desde",sortable:!1},{text:"HASTA",value:"vigencia_hasta",sortable:!1}],itemsLCL:[],itemsFCL:[],itemsAereo:[],procesarflag:!1,puertosOrigen:[],puertosDestino:[],frecuencias:[{value:"SEMANAL",text:"SEMANAL"},{value:"QUINCENAL",text:"QUINCENAL"},{value:"MENSUAL",text:"MENSUAL"},{value:"INDEFINIDO",text:"INDEFINIDO"}],datosFormulario:{paisOrigen:[],puertoOrigen:[],paisDestino:[],puertoDestino:[],volumen_minimo:0,volumen_hasta:0,volumen_max:0,costo_minimo:0,costo:0,tt_aprox:0,moneda:[],symbol:"",recargos:"",servicio:"DIRECTO",frecuencia:"",recargps:"",agente:"PIER17",desde:null,hasta:null,contenedor:[],naviera:[],cortes:"",carrier_tt:0}}},methods:{...Object(Y["b"])(["_getPais","CargarPuertoPorTipoPorPais","CargarMoneda","CargarnavieraCalc","CargarcontendedorCalc","CargarSucursal","GetCotValLCL","postGuardarCostos"]),async guardarDatos(){let e={};if(this.itemsAereo.length>0){if(this.itemsAereo.some(e=>""==e.id_pais_destino||null==e.id_pais_destino||""==e.id_pais_origen||null==e.id_pais_origen))return void D.a.fire({icon:"warning",text:"Falta Completar Datos"});e={costos:this.itemsAereo,shipment:"Aereo",id_modality:1}}if(this.itemsFCL.length>0){if(this.itemsFCL.some(e=>""==e.id_pais_destino||null==e.id_pais_destino||""==e.id_pais_origen||null==e.id_pais_origen))return void D.a.fire({icon:"warning",text:"Falta Completar Datos"});e={costos:this.itemsFCL,shipment:"FCL",id_modality:1}}if(this.itemsLCL.length>0){if(this.itemsLCL.some(e=>""==e.id_pais_destino||null==e.id_pais_destino||""==e.id_pais_origen||null==e.id_pais_origen))return void D.a.fire({icon:"warning",text:"Falta Completar Datos"});e={costos:this.itemsLCL,shipment:"LCL",id_modality:1}}this.postGuardarCostos(e)},async procesarExcel(){const e=document.getElementById("excel");let a=await this.validarCabecerasExcel(e.files[0]);if(1==a)switch(this.type){case"LCL":Object(C["a"])(e.files[0]).then(e=>{this.procesarLCL(e)});break;case"FCL":Object(C["a"])(e.files[0]).then(e=>{this.procesarFCL(e)});break;case"AEREO":Object(C["a"])(e.files[0]).then(e=>{this.procesarAereo(e)});break;default:break}},exportarFormato(){this.procesando2=!0;F["a"].types.xls;switch(this.type){case"LCL":let e="https://api.agentedecargaonline.com/uploads/FORMATO_LCL_CARGA_FELTE.xlsx";window.open(e,"blank"),this.procesando2=!1;break;case"FCL":[{Continente:"",pais_origen:"",puerto_origen:"",pais_destino:"",puerto_destino:"",Tipo_contenedor:"",costo:"",moneda:"",Naviera:"",vigencia_desde:"",vigencia_hasta:""}],"FORMATO FCL";break;case"AEREO":[{Continente:"",pais_origen:"",puerto_origen:"",pais_destino:"",puerto_destino:"",volumen_minimo:"",volumen_desde:"",volumen_hasta:"",costo_minimo:"",costo:"",moneda:"",servicio:"",frecuencia:"",cortes:"",carrier_tt:"",agente:"",vigencia_desde:"",vigencia_hasta:""}],"FORMATO AÉREO";break;default:break}setTimeout(()=>{},800)},async procesarLCL(e){var a=this;a.procesando=!0;let t=[];for(let i=0;i<e.length;i++)i>0&&t.push({pais_origen:e[i][0],puerto_origen:e[i][1],pais_destino:e[i][2],puerto_destino:e[i][3],flete_0_5:e[i][4],flete_5_10:e[i][5],flete_10_15:e[i][6],moneda:e[i][7],vigencia:L()(e[i][8]).format("YYYY-MM-DD")});let o=[];t.map((function(e){o.push(e)}));let s=await this.GetCotValLCL(o);this.itemsLCL=s,a.procesando=!1},async procesarFCL(e){var a=this;a.procesando=!0;let t=[];for(let v=0;v<e.length;v++)v>0&&t.push({Continente:e[v][0],pais_origen:e[v][1],puerto_origen:e[v][2],pais_destino:e[v][3],puerto_destino:e[v][4],Tipo_contenedor:e[v][5],costo:e[v][6],moneda:e[v][7],Naviera:e[v][8],vigencia_desde:L()(e[v][9]).format("YYYY-MM-DD"),vigencia_hasta:L()(e[v][10]).format("YYYY-MM-DD")});let o=[];t.map((function(e){o.push(e)}));let s=[],i=[],r=[],n=[],l=[],c=[],d=[],u=[],m=[];t.forEach(e=>{s.push(e.pais_origen),i.push(e.puerto_origen),r.push(e.pais_destino),n.push(e.puerto_destino),l.push(e.Tipo_contenedor),c.push(e.moneda),d.push(e.Naviera),u.push(L()(e.vigencia_desde).format("YYYY-MM-DD")),m.push(L()(e.vigencia_hasta).format("YYYY-MM-DD"))});var p={"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},_={id_branch:JSON.parse(sessionStorage.getItem("branch")),pais_origen:s,puerto_origen:i,pais_destino:r,puerto_destino:n,Tipo_contenedor:l,moneda:c,Naviera:d,vigencia_desde:u,vigencia_hasta:m},h={method:"post",url:"https://api.agentedecargaonline.com/validar_registros_fcl",headers:p,data:_};let g=await y()(h).then(e=>e.data);if(1==g.estadoflag)a.subir=!0,o.map((function(e){a.itemsFCL.push(e)}));else{let e=0==g.permiso?"EXISTEN DATOS POR CORREGIR. NO SE CARGARÁN LOS DATOS.":" ";D.a.fire({title:"OJO ATENCION  LEER BIEN. ."+e,icon:"error",width:"80%",scrollbarPadding:!0,html:`<div style="font-size: 1.5rem">${g.mensaje}</div>`,showDenyButton:!0,confirmButtonText:"Aceptar",denyButtonText:"Corregir Errores"}).then(e=>{e.isConfirmed?0==g.permiso?a.subir=g.permiso:o.map((function(e){a.itemsFCL.push(e),a.subir=g.permiso})):e.isDenied&&D.a.fire("No se cargaron los REGISTROS procese un nuevo documento.","","info")})}a.procesando=!1},async procesarAereo(e){var a=this;a.procesando=!0;let t=[];for(let f=0;f<e.length;f++)f>0&&t.push({Continente:e[f][0],pais_origen:e[f][1],puerto_origen:e[f][2],pais_destino:e[f][3],puerto_destino:e[f][4],volumen_minimo:e[f][5],volumen_desde:e[f][6],volumen_hasta:e[f][7],costo_minimo:e[f][8],costo:e[f][9],moneda:e[f][10],servicio:e[f][11],frecuencia:e[f][12],cortes:e[f][13],carrier_tt:e[f][14],agente:e[f][15],vigencia_desde:L()(e[f][16]).format("YYYY-MM-DD"),vigencia_hasta:L()(e[f][17]).format("YYYY-MM-DD")});let o=[];t.map((function(e){o.push(e)}));let s=[],i=[],r=[],n=[],l=[],c=[],d=[],u=[],m=[],p=[];t.forEach(e=>{s.push(e.pais_origen),i.push(e.puerto_origen),r.push(e.pais_destino),n.push(e.puerto_destino),l.push(e.moneda),c.push(e.servicio),d.push(e.frecuencia),u.push(e.agente),m.push(L()(e.vigencia_desde).format("YYYY-MM-DD")),p.push(L()(e.vigencia_hasta).format("YYYY-MM-DD"))});var _={"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},h={id_branch:JSON.parse(sessionStorage.getItem("branch")),pais_origen:s,puerto_origen:i,pais_destino:r,puerto_destino:n,moneda:l,servicio:c,frecuencia:d,agente:u,vigencia_desde:m,vigencia_hasta:p},g={method:"post",url:"https://api.agentedecargaonline.com/validar_registros_aereo",headers:_,data:h};let v=await y()(g).then(e=>e.data);if(1==v.estadoflag)a.subir=!0,o.map((function(e){a.itemsAereo.push(e)}));else{let e=0==v.permiso?"EXISTEN DATOS POR CORREGIR.":" Sino desea cargar los datos y procesar un nuevo documento presione Cancelar.";D.a.fire({title:"OJO ATENCION  LEER BIEN. ."+e,icon:"error",width:"80%",scrollbarPadding:!0,html:v.mensaje,showDenyButton:!0,confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then(e=>{e.isConfirmed?0==v.permiso?a.subir=v.permiso:o.map((function(e){a.itemsAereo.push(e),a.subir=v.permiso})):e.isDenied&&D.a.fire("No se cargaron los REGISTROS procese un nuevo documento.","","info")})}a.procesando=!1},change(){let e=this;e.tipoSelected!=e.type&&D.a.fire({icon:"info",title:"Advertencia",showDenyButton:!0,denyButtonText:"Regresar",text:`Va a cambiar de ${"LCL"==e.tipoSelected?"LCL":"FCL"==e.tipoSelected?"FLC":"AÉRO"} a ${"LCL"==e.type?"LCL":"FCL"==e.type?"FLC":"AÉRO"}. Perderá todos los datos procesados. ¿Desea seguro continuar.?`,confirmButtonText:"Continuar"}).then(a=>{a.isConfirmed&&(e.tipoSelected=e.type,e.procesarflag=!1,e.subir=!1,e.itemsLCL=[],e.itemsFCL=[],e.itemsAereo=[],e.excel=null),a.isDenied&&(e.type=e.tipoSelected)})},async validarCabecerasExcel(e){let a=this,t=0,o=!0,s=[{name:"pais_origen"},{name:"puerto_origen"},{name:"pais_destino"},{name:"puerto_destino"},{name:"flete_0_5"},{name:"flete_5_10"},{name:"flete_10_15"},{name:"moneda"},{name:"vigencia"}],i=[{name:"Continente"},{name:"pais_origen"},{name:"puerto_origen"},{name:"pais_destino"},{name:"puerto_destino"},{name:"Tipo_contenedor"},{name:"costo"},{name:"moneda"},{name:"Naviera"},{name:"vigencia_desde"},{name:"vigencia_hasta"}],r=[{name:"CONTINENTE"},{name:"pais_origen"},{name:"puerto_origen"},{name:"pais_destino"},{name:"puerto_destino"},{name:"volumen_minimo"},{name:"volumen_desde"},{name:"volumen_hasta"},{name:"costo_minimo"},{name:"costo"},{name:"moneda"},{name:"servicio"},{name:"frecuencia"},{name:"cortes"},{name:"carrier_tt"},{name:"agente"},{name:"vigencia_desde"},{name:"vigencia_hasta"}],n=await Object(C["a"])(e).then(e=>e[0]);switch(a.type){case"LCL":n.forEach(e=>{t=s.filter(a=>a.name==e).length,0==t&&(o=!1)});break;case"FCL":n.forEach(e=>{t=i.filter(a=>a.name==e).length,0==t&&(o=!1)});break;case"AEREO":n.forEach(e=>{t=r.filter(a=>a.name==e).length,0==t&&(o=!1)});break;default:break}return 0==o&&D.a.fire({icon:"warning",text:"El archivo seleccionado, no coincide con el type seleccionado."}),o},async registrar(){let e=this;e.procesando=!0;let a="";e.sucursales.map(e=>{a+=a?","+e:e});let t=null,o=[],s=[],i=[],r=[],n=[],l=[],c=[],d=[],u=[],m=[],p=[],_=[],h=[],g=[],v=[],f=[],b=[],C=[],F=[],x=[],O=[],E=null,Y=null;var A={"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"};"LCL"==e.type&&(e.itemsLCL.forEach(e=>{o.push(e.pais_origen),s.push(e.puerto_origen),i.push(e.pais_destino),r.push(e.puerto_destino),n.push(e.volumen_minimo),l.push(e.volumen_desde),c.push(e.volumen_hasta),d.push(e.costo_minimo),u.push(e.costo),m.push(e.moneda),p.push(e.servicio),_.push(e.frecuencia),h.push(e.tt_aprox),g.push(e.recargos),v.push(e.agente),f.push(L()(e.vigencia_desde).format("YYYY-MM-DD")),b.push(L()(e.vigencia_hasta).format("YYYY-MM-DD"))}),E={id_branch:JSON.parse(sessionStorage.getItem("branch")),pais_origen:o,puerto_origen:s,pais_destino:i,puerto_destino:r,volumen_minimo:n,volumen_desde:l,volumen_hasta:c,costo_minimo:d,costo:u,moneda:m,servicio:p,frecuencia:_,tt_aprox:h,recargos:g,agente:v,vigencia_desde:f,vigencia_hasta:b,importarcionflag:"true"==e.importacionflag,sucursal:a},t={method:"post",url:"https://api.agentedecargaonline.com/registrar_carga_masiva_lcl",headers:A,data:E},Y=await y()(t),1==Y.data.estadoflag&&D.a.fire({icon:"success",title:Y.data.data[0].mensaje})),"FCL"==e.type&&(e.itemsFCL.forEach(e=>{C.push(e.Tipo_contenedor),u.push(e.costo),m.push(e.moneda),F.push(e.Naviera),o.push(e.pais_origen),s.push(e.puerto_origen),i.push(e.pais_destino),r.push(e.puerto_destino),f.push(L()(e.vigencia_desde).format("YYYY-MM-DD")),b.push(L()(e.vigencia_hasta).format("YYYY-MM-DD"))}),E={id_branch:JSON.parse(sessionStorage.getItem("branch")),Tipo_contenedor:C,costo:u,moneda:m,Naviera:F,pais_origen:o,puerto_origen:s,pais_destino:i,puerto_destino:r,vigencia_desde:f,vigencia_hasta:b,importarcionflag:"true"==e.importacionflag,sucursal:a},t={method:"post",url:"https://api.agentedecargaonline.com/registrar_carga_masiva_fcl",headers:A,data:E},Y=await y()(t),1==Y.data.estadoflag&&D.a.fire({icon:"success",title:Y.data.data[0].mensaje})),"AEREO"==e.type&&(e.itemsAereo.forEach(e=>{o.push(e.pais_origen),s.push(e.puerto_origen),i.push(e.pais_destino),r.push(e.puerto_destino),n.push(e.volumen_minimo),l.push(e.volumen_desde),c.push(e.volumen_hasta),d.push(e.costo_minimo),u.push(e.costo),m.push(e.moneda),p.push(e.servicio),_.push(e.frecuencia),x.push(e.cortes),O.push(e.carrier_tt),v.push(e.agente),b.push(e.vigencia_hasta),f.push(L()(e.vigencia_desde).format("YYYY-MM-DD")),b.push(L()(e.vigencia_hasta).format("YYYY-MM-DD"))}),E={id_branch:JSON.parse(sessionStorage.getItem("branch")),pais_origen:o,puerto_origen:s,pais_destino:i,puerto_destino:r,volumen_minimo:n,volumen_desde:l,volumen_hasta:c,costo_minimo:d,costo:u,moneda:m,servicio:p,frecuencia:_,cortes:x,carrier_tt:O,agente:v,vigencia_hasta:b,vigencia_desde:f,importarcionflag:"true"==e.importacionflag,sucursal:a},t={method:"post",url:"https://api.agentedecargaonline.com/registrar_carga_masiva_aereo",headers:A,data:E},Y=await y()(t),1==Y.data.estadoflag&&D.a.fire({icon:"success",title:Y.data.data[0].mensaje})),e.procesando=!1,e.registrarFlag=!1,this.limpiarData()},limpiarData(){this.type="LCL",this.tipoSelected="LCL",this.excel=null,this.count=0,this.subir=!1,this.procesando=!1,this.procesando2=!1,this.sucursales=null,this.registrarFlag=!1,this.importacionflag="true",this.itemsLCL=[],this.itemsFCL=[],this.itemsAereo=[],this.procesarflag=!1},async cargarPuertoDestino(){this.puertosDestino=[],this.datosFormulario.paisDestino&&(this.puertosDestino=await this.CargarPuertoPorTipoPorPais({id_pais:this.datosFormulario.paisDestino.pais_id,type:"M"}))},async cargarPuertoOrigen(){this.puertosOrigen=[],this.datosFormulario.paisOrigen&&(this.puertosOrigen=await this.CargarPuertoPorTipoPorPais({id_pais:this.datosFormulario.paisOrigen.pais_id,type:"M"}))},obtenerSimbol(){this.symbol="",this.moneda&&(this.symbol=this.moneda.moneda_symbol)},anadirRegistros(){let e=this;"LCL"==e.type&&e.datosFormulario.puertoOrigen.forEach(a=>{e.datosFormulario.puertoDestino.forEach(t=>{e.itemsLCL.push({pais_origen:e.datosFormulario.paisOrigen.pais_descripcion,puerto_origen:a.puerto_descripcion,pais_destino:e.datosFormulario.paisDestino.pais_descripcion,puerto_destino:t.puerto_descripcion,volumen_minimo:e.datosFormulario.volumen_minimo,volumen_desde:e.datosFormulario.volumen_desde,volumen_hasta:e.datosFormulario.volumen_hasta,costo_minimo:e.datosFormulario.costo_minimo,costo:e.datosFormulario.costo,moneda:e.datosFormulario.moneda.moneda_descripcion,servicio:e.datosFormulario.servicio,frecuencia:e.datosFormulario.frecuencia,tt_aprox:e.datosFormulario.tt_aprox,recargos:e.datosFormulario.recargos,agente:e.datosFormulario.agente,vigencia_desde:L()(e.datosFormulario.vigencia_desde).format("YYYY-MM-DD"),vigencia_hasta:L()(e.datosFormulario.vigencia_hasta).format("YYYY-MM-DD")})})}),"FCL"==e.type&&e.datosFormulario.puertoOrigen.forEach(a=>{e.datosFormulario.puertoDestino.forEach(t=>{e.itemsFCL.push({pais_origen:e.datosFormulario.paisOrigen.pais_descripcion,puerto_origen:a.puerto_descripcion,pais_destino:e.datosFormulario.paisDestino.pais_descripcion,puerto_destino:t.puerto_descripcion,Tipo_contenedor:e.datosFormulario.contenedor.contenedores_nombre,costo:e.datosFormulario.costo,moneda:e.datosFormulario.moneda.moneda_descripcion,Naviera:e.datosFormulario.naviera.navieras_nombre,vigencia_desde:L()(e.datosFormulario.vigencia_desde).format("YYYY-MM-DD"),vigencia_hasta:L()(e.datosFormulario.vigencia_hasta).format("YYYY-MM-DD")})})}),"AEREO"==e.type&&(e.datosFormulario.puertoOrigen.forEach(a=>{e.datosFormulario.puertoDestino.forEach(t=>{e.itemsAereo.push({pais_origen:e.datosFormulario.paisOrigen.pais_descripcion,puerto_origen:a.puerto_descripcion,pais_destino:e.datosFormulario.paisDestino.pais_descripcion,puerto_destino:t.puerto_descripcion,volumen_minimo:e.datosFormulario.volumen_minimo,volumen_desde:e.datosFormulario.volumen_desde,volumen_hasta:e.datosFormulario.volumen_hasta,costo_minimo:e.datosFormulario.costo_minimo,costo:e.datosFormulario.costo,moneda:e.datosFormulario.moneda.moneda_descripcion,servicio:e.datosFormulario.servicio,frecuencia:e.datosFormulario.frecuencia,cortes:e.datosFormulario.cortes,carrier_tt:e.datosFormulario.carrier_tt,agente:e.datosFormulario.agente,vigencia_desde:L()(e.datosFormulario.vigencia_desde).format("YYYY-MM-DD"),vigencia_hasta:L()(e.datosFormulario.vigencia_hasta).format("YYYY-MM-DD")})})}),e.offcanvas=!1),e.limpiarNuevoRegistro(),e.offcanvas=!1,e.subir=!0},limpiarNuevoRegistro(){this.datosFormulario={paisOrigen:[],puertoOrigen:[],paisDestino:[],puertoDestino:[],volumen_minimo:0,volumen_hasta:0,volumen_max:0,costo_minimo:0,costo:0,tt_aprox:0,moneda:[],symbol:"",recargos:"",servicio:"DIRECTO",frecuencia:"",recargps:"",agente:"PIER17",desde:null,hasta:null,contenedor:[],naviera:[],cortes:"",carrier_tt:0}},validar(){}},async mounted(){this.$store.state.spiner=!0,await this._getPais(),this.$store.state.spiner=!1},watch:{excel(){null==this.excel||this.excel==[]?(this.procesarflag=!1,this.itemsLCL=[],this.itemsFCL=[],this.itemsAereo=[]):this.procesarflag=!0}}},S=A,T=t("2877"),k=Object(T["a"])(S,f,b,!1,null,null,null);a["default"]=k.exports}}]);