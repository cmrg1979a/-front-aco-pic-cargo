(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-925845c8"],{"0e8f":function(e,a,o){"use strict";o("20f6");var t=o("e8f2");a["a"]=Object(t["a"])("flex")},"9d16":function(e,a,o){"use strict";o.r(a);var t=o("c6a6"),s=o("8336"),i=o("b0af"),r=o("99d9"),n=o("62ad"),l=o("a523"),c=o("8fea"),u=o("169a"),d=o("23a7"),m=o("0e8f"),p=o("f774"),_=o("67b6"),h=o("43a6"),v=o("0fd9"),g=o("8654"),f=function(){var e=this,a=e._self._c;return a(l["a"],{staticClass:"elevation-5 px-2"},[a(v["a"],[a(n["a"],{attrs:{cols:"12"}},[a("label",{attrs:{for:""}},[e._v(" Seleccione una opción: ")])]),a(n["a"],{attrs:{cols:"4"}},[a(h["a"],{attrs:{row:"","hide-details":"",dense:"",click:e.change()},model:{value:e.tipo,callback:function(a){e.tipo=a},expression:"tipo"}},[a(_["a"],{attrs:{label:"LCL",value:"lcl"}}),a(_["a"],{attrs:{label:"FCL",value:"fcl"}}),a(_["a"],{attrs:{label:"AÉREO",value:"aereo"}})],1)],1),a(n["a"],{attrs:{cols:"4"}},[a(d["a"],{attrs:{"show-size":"",dense:"",label:"Excel",placeholder:"Seleccione un archivo",id:"excel","hide-details":""},on:{"click:clear":function(a){e.subir=!1},change:function(a){e.subir=!1}},nativeOn:{click:function(a){e.subir=!1}},model:{value:e.excel,callback:function(a){e.excel=a},expression:"excel"}})],1),a(n["a"],{attrs:{cols:"4"}},[e.subir?e._e():a(s["a"],{staticClass:"mx-1",attrs:{color:"warning",loading:e.procesando,small:"",disabled:!e.procesarflag},on:{click:function(a){return e.procesarExcel()}}},[e._v(" Procesar ")]),e.subir?a(s["a"],{staticClass:"mx-1",attrs:{color:"success",loading:e.procesando,small:""},on:{click:function(a){e.registrarFlag=!0}}},[e._v(" REGISTRAR ")]):e._e(),a(s["a"],{staticClass:"mx-1",attrs:{color:"info",loading:e.procesando2,small:""},on:{click:function(a){return e.exportarFormato()}}},[e._v(" Descargar Formato ")]),a(s["a"],{staticClass:"mx-1",attrs:{color:"default",small:""},on:{click:function(a){e.offcanvas=!e.offcanvas}}},[e._v(" Nuevo Registro ")])],1),"lcl"==e.tipo?a(n["a"],{staticClass:"mt-2",attrs:{cols:"12"}},[a(c["a"],{staticClass:"elevation-1",attrs:{headers:e.headerLCL,items:e.itemsLCL,loading:"true","item-key":"id",dense:"","items-per-page":10}})],1):e._e(),"fcl"==e.tipo?a(n["a"],{staticClass:"mt-2",attrs:{cols:"12"}},[a(c["a"],{staticClass:"elevation-1",attrs:{headers:e.headerFCL,items:e.itemsFCL,loading:"true","item-key":"id",dense:"","items-per-page":10}})],1):e._e(),"aereo"==e.tipo?a(n["a"],{staticClass:"mt-2",attrs:{cols:"12"}},[a(c["a"],{staticClass:"elevation-1",attrs:{headers:e.headerAereo,items:e.itemsAereo,loading:"true","item-key":"id",dense:"","items-per-page":10}})],1):e._e()],1),a(u["a"],{attrs:{"max-width":"50%",transition:"dialog-transition",persistent:""},model:{value:e.registrarFlag,callback:function(a){e.registrarFlag=a},expression:"registrarFlag"}},[a(i["a"],[a(r["d"],{attrs:{"primary-title":""}},[e._v(" REGISTRO DE TARIFAS ")]),a(r["c"],[a(t["a"],{attrs:{items:e.$store.state.calculadoras.listSucursal,"item-value":"paises_id","item-text":"paises_nombre",label:"Sucursal(s)",multiple:"",placeholder:"Selecciones un(as) sucursal(es)",chips:"",clearable:"","deletable-chips":"","small-chips":""},model:{value:e.sucursales,callback:function(a){e.sucursales=a},expression:"sucursales"}}),a(h["a"],{attrs:{row:"","hide-details":"",dense:""},model:{value:e.importacionflag,callback:function(a){e.importacionflag=a},expression:"importacionflag"}},[a(_["a"],{attrs:{label:"Importación",value:"true"}}),a(_["a"],{attrs:{label:"Exportación",value:"false"}})],1)],1),a(r["a"],[a(s["a"],{attrs:{color:"success",loading:e.procesando},on:{click:function(a){return e.registrar()}}},[e._v(" Aceptar ")]),a(s["a"],{attrs:{color:"warning"},on:{click:function(a){e.registrarFlag=!1}}},[e._v("Cancelar")])],1)],1)],1),e.offcanvas?a(p["a"],{staticClass:"px-2",attrs:{absolute:"",persistent:"",temporary:"",right:"",width:"28%",height:"100vh"},model:{value:e.offcanvas,callback:function(a){e.offcanvas=a},expression:"offcanvas"}},[a(i["a"],{attrs:{elevation:"5"}},[a(r["d"],{attrs:{"primary-title":""}},[e._v(" Nuevo Registro "+e._s("lcl"==e.tipo?"LCL":"fcl"==e.tipo?"FCL":"Aéreo")+" ")]),a(r["a"],{staticClass:"mt-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a(t["a"],{attrs:{items:e.$store.state.itemsPais,"item-text":"pais_descripcion",label:"País de Origen",placeholder:"Seleccione un país",clearable:"",dense:"","return-object":"","hide-details":"","hide-selected":"","hide-no-data":"","prepend-icon":"mdi-ferry"},on:{change:e.cargarPuertoOrigen},model:{value:e.datosFormulario.paisOrigen,callback:function(a){e.$set(e.datosFormulario,"paisOrigen",a)},expression:"datosFormulario.paisOrigen"}})],1),a("div",{staticClass:"col-12"},[a(t["a"],{attrs:{items:e.puertosOrigen,"item-text":"puerto_descripcion",label:"Puerto de Origen",placeholder:"Seleccione un puerto",clearable:"","return-object":"","hide-details":"","hide-selected":"","hide-no-data":"",multiple:"",dense:"","deletable-chips":"","small-chips":"","prepend-icon":"mdi-ferry"},model:{value:e.datosFormulario.puertoOrigen,callback:function(a){e.$set(e.datosFormulario,"puertoOrigen",a)},expression:"datosFormulario.puertoOrigen"}})],1),a("div",{staticClass:"col-12"},[a(t["a"],{attrs:{items:e.$store.state.itemsPais,"item-text":"pais_descripcion",label:"País de Destino",placeholder:"Seleccione un país",clearable:"","return-object":"","hide-details":"",dense:"","prepend-icon":"mdi-import"},on:{change:e.cargarPuertoDestino},model:{value:e.datosFormulario.paisDestino,callback:function(a){e.$set(e.datosFormulario,"paisDestino",a)},expression:"datosFormulario.paisDestino"}})],1),a("div",{staticClass:"col-12"},[a(t["a"],{attrs:{items:e.puertosDestino,"item-text":"puerto_descripcion",label:"Puerto de Destino",placeholder:"Seleccione un puerto",clearable:"","return-object":"","hide-details":"","hide-selected":"","hide-no-data":"",multiple:"",dense:"","prepend-icon":"mdi-import","deletable-chips":"","small-chips":""},model:{value:e.datosFormulario.puertoDestino,callback:function(a){e.$set(e.datosFormulario,"puertoDestino",a)},expression:"datosFormulario.puertoDestino"}})],1),"fcl"==e.tipo?a("div",{staticClass:"col-12"},[a(t["a"],{attrs:{items:e.$store.state.calculadora.contendedorCalc,"item-text":"contenedores_nombre",label:"Tipo de Contenedor",placeholder:"Seleccione un tipo Contenedor",clearable:"",dense:"","return-object":"","hide-details":"","hide-selected":"","hide-no-data":"","prepend-icon":"mdi-truck-cargo-container"},model:{value:e.datosFormulario.contenedor,callback:function(a){e.$set(e.datosFormulario,"contenedor",a)},expression:"datosFormulario.contenedor"}})],1):e._e(),"fcl"!=e.tipo?a("div",{staticClass:"col-4"},[a(g["a"],{attrs:{label:"Volumen Mínimo",step:"0.01",type:"number",suffix:"m3",dense:""},model:{value:e.datosFormulario.volumen_minimo,callback:function(a){e.$set(e.datosFormulario,"volumen_minimo",a)},expression:"datosFormulario.volumen_minimo"}})],1):e._e(),"fcl"!=e.tipo?a("div",{staticClass:"col-4"},[a(g["a"],{attrs:{label:"Volumen Desde",step:"0.01",type:"number",suffix:"m3",dense:""},model:{value:e.datosFormulario.volumen_desde,callback:function(a){e.$set(e.datosFormulario,"volumen_desde",a)},expression:"datosFormulario.volumen_desde"}})],1):e._e(),"fcl"!=e.tipo?a("div",{staticClass:"col-4"},[a(g["a"],{attrs:{label:"Volumen Hasta",step:"0.01",type:"number",suffix:"m3",dense:""},model:{value:e.datosFormulario.volumen_hasta,callback:function(a){e.$set(e.datosFormulario,"volumen_hasta",a)},expression:"datosFormulario.volumen_hasta"}})],1):e._e(),a("div",{staticClass:"col-4"},[a(t["a"],{attrs:{items:e.$store.state.moneda.moneda,"item-text":"moneda_descripcion",label:"Moneda",placeholder:"Seleccione una moneda",clearable:"","return-object":"","hide-details":"","hide-selected":"","hide-no-data":"",dense:""},on:{change:function(a){return e.obtenerSimbol()}},model:{value:e.datosFormulario.moneda,callback:function(a){e.$set(e.datosFormulario,"moneda",a)},expression:"datosFormulario.moneda"}})],1),"fcl"!=e.tipo?a("div",{staticClass:"col-4"},[a(g["a"],{attrs:{label:"Costo mínimo",step:"0.01",type:"number",prefix:e.symbol,dense:""},model:{value:e.datosFormulario.costo_minimo,callback:function(a){e.$set(e.datosFormulario,"costo_minimo",a)},expression:"datosFormulario.costo_minimo"}})],1):e._e(),a("div",{staticClass:"col-4"},[a(g["a"],{attrs:{label:"Costo",step:"0.01",type:"number",prefix:e.symbol,dense:""},model:{value:e.datosFormulario.costo,callback:function(a){e.$set(e.datosFormulario,"costo",a)},expression:"datosFormulario.costo"}})],1),"fcl"!=e.tipo?a("div",{staticClass:"col-6"},[a(g["a"],{attrs:{label:"SERVICIO/ VÍA/ TRANSBORDO",dense:""},model:{value:e.datosFormulario.servicio,callback:function(a){e.$set(e.datosFormulario,"servicio",a)},expression:"datosFormulario.servicio"}})],1):e._e(),"fcl"!=e.tipo?a("div",{staticClass:"col-6"},[a(t["a"],{attrs:{items:e.frecuencias,label:"Frecuencia",placeholder:"Seleccione una frecuencia",clearable:"","hide-details":"","hide-selected":"","hide-no-data":"",dense:""},model:{value:e.datosFormulario.frecuencia,callback:function(a){e.$set(e.datosFormulario,"frecuencia",a)},expression:"datosFormulario.frecuencia"}})],1):e._e(),"lcl"==e.tipo?a("div",{staticClass:"col-6"},[a(g["a"],{attrs:{label:"T.T APROX",step:"0.01",type:"number",dense:""},model:{value:e.datosFormulario.tt_aprox,callback:function(a){e.$set(e.datosFormulario,"tt_aprox",a)},expression:"datosFormulario.tt_aprox"}})],1):e._e(),"lcl"==e.tipo?a("div",{staticClass:"col-6"},[a(g["a"],{attrs:{label:"Recargos",dense:""},model:{value:e.datosFormulario.recargps,callback:function(a){e.$set(e.datosFormulario,"recargps",a)},expression:"datosFormulario.recargps"}})],1):e._e(),"fcl"!=e.tipo?a("div",{staticClass:"col-12"},[a(g["a"],{attrs:{label:"Agente",dense:""},model:{value:e.datosFormulario.agente,callback:function(a){e.$set(e.datosFormulario,"agente",a)},expression:"datosFormulario.agente"}})],1):e._e(),"fcl"==e.tipo?a("div",{staticClass:"col-12"},[a(t["a"],{attrs:{items:e.$store.state.calculadora.navieraCalc,"item-text":"navieras_nombre",label:"Naviera",placeholder:"Seleccione un Naviera",clearable:"","return-object":"","hide-details":"","hide-selected":"","hide-no-data":"",dense:"","prepend-icon":"mdi-shipping-pallet"},model:{value:e.datosFormulario.naviera,callback:function(a){e.$set(e.datosFormulario,"naviera",a)},expression:"datosFormulario.naviera"}})],1):e._e(),"aereo"==e.tipo?a("div",{staticClass:"col-6"},[a(g["a"],{attrs:{label:"Cortes",dense:""},model:{value:e.datosFormulario.cortes,callback:function(a){e.$set(e.datosFormulario,"cortes",a)},expression:"datosFormulario.cortes"}})],1):e._e(),"aereo"==e.tipo?a("div",{staticClass:"col-6"},[a(g["a"],{attrs:{label:"Carrier T.T ",step:"0.01",type:"number",dense:""},model:{value:e.datosFormulario.carrier_tt,callback:function(a){e.$set(e.datosFormulario,"carrier_tt",a)},expression:"datosFormulario.carrier_tt"}})],1):e._e(),a("div",{staticClass:"col-12"},[a("label",{attrs:{for:""}},[e._v("VALIDEZ")])]),a("div",{staticClass:"col-6"},[a(g["a"],{attrs:{label:"Desde",dense:"",type:"date"},model:{value:e.datosFormulario.vigencia_desde,callback:function(a){e.$set(e.datosFormulario,"vigencia_desde",a)},expression:"datosFormulario.vigencia_desde"}})],1),a("div",{staticClass:"col-6"},[a(g["a"],{attrs:{label:"Hasta",dense:"",type:"date"},model:{value:e.datosFormulario.vigencia_hasta,callback:function(a){e.$set(e.datosFormulario,"vigencia_hasta",a)},expression:"datosFormulario.vigencia_hasta"}})],1)])]),a(r["a"],[a(m["a"],{attrs:{"text-right":""}},[a(s["a"],{staticClass:"mx-1",attrs:{text:"",color:"success"},on:{click:function(a){return e.anadirRegistros()}}},[e._v(" Agregar ")]),a(s["a"],{staticClass:"mx-1",attrs:{text:"",color:"red"},on:{click:function(a){e.offcanvas=!1}}},[e._v(" Cancelar ")])],1)],1)],1)],1):e._e()],1)},b=[],C=(o("14d9"),o("e9f5"),o("7d54"),o("ab43"),o("8134")),F=o("2e92"),x=o("c1df"),O=o.n(x),D=o("3d20"),E=o.n(D),S=o("bc3a"),Y=o.n(S),T=o("2f62"),A={data(){return{tipo:"lcl",tipoSelected:"lcl",excel:null,count:0,subir:!1,procesando:!1,procesando2:!1,sucursal:[],sucursales:null,registrarFlag:!1,offcanvas:!1,importacionflag:"true",symbol:"",headerLCL:[{text:"PAIS ORIGEN",value:"pais_origen",sortable:!1},{text:"PUERTO ORIGEN",value:"puerto_origen",sortable:!1},{text:"PAIS DESTINO",value:"pais_destino",sortable:!1},{text:"PUERTO DESTINO",value:"puerto_destino",sortable:!1},{text:"VOL MIN",value:"volumen_minimo",sortable:!1},{text:"VOL DESDE",value:"volumen_desde",sortable:!1},{text:"VOL HASTA",value:"volumen_hasta",sortable:!1},{text:"COSTO MINIMO",value:"costo_minimo",sortable:!1},{text:"COSTO",value:"costo",sortable:!1},{text:"MONEDA",value:"moneda",sortable:!1},{text:"SERVICIO",value:"servicio",sortable:!1},{text:"FRECUENCA",value:"frecuencia",sortable:!1},{text:"TT APROX",value:"tt_aprox",sortable:!1},{text:"RECARGOS",value:"recargos",sortable:!1},{text:"AGENTE",value:"agente",sortable:!1},{text:"VIGENCIA DESDE",value:"vigencia_desde",sortable:!1},{text:"VIGENCIA HASTA",value:"vigencia_hasta",sortable:!1}],headerFCL:[{text:"PAÍS ORIGEN",value:"pais_origen",sortable:!1},{text:"PUERTO ORIGEN",value:"puerto_origen",sortable:!1},{text:"PAÍS DESTINO",value:"pais_destino",sortable:!1},{text:"PUERTO DESTINO",value:"puerto_destino",sortable:!1},{text:"TIPO CONTENEDOR",value:"Tipo_contenedor",sortable:!1},{text:"COSTO",value:"costo",sortable:!1},{text:"MONEDA",value:"moneda",sortable:!1},{text:"NAVIERA",value:"Naviera",sortable:!1},{text:"DESDE",value:"vigencia_desde",sortable:!1},{text:"HASTA",value:"vigencia_hasta",sortable:!1}],headerAereo:[{text:"PAÍS DESTINO",value:"pais_origen",sortable:!1},{text:"PUERTO DESTINO",value:"puerto_origen",sortable:!1},{text:"PAÍS DESTINO",value:"pais_destino",sortable:!1},{text:"PUERTO DESTINO",value:"puerto_destino",sortable:!1},{text:"VOL. MÍNIMO",value:"volumen_minimo",sortable:!1},{text:"VOL. DESDE",value:"volumen_desde",sortable:!1},{text:"VOL. HASTA",value:"volumen_hasta",sortable:!1},{text:"COSTO MÍNIMO",value:"costo_minimo",sortable:!1},{text:"COSTO ",value:"costo",sortable:!1},{text:"MONEDA",value:"moneda",sortable:!1},{text:"SERVICIO",value:"servicio",sortable:!1},{text:"FRECUENCIA",value:"frecuencia",sortable:!1},{text:"CORTES",value:"cortes",sortable:!1},{text:"CARRIER TT",value:"carrier_tt",sortable:!1},{text:"AGENTE",value:"agente",sortable:!1},{text:"DESDE",value:"vigencia_desde",sortable:!1},{text:"HASTA",value:"vigencia_hasta",sortable:!1}],itemsLCL:[],itemsFCL:[],itemsAereo:[],procesarflag:!1,puertosOrigen:[],puertosDestino:[],frecuencias:[{value:"SEMANAL",text:"SEMANAL"},{value:"QUINCENAL",text:"QUINCENAL"},{value:"MENSUAL",text:"MENSUAL"},{value:"INDEFINIDO",text:"INDEFINIDO"}],datosFormulario:{paisOrigen:[],puertoOrigen:[],paisDestino:[],puertoDestino:[],volumen_minimo:0,volumen_hasta:0,volumen_max:0,costo_minimo:0,costo:0,tt_aprox:0,moneda:[],symbol:"",recargos:"",servicio:"DIRECTO",frecuencia:"",recargps:"",agente:"PIER17",desde:null,hasta:null,contenedor:[],naviera:[],cortes:"",carrier_tt:0}}},methods:{...Object(T["b"])(["_getPais","CargarPuertoPorTipoPorPais","CargarMoneda","CargarnavieraCalc","CargarcontendedorCalc","CargarSucursal"]),computed:{},async procesarExcel(){const e=document.getElementById("excel");let a=await this.validarCabecerasExcel(e.files[0]);if(1==a)switch(this.tipo){case"lcl":Object(C["a"])(e.files[0]).then(e=>{this.procesarLCL(e)});break;case"fcl":Object(C["a"])(e.files[0]).then(e=>{this.procesarFCL(e)});break;case"aereo":Object(C["a"])(e.files[0]).then(e=>{this.procesarAereo(e)});break;default:break}},exportarFormato(){this.procesando2=!0;var e=[],a="",o=F["a"].types.xls;switch(this.tipo){case"lcl":e=[{Continente:"",pais_origen:"",puerto_origen:"",pais_destino:"",puerto_destino:"",volumen_minimo:"",volumen_desde:"",volumen_hasta:"",costo_minimo:"",costo:"",moneda:"",servicio:"",frecuencia:"",cortes:"",carrier_tt:"",agente:"",vigencia_desde:"",vigencia_hasta:""}],a="FORMATO LCL";break;case"fcl":e=[{Continente:"",pais_origen:"",puerto_origen:"",pais_destino:"",puerto_destino:"",Tipo_contenedor:"",costo:"",moneda:"",Naviera:"",vigencia_desde:"",vigencia_hasta:""}],a="FORMATO FCL";break;case"aereo":e=[{Continente:"",pais_origen:"",puerto_origen:"",pais_destino:"",puerto_destino:"",volumen_minimo:"",volumen_desde:"",volumen_hasta:"",costo_minimo:"",costo:"",moneda:"",servicio:"",frecuencia:"",cortes:"",carrier_tt:"",agente:"",vigencia_desde:"",vigencia_hasta:""}],a="FORMATO AÉREO";break;default:break}setTimeout(()=>{Object(F["a"])({data:e,fileName:a,exportType:o}),this.procesando2=!1},800)},async procesarLCL(e){var a=this;a.procesando=!0;let o=[];for(let E=0;E<e.length;E++)E>0&&o.push({Continente:e[E][0],pais_origen:e[E][1],puerto_origen:e[E][2],pais_destino:e[E][3],puerto_destino:e[E][4],volumen_minimo:e[E][5],volumen_desde:e[E][6],volumen_hasta:e[E][7],costo_minimo:e[E][8],costo:e[E][9],moneda:e[E][10],servicio:e[E][11],frecuencia:e[E][12],tt_aprox:e[E][13],recargos:e[E][14],agente:e[E][15],vigencia_desde:O()(e[E][16]).format("YYYY-MM-DD"),vigencia_hasta:O()(e[E][17]).format("YYYY-MM-DD")});let t=[];o.map((function(e){t.push(e)}));let s=[],i=[],r=[],n=[],l=[],c=[],u=[],d=[],m=[],p=[],_=[],h=[],v=[],g=[],f=[],b=[],C=[];o.forEach(e=>{s.push(e.pais_origen),i.push(e.puerto_origen),r.push(e.pais_destino),n.push(e.puerto_destino),l.push(e.volumen_minimo),c.push(e.volumen_desde),u.push(e.volumen_hasta),d.push(e.costo_minimo),m.push(e.costo),p.push(e.moneda),_.push(e.servicio),h.push(e.frecuencia),v.push(e.tt_aprox),g.push(e.recargos),f.push(e.agente),b.push(O()(e.vigencia_desde).format("YYYY-MM-DD")),C.push(O()(e.vigencia_hasta).format("YYYY-MM-DD"))});var F={"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},x={id_branch:JSON.parse(sessionStorage.getItem("branch")),pais_origen:s,puerto_origen:i,pais_destino:r,puerto_destino:n,volumen_minimo:l,volumen_desde:c,volumen_hasta:u,costo_minimo:d,costo:m,moneda:p,servicio:_,frecuencia:h,tt_aprox:v,recargos:g,agente:f,vigencia_desde:b,vigencia_hasta:C},D={method:"post",url:"https://api.agentedecargaonline.com/validar_registros_lcl",headers:F,data:x};let S=await Y()(D).then(e=>e.data);if(1==S.estadoflag)a.subir=!0,t.map((function(e){a.itemsLCL.push(e)}));else{let e=0==S.permiso?"EXISTEN DATOS POR CORREGIR. NO SE CARGARÁN LOS DATOS.":" ";E.a.fire({title:"OJO ATENCION  LEER BIEN. ."+e,icon:"error",width:"80%",scrollbarPadding:!0,html:`<div style="font-size: 1.5rem">${S.mensaje}</div>`,showDenyButton:!0,confirmButtonText:"Aceptar",denyButtonText:"Corregir Errores"}).then(e=>{e.isConfirmed?(t.map((function(e){a.itemsLCL.push(e)})),a.subir=!0):e.isDenied&&E.a.fire("No se cargaron los REGISTROS procese un nuevo documento.","","info")})}a.procesando=!1},async procesarFCL(e){var a=this;a.procesando=!0;let o=[];for(let g=0;g<e.length;g++)g>0&&o.push({Continente:e[g][0],pais_origen:e[g][1],puerto_origen:e[g][2],pais_destino:e[g][3],puerto_destino:e[g][4],Tipo_contenedor:e[g][5],costo:e[g][6],moneda:e[g][7],Naviera:e[g][8],vigencia_desde:O()(e[g][9]).format("YYYY-MM-DD"),vigencia_hasta:O()(e[g][10]).format("YYYY-MM-DD")});let t=[];o.map((function(e){t.push(e)}));let s=[],i=[],r=[],n=[],l=[],c=[],u=[],d=[],m=[];o.forEach(e=>{s.push(e.pais_origen),i.push(e.puerto_origen),r.push(e.pais_destino),n.push(e.puerto_destino),l.push(e.Tipo_contenedor),c.push(e.moneda),u.push(e.Naviera),d.push(O()(e.vigencia_desde).format("YYYY-MM-DD")),m.push(O()(e.vigencia_hasta).format("YYYY-MM-DD"))});var p={"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},_={id_branch:JSON.parse(sessionStorage.getItem("branch")),pais_origen:s,puerto_origen:i,pais_destino:r,puerto_destino:n,Tipo_contenedor:l,moneda:c,Naviera:u,vigencia_desde:d,vigencia_hasta:m},h={method:"post",url:"https://api.agentedecargaonline.com/validar_registros_fcl",headers:p,data:_};let v=await Y()(h).then(e=>e.data);if(1==v.estadoflag)a.subir=!0,t.map((function(e){a.itemsFCL.push(e)}));else{let e=0==v.permiso?"EXISTEN DATOS POR CORREGIR. NO SE CARGARÁN LOS DATOS.":" ";E.a.fire({title:"OJO ATENCION  LEER BIEN. ."+e,icon:"error",width:"80%",scrollbarPadding:!0,html:`<div style="font-size: 1.5rem">${v.mensaje}</div>`,showDenyButton:!0,confirmButtonText:"Aceptar",denyButtonText:"Corregir Errores"}).then(e=>{e.isConfirmed?0==v.permiso?a.subir=v.permiso:t.map((function(e){a.itemsFCL.push(e),a.subir=v.permiso})):e.isDenied&&E.a.fire("No se cargaron los REGISTROS procese un nuevo documento.","","info")})}a.procesando=!1},async procesarAereo(e){var a=this;a.procesando=!0;let o=[];for(let f=0;f<e.length;f++)f>0&&o.push({Continente:e[f][0],pais_origen:e[f][1],puerto_origen:e[f][2],pais_destino:e[f][3],puerto_destino:e[f][4],volumen_minimo:e[f][5],volumen_desde:e[f][6],volumen_hasta:e[f][7],costo_minimo:e[f][8],costo:e[f][9],moneda:e[f][10],servicio:e[f][11],frecuencia:e[f][12],cortes:e[f][13],carrier_tt:e[f][14],agente:e[f][15],vigencia_desde:O()(e[f][16]).format("YYYY-MM-DD"),vigencia_hasta:O()(e[f][17]).format("YYYY-MM-DD")});let t=[];o.map((function(e){t.push(e)}));let s=[],i=[],r=[],n=[],l=[],c=[],u=[],d=[],m=[],p=[];o.forEach(e=>{s.push(e.pais_origen),i.push(e.puerto_origen),r.push(e.pais_destino),n.push(e.puerto_destino),l.push(e.moneda),c.push(e.servicio),u.push(e.frecuencia),d.push(e.agente),m.push(O()(e.vigencia_desde).format("YYYY-MM-DD")),p.push(O()(e.vigencia_hasta).format("YYYY-MM-DD"))});var _={"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},h={id_branch:JSON.parse(sessionStorage.getItem("branch")),pais_origen:s,puerto_origen:i,pais_destino:r,puerto_destino:n,moneda:l,servicio:c,frecuencia:u,agente:d,vigencia_desde:m,vigencia_hasta:p},v={method:"post",url:"https://api.agentedecargaonline.com/validar_registros_aereo",headers:_,data:h};let g=await Y()(v).then(e=>e.data);if(1==g.estadoflag)a.subir=!0,t.map((function(e){a.itemsAereo.push(e)}));else{let e=0==g.permiso?"EXISTEN DATOS POR CORREGIR.":" Sino desea cargar los datos y procesar un nuevo documento presione Cancelar.";E.a.fire({title:"OJO ATENCION  LEER BIEN. ."+e,icon:"error",width:"80%",scrollbarPadding:!0,html:g.mensaje,showDenyButton:!0,confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then(e=>{e.isConfirmed?0==g.permiso?a.subir=g.permiso:t.map((function(e){a.itemsAereo.push(e),a.subir=g.permiso})):e.isDenied&&E.a.fire("No se cargaron los REGISTROS procese un nuevo documento.","","info")})}a.procesando=!1},change(){let e=this;e.tipoSelected!=e.tipo&&E.a.fire({icon:"info",title:"Advertencia",showDenyButton:!0,denyButtonText:"Regresar",text:`Va a cambiar de ${"lcl"==e.tipoSelected?"LCL":"fcl"==e.tipoSelected?"FLC":"AÉRO"} a ${"lcl"==e.tipo?"LCL":"fcl"==e.tipo?"FLC":"AÉRO"}. Perderá todos los datos procesados. ¿Desea seguro continuar.?`,confirmButtonText:"Continuar"}).then(a=>{a.isConfirmed&&(e.tipoSelected=e.tipo,e.procesarflag=!1,e.subir=!1,e.itemsLCL=[],e.itemsFCL=[],e.itemsAereo=[],e.excel=null),a.isDenied&&(e.tipo=e.tipoSelected)})},async validarCabecerasExcel(e){let a=this,o=0,t=!0,s=[{name:"Continente"},{name:"pais_origen"},{name:"puerto_origen"},{name:"pais_destino"},{name:"puerto_destino"},{name:"volumen_minimo"},{name:"volumen_desde"},{name:"volumen_hasta"},{name:"costo_minimo"},{name:"costo"},{name:"moneda"},{name:"servicio"},{name:"frecuencia"},{name:"tt_aprox"},{name:"recargos"},{name:"agente"},{name:"vigencia_desde"},{name:"vigencia_hasta"}],i=[{name:"Continente"},{name:"pais_origen"},{name:"puerto_origen"},{name:"pais_destino"},{name:"puerto_destino"},{name:"Tipo_contenedor"},{name:"costo"},{name:"moneda"},{name:"Naviera"},{name:"vigencia_desde"},{name:"vigencia_hasta"}],r=[{name:"CONTINENTE"},{name:"pais_origen"},{name:"puerto_origen"},{name:"pais_destino"},{name:"puerto_destino"},{name:"volumen_minimo"},{name:"volumen_desde"},{name:"volumen_hasta"},{name:"costo_minimo"},{name:"costo"},{name:"moneda"},{name:"servicio"},{name:"frecuencia"},{name:"cortes"},{name:"carrier_tt"},{name:"agente"},{name:"vigencia_desde"},{name:"vigencia_hasta"}],n=await Object(C["a"])(e).then(e=>e[0]);switch(a.tipo){case"lcl":n.forEach(e=>{o=s.filter(a=>a.name==e).length,0==o&&(t=!1)});break;case"fcl":n.forEach(e=>{o=i.filter(a=>a.name==e).length,0==o&&(t=!1)});break;case"aereo":n.forEach(e=>{o=r.filter(a=>a.name==e).length,0==o&&(t=!1)});break;default:break}return 0==t&&E.a.fire({icon:"warning",text:"El archivo seleccionado, no coincide con el tipo seleccionado."}),t},async registrar(){let e=this;e.procesando=!0;let a="";e.sucursales.map(e=>{a+=a?","+e:e});let o=null,t=[],s=[],i=[],r=[],n=[],l=[],c=[],u=[],d=[],m=[],p=[],_=[],h=[],v=[],g=[],f=[],b=[],C=[],F=[],x=[],D=[],S=null,T=null;var A={"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"};"lcl"==e.tipo&&(e.itemsLCL.forEach(e=>{t.push(e.pais_origen),s.push(e.puerto_origen),i.push(e.pais_destino),r.push(e.puerto_destino),n.push(e.volumen_minimo),l.push(e.volumen_desde),c.push(e.volumen_hasta),u.push(e.costo_minimo),d.push(e.costo),m.push(e.moneda),p.push(e.servicio),_.push(e.frecuencia),h.push(e.tt_aprox),v.push(e.recargos),g.push(e.agente),f.push(O()(e.vigencia_desde).format("YYYY-MM-DD")),b.push(O()(e.vigencia_hasta).format("YYYY-MM-DD"))}),S={id_branch:JSON.parse(sessionStorage.getItem("branch")),pais_origen:t,puerto_origen:s,pais_destino:i,puerto_destino:r,volumen_minimo:n,volumen_desde:l,volumen_hasta:c,costo_minimo:u,costo:d,moneda:m,servicio:p,frecuencia:_,tt_aprox:h,recargos:v,agente:g,vigencia_desde:f,vigencia_hasta:b,importarcionflag:"true"==e.importacionflag,sucursal:a},o={method:"post",url:"https://api.agentedecargaonline.com/registrar_carga_masiva_lcl",headers:A,data:S},T=await Y()(o),1==T.data.estadoflag&&E.a.fire({icon:"success",title:T.data.data[0].mensaje})),"fcl"==e.tipo&&(e.itemsFCL.forEach(e=>{C.push(e.Tipo_contenedor),d.push(e.costo),m.push(e.moneda),F.push(e.Naviera),t.push(e.pais_origen),s.push(e.puerto_origen),i.push(e.pais_destino),r.push(e.puerto_destino),f.push(O()(e.vigencia_desde).format("YYYY-MM-DD")),b.push(O()(e.vigencia_hasta).format("YYYY-MM-DD"))}),S={id_branch:JSON.parse(sessionStorage.getItem("branch")),Tipo_contenedor:C,costo:d,moneda:m,Naviera:F,pais_origen:t,puerto_origen:s,pais_destino:i,puerto_destino:r,vigencia_desde:f,vigencia_hasta:b,importarcionflag:"true"==e.importacionflag,sucursal:a},o={method:"post",url:"https://api.agentedecargaonline.com/registrar_carga_masiva_fcl",headers:A,data:S},T=await Y()(o),1==T.data.estadoflag&&E.a.fire({icon:"success",title:T.data.data[0].mensaje})),"aereo"==e.tipo&&(e.itemsAereo.forEach(e=>{t.push(e.pais_origen),s.push(e.puerto_origen),i.push(e.pais_destino),r.push(e.puerto_destino),n.push(e.volumen_minimo),l.push(e.volumen_desde),c.push(e.volumen_hasta),u.push(e.costo_minimo),d.push(e.costo),m.push(e.moneda),p.push(e.servicio),_.push(e.frecuencia),x.push(e.cortes),D.push(e.carrier_tt),g.push(e.agente),b.push(e.vigencia_hasta),f.push(O()(e.vigencia_desde).format("YYYY-MM-DD")),b.push(O()(e.vigencia_hasta).format("YYYY-MM-DD"))}),S={id_branch:JSON.parse(sessionStorage.getItem("branch")),pais_origen:t,puerto_origen:s,pais_destino:i,puerto_destino:r,volumen_minimo:n,volumen_desde:l,volumen_hasta:c,costo_minimo:u,costo:d,moneda:m,servicio:p,frecuencia:_,cortes:x,carrier_tt:D,agente:g,vigencia_hasta:b,vigencia_desde:f,importarcionflag:"true"==e.importacionflag,sucursal:a},o={method:"post",url:"https://api.agentedecargaonline.com/registrar_carga_masiva_aereo",headers:A,data:S},T=await Y()(o),1==T.data.estadoflag&&E.a.fire({icon:"success",title:T.data.data[0].mensaje})),e.procesando=!1,e.registrarFlag=!1,this.limpiarData()},limpiarData(){this.tipo="lcl",this.tipoSelected="lcl",this.excel=null,this.count=0,this.subir=!1,this.procesando=!1,this.procesando2=!1,this.sucursales=null,this.registrarFlag=!1,this.importacionflag="true",this.itemsLCL=[],this.itemsFCL=[],this.itemsAereo=[],this.procesarflag=!1},async cargarPuertoDestino(){this.puertosDestino=[],this.datosFormulario.paisDestino&&(this.puertosDestino=await this.CargarPuertoPorTipoPorPais({id_pais:this.datosFormulario.paisDestino.pais_id,tipo:"M"}))},async cargarPuertoOrigen(){this.puertosOrigen=[],this.datosFormulario.paisOrigen&&(this.puertosOrigen=await this.CargarPuertoPorTipoPorPais({id_pais:this.datosFormulario.paisOrigen.pais_id,tipo:"M"}))},obtenerSimbol(){this.symbol="",this.moneda&&(this.symbol=this.moneda.moneda_symbol)},anadirRegistros(){let e=this;"lcl"==e.tipo&&e.datosFormulario.puertoOrigen.forEach(a=>{e.datosFormulario.puertoDestino.forEach(o=>{e.itemsLCL.push({pais_origen:e.datosFormulario.paisOrigen.pais_descripcion,puerto_origen:a.puerto_descripcion,pais_destino:e.datosFormulario.paisDestino.pais_descripcion,puerto_destino:o.puerto_descripcion,volumen_minimo:e.datosFormulario.volumen_minimo,volumen_desde:e.datosFormulario.volumen_desde,volumen_hasta:e.datosFormulario.volumen_hasta,costo_minimo:e.datosFormulario.costo_minimo,costo:e.datosFormulario.costo,moneda:e.datosFormulario.moneda.moneda_descripcion,servicio:e.datosFormulario.servicio,frecuencia:e.datosFormulario.frecuencia,tt_aprox:e.datosFormulario.tt_aprox,recargos:e.datosFormulario.recargos,agente:e.datosFormulario.agente,vigencia_desde:O()(e.datosFormulario.vigencia_desde).format("YYYY-MM-DD"),vigencia_hasta:O()(e.datosFormulario.vigencia_hasta).format("YYYY-MM-DD")})})}),"fcl"==e.tipo&&e.datosFormulario.puertoOrigen.forEach(a=>{e.datosFormulario.puertoDestino.forEach(o=>{e.itemsFCL.push({pais_origen:e.datosFormulario.paisOrigen.pais_descripcion,puerto_origen:a.puerto_descripcion,pais_destino:e.datosFormulario.paisDestino.pais_descripcion,puerto_destino:o.puerto_descripcion,Tipo_contenedor:e.datosFormulario.contenedor.contenedores_nombre,costo:e.datosFormulario.costo,moneda:e.datosFormulario.moneda.moneda_descripcion,Naviera:e.datosFormulario.naviera.navieras_nombre,vigencia_desde:O()(e.datosFormulario.vigencia_desde).format("YYYY-MM-DD"),vigencia_hasta:O()(e.datosFormulario.vigencia_hasta).format("YYYY-MM-DD")})})}),"aereo"==e.tipo&&(e.datosFormulario.puertoOrigen.forEach(a=>{e.datosFormulario.puertoDestino.forEach(o=>{e.itemsAereo.push({pais_origen:e.datosFormulario.paisOrigen.pais_descripcion,puerto_origen:a.puerto_descripcion,pais_destino:e.datosFormulario.paisDestino.pais_descripcion,puerto_destino:o.puerto_descripcion,volumen_minimo:e.datosFormulario.volumen_minimo,volumen_desde:e.datosFormulario.volumen_desde,volumen_hasta:e.datosFormulario.volumen_hasta,costo_minimo:e.datosFormulario.costo_minimo,costo:e.datosFormulario.costo,moneda:e.datosFormulario.moneda.moneda_descripcion,servicio:e.datosFormulario.servicio,frecuencia:e.datosFormulario.frecuencia,cortes:e.datosFormulario.cortes,carrier_tt:e.datosFormulario.carrier_tt,agente:e.datosFormulario.agente,vigencia_desde:O()(e.datosFormulario.vigencia_desde).format("YYYY-MM-DD"),vigencia_hasta:O()(e.datosFormulario.vigencia_hasta).format("YYYY-MM-DD")})})}),e.offcanvas=!1),e.limpiarNuevoRegistro(),e.offcanvas=!1,e.subir=!0},limpiarNuevoRegistro(){this.datosFormulario={paisOrigen:[],puertoOrigen:[],paisDestino:[],puertoDestino:[],volumen_minimo:0,volumen_hasta:0,volumen_max:0,costo_minimo:0,costo:0,tt_aprox:0,moneda:[],symbol:"",recargos:"",servicio:"DIRECTO",frecuencia:"",recargps:"",agente:"PIER17",desde:null,hasta:null,contenedor:[],naviera:[],cortes:"",carrier_tt:0}},validar(){}},async mounted(){this.$store.state.spiner=!0,await this._getPais(),await this.CargarMoneda(),await this.CargarSucursal(),await this.CargarnavieraCalc(),await this.CargarcontendedorCalc(),this.$store.state.spiner=!1},watch:{excel(){null==this.excel||this.excel==[]?(this.procesarflag=!1,this.itemsLCL=[],this.itemsFCL=[],this.itemsAereo=[]):this.procesarflag=!0}}},N=A,I=o("2877"),R=Object(I["a"])(N,f,b,!1,null,null,null);a["default"]=R.exports}}]);