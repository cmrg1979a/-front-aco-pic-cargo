(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8308ff34"],{"0e8f":function(t,a,e){"use strict";e("20f6");var i=e("e8f2");a["a"]=Object(i["a"])("flex")},6639:function(t,a,e){"use strict";e.r(a);var i=e("c6a6"),s=e("8336"),o=e("b0af"),l=e("99d9"),r=e("62ad"),n=e("a523"),d=e("8fea"),c=e("169a"),m=e("0e8f"),u=e("4bd4"),g=e("132d"),f=e("0fd9"),_=e("8654"),v=e("3a2f"),p=function(){var t=this,a=t._self._c;return a(n["a"],{attrs:{fluid:""}},[t.dialogRegistroNotaLlamada?a(c["a"],{attrs:{"max-width":"30%"},model:{value:t.dialogRegistroNotaLlamada,callback:function(a){t.dialogRegistroNotaLlamada=a},expression:"dialogRegistroNotaLlamada"}},[a(o["a"],[a(l["d"],[a("span",{staticClass:"headline"},[t._v("Detalle de Nota de llamada")])]),a(l["c"],[a(u["a"],{ref:"detallenota"},[a(_["a"],{attrs:{readonly:"",type:"date"},model:{value:t.fromData.date,callback:function(a){t.$set(t.fromData,"date",a)},expression:"fromData.date"}}),a(_["a"],{attrs:{rules:[t=>!!t||"El dato es requerido"],label:"Descripcion"},model:{value:t.fromData.descripcion,callback:function(a){t.$set(t.fromData,"descripcion",a)},expression:"fromData.descripcion"}}),a(i["a"],{attrs:{items:t.$store.state.pricing.listEjecutivo,label:"Ejecutivo.",dense:"",search:"",clearable:"","item-text":"name","item-value":"id_entitie"},model:{value:t.fromData.identities,callback:function(a){t.$set(t.fromData,"identities",a)},expression:"fromData.identities"}})],1)],1),a(l["a"],[a(m["a"],{attrs:{"text-right":""}},[a(s["a"],{attrs:{text:"",color:"success"},on:{click:t.guardarNota}},[t._v("Aceptar")]),a(s["a"],{attrs:{text:"",color:"red"},on:{click:function(a){t.dialogRegistroNotaLlamada=!t.dialogRegistroNotaLlamada}}},[t._v(" Cancelar ")])],1)],1)],1)],1):t._e(),a(f["a"],[a(r["a"],{attrs:{cols:"12"}},[a("div",{staticClass:"text-right"},[a(s["a"],{staticClass:"mx-1",attrs:{color:"red",loading:t.loading4,disabled:t.loading4,dark:!t.loading4,small:""},on:{click:function(a){return t.imprimierCalls()}}},[a(g["a"],[t._v("mdi-file-pdf-box")]),t._v(" Imprimir ")],1),a(s["a"],{staticClass:"mx-1",attrs:{color:"info",dark:"",small:""},on:{click:function(a){t.$store.state.pricing.filtrarCallsFlag=!t.$store.state.pricing.filtrarCallsFlag}}},[t._v(" Filtrar ")])],1)])],1),a(f["a"],[a(d["a"],{staticClass:"elevation-1 contenido",attrs:{dense:"",headers:t.headers,items:t.$store.state.pricing.listCall,"items-per-page":5,search:t.search,"multi-sort":"",mobile:"","disable-sort":""},scopedSlots:t._u([{key:"item",fn:function(e){return[a("tr",{class:{"text-red":"COTIZANDO SEGURO"===e.item.status||"COTIZANDO PROSPECTO"===e.item.status},on:{dblclick:function(a){return t.accionVerCotizacion(e.item.id)}}},[a("td",[a(v["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:o}){return[a(s["a"],t._g(t._b({staticClass:"ma-2",attrs:{icon:"",dark:"","x-small":"",color:"#A43542 "},on:{click:function(a){return t.registrarLlamada(e.item.id)}}},"v-btn",o,!1),i),[a(g["a"],{attrs:{dense:"",small:""}},[t._v("mdi-phone-plus")])],1)]}}],null,!0)},[a("span",[t._v("Actualizar Registro Llamada")])])],1),a("td",[t._v(" "+t._s(e.item.status)+" ")]),a("td",[t._v(" "+t._s(e.item.codigo)+" ")]),a("td",[t._v(" "+t._s(e.item.fecha_ultima_llamada)+" ")]),a("td",[t._v(" "+t._s(e.item.ejecutivo_ventas)+" ")]),a("td",[t._v(" "+t._s(e.item.cliente)+" ")]),a("td",[t._v(" "+t._s(e.item.ultimo_comentario)+" ")]),a("td",[t._v(" "+t._s(e.item.telefono)+" ")]),a("td",[t._v(" "+t._s(e.item.fecha_solicitud)+" ")]),a("td",[t._v(" "+t._s(e.item.sentido)+" ")]),a("td",[t._v(" "+t._s(e.item.origen)+" ")]),a("td",[t._v(" "+t._s(e.item.destino)+" ")]),a("td",[t._v(" "+t._s(e.item.incoterms)+" ")]),a("td",[t._v(" "+t._s(e.item.tipo_de_carga)+" ")])])]}},{key:"no-data",fn:function(){return[t._v(" No se encontraron registros ")]},proxy:!0}])})],1)],1)},h=[],x=e("2f62"),C=e("c1df"),N=e.n(C),D={data(){return{search:"",loading4:!1,dialogRegistroNotaLlamada:!1,headers:[{value:"acciones",text:"",align:"center",estado:!0},{value:"status",text:"ESTATUS ",aling:"center",estado:!0},{value:"codigo_quote",text:"CÓDIGO ",aling:"center",estado:!0},{value:"fecha_ultima_llamada",text:"FECHA ÚLTIMA LLAMADA",aling:"center",estado:!0},{value:"ejecutivo_ventas",text:"EJECUTIVO",aling:"center",estado:!0},{value:"cliente",text:"CLIENTE",aling:"center",estado:!0},{value:"ultimo_comentario",text:"ULTIMO COMENTARIO",aling:"center",estado:!0},{value:"telefono",text:"TELEFONO",aling:"center",estado:!0},{value:"fecha_solicitud",text:"FECHA SOLICITUD",aling:"center",estado:!0},{value:"sentido",text:"SENTIDO",aling:"center",estado:!0},{value:"origen",text:"ORIGEN ",aling:"center",estado:!0},{value:"destino",text:"DESTINO",aling:"center",estado:!0},{value:"incoterms",text:"INCOTERMS",aling:"center",estado:!0},{value:"tipo_de_carga",text:"TIPO DE CARGA",aling:"center",estado:!0}],filtro:{id_estado:"",id_sentido:"",id_carga:"",id_incoterms:"",desde:"",hasta:""},filtroLlamada:{idmarketing:null,idstatus:null,identities:null,idmodality:null,idshipment:null,idincoterm:null,fechainicio:null,fechafin:null}}},async mounted(){this.$store.state.spiner=!0,await this.getQuoteCall(this.filtro),this.$store.state.spiner=!1},methods:{...Object(x["b"])(["getQuoteCall","imprimiReporteListadoCalls","guardarNotaQuote"]),async imprimierCalls(){this.$store.state.spiner=!0,this.loading4=!0,await this.imprimiReporteListadoCalls({filtro:this.filtro}),this.loading4=!1,this.$store.state.spiner=!1},registrarLlamada(t){this.fromData={date:N()().format("YYYY-MM-DD"),descripcion:"",identities:JSON.parse(sessionStorage.getItem("dataUser"))?JSON.parse(sessionStorage.getItem("dataUser"))[0].id:""},console.log(t),this.$store.state.pricing.id=t,this.dialogRegistroNotaLlamada=!0},async guardarNota(){if(this.$refs.detallenota.validate()){this.dialogRegistroNotaLlamada=!1,this.$store.state.spiner=!0;let t={id_quote:this.$store.state.pricing.id,id_operador:this.fromData.identities,comentario:this.fromData.descripcion,fecha:this.fromData.date};await this.guardarNotaQuote(t).catch(t=>{console.log(t)}),await this.getQuoteCall(this.filtro).catch(t=>{console.log(t)}),this.$store.state.spiner=!1}}}},O=D,b=e("2877"),L=Object(b["a"])(O,p,h,!1,null,null,null);a["default"]=L.exports}}]);