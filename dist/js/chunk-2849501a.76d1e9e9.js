(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2849501a"],{"2db4":function(e,t,s){"use strict";s("ca71");var a=s("8dd9"),i=s("a9ad"),r=s("7560"),o=s("f2e7"),l=s("fe6c"),n=s("58df"),d=s("80d2"),c=s("d9bd");t["a"]=Object(n["a"])(a["a"],i["a"],o["a"],Object(l["b"])(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:e=>"string"===typeof e||!1===e},vertical:Boolean},data:()=>({activeTimeout:-1}),computed:{classes(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground(){return!this.text&&!this.outlined},isDark(){return this.hasBackground?!this.light:r["a"].options.computed.isDark.call(this)},styles(){if(this.absolute||!this.app)return{};const{bar:e,bottom:t,footer:s,insetFooter:a,left:i,right:r,top:o}=this.$vuetify.application;return{paddingBottom:Object(d["i"])(t+s+a),paddingLeft:Object(d["i"])(i),paddingRight:Object(d["i"])(r),paddingTop:Object(d["i"])(e+o)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted(){this.isActive&&this.setTimeout()},created(){this.$attrs.hasOwnProperty("auto-height")&&Object(c["e"])("auto-height",this),0==this.timeout&&Object(c["d"])('timeout="0"',"-1",this)},methods:{genActions(){return this.$createElement("div",{staticClass:"v-snack__action "},[Object(d["t"])(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent(){return this.$createElement("div",{staticClass:"v-snack__content",class:{[this.contentClass]:!0},attrs:{role:"status","aria-live":"polite"}},[Object(d["t"])(this)])},genWrapper(){const e=this.hasBackground?this.setBackgroundColor:this.setTextColor,t=e(this.color,{staticClass:"v-snack__wrapper",class:a["a"].options.computed.classes.call(this),style:a["a"].options.computed.styles.call(this),directives:[{name:"show",value:this.isActive}],on:{pointerenter:()=>window.clearTimeout(this.activeTimeout),pointerleave:this.setTimeout}});return this.$createElement("div",t,[this.genContent(),this.genActions()])},genTransition(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout(){window.clearTimeout(this.activeTimeout);const e=Number(this.timeout);this.isActive&&![0,-1].includes(e)&&(this.activeTimeout=window.setTimeout(()=>{this.isActive=!1},e))}},render(e){return e("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},"84d2":function(e,t,s){"use strict";s.r(t);var a=s("c6a6"),i=s("8336"),r=s("b0af"),o=s("62ad"),l=s("a523"),n=s("23a7"),d=s("4bd4"),c=s("132d"),u=s("67b6"),m=s("43a6"),p=s("0fd9"),h=s("2db4"),$=s("b73d"),b=s("71a3"),v=s("c671"),_=s("fe57"),f=s("aac8"),g=s("9a96"),k=s("8654"),y=function(){var e=this,t=e._self._c;return t(l["a"],{attrs:{fluid:""}},[t(r["a"],{staticClass:"py-10 px-10"},[t(_["a"],{attrs:{"background-color":"teal darken-4",grow:"",dark:"","icons-and-text":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(g["a"]),t(b["a"],{attrs:{href:"#datos"}},[e._v(" Datos de la Empresa")]),t(b["a"],{attrs:{href:"#admin"}},[e._v(" Administrador Principal SISTEMA ")])],1),t(f["a"],{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[t(v["a"],{staticClass:"px-5 items",attrs:{value:"datos"}},[t(d["a"],{ref:"frmEmpresa"},[t(p["a"],[t(o["a"],{attrs:{cols:"4"}},[t(a["a"],{attrs:{label:"Tipo de Documento (*)",items:e.itemsDocumentsPais,"item-text":"description","item-value":"id",rules:[e=>!!e||"Dato requerido"]},model:{value:e.$store.state.enterprises.model.id_document,callback:function(t){e.$set(e.$store.state.enterprises.model,"id_document",t)},expression:"$store.state.enterprises.model.id_document"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{type:"text",label:"N° de Documento (*)",rules:[e=>!!e||"Dato requerido",e=>e&&e.length<=100||"Hasta 100 caracteres permitidos"],"error-messages":e.errorDocument},on:{blur:e.validateDocument},model:{value:e.$store.state.enterprises.model.document,callback:function(t){e.$set(e.$store.state.enterprises.model,"document",t)},expression:"$store.state.enterprises.model.document"}})],1)],1),t(p["a"],[t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"Nombre Comercial (*)",rules:[e=>!!e||"Dato requerido",e=>e&&e.length<=255||"Hasta 255 caracteres permitidos"]},model:{value:e.$store.state.enterprises.model.trade_name,callback:function(t){e.$set(e.$store.state.enterprises.model,"trade_name",t)},expression:"$store.state.enterprises.model.trade_name"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"Nombre Negocio (*)",rules:[e=>!!e||"Dato requerido",e=>e&&e.length<=255||"Hasta 255 caracteres permitidos"]},model:{value:e.$store.state.enterprises.model.business_name,callback:function(t){e.$set(e.$store.state.enterprises.model,"business_name",t)},expression:"$store.state.enterprises.model.business_name"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"Phone"},model:{value:e.$store.state.enterprises.model.phone,callback:function(t){e.$set(e.$store.state.enterprises.model,"phone",t)},expression:"$store.state.enterprises.model.phone"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"Slogan",rules:[t=>e.validateLength(t,255)]},model:{value:e.$store.state.enterprises.model.slogan,callback:function(t){e.$set(e.$store.state.enterprises.model,"slogan",t)},expression:"$store.state.enterprises.model.slogan"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(n["a"],{attrs:{label:"Logo",accept:".png","success-messages":e.msgfile,"error-messages":e.errfile,loading:e.loadingFile,"show-size":"","prepend-icon":"mdi-camera"},on:{change:function(t){return e.uploadFile()}},model:{value:e.payfile,callback:function(t){e.payfile=t},expression:"payfile"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"IC",rules:[t=>e.validateLength(t,255)]},model:{value:e.$store.state.enterprises.model.ic,callback:function(t){e.$set(e.$store.state.enterprises.model,"ic",t)},expression:"$store.state.enterprises.model.ic"}})],1)],1),t(p["a"],[t(o["a"],{attrs:{cols:"3"}},[t(a["a"],{attrs:{label:"País (*)",items:e.itemsPais,"item-value":"id","item-text":"name",rules:[e=>!!e||"Dato requerido"]},on:{change:function(t){return e.get_state()}},model:{value:e.$store.state.enterprises.model.id_pais,callback:function(t){e.$set(e.$store.state.enterprises.model,"id_pais",t)},expression:"$store.state.enterprises.model.id_pais"}})],1),t(o["a"],{attrs:{cols:"3"}},[t(a["a"],{attrs:{label:"Región (*)",items:e.itemsState,"item-value":"id","item-text":"name",disabled:!e.$store.state.enterprises.model.id_pais,rules:[e=>!!e||"Dato requerido"]},on:{change:function(t){return e.get_city()}},model:{value:e.$store.state.enterprises.model.id_state,callback:function(t){e.$set(e.$store.state.enterprises.model,"id_state",t)},expression:"$store.state.enterprises.model.id_state"}})],1),t(o["a"],{attrs:{cols:"3"}},[t(a["a"],{attrs:{label:"Provincia (*)",items:e.itemsCity,"item-value":"id","item-text":"name",disabled:!e.$store.state.enterprises.model.id_state,rules:[e=>!!e||"Dato requerido"]},on:{change:function(t){return e.get_town()}},model:{value:e.$store.state.enterprises.model.id_city,callback:function(t){e.$set(e.$store.state.enterprises.model,"id_city",t)},expression:"$store.state.enterprises.model.id_city"}})],1),t(o["a"],{attrs:{cols:"3"}},[t(a["a"],{attrs:{label:"Distrito (*)",items:e.itemsTown,"item-value":"id","item-text":"name",disabled:!e.$store.state.enterprises.model.id_city,rules:[e=>!!e||"Dato requerido"]},model:{value:e.$store.state.enterprises.model.id_town,callback:function(t){e.$set(e.$store.state.enterprises.model,"id_town",t)},expression:"$store.state.enterprises.model.id_town"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"Dirección (*)",rules:[e=>!!e||"Dato requerido",e=>e&&e.length<=255||"Hasta 255 caracteres permitidos"]},model:{value:e.$store.state.enterprises.model.address,callback:function(t){e.$set(e.$store.state.enterprises.model,"address",t)},expression:"$store.state.enterprises.model.address"}})],1),t(o["a"],{attrs:{cols:"4"}},[t($["a"],{attrs:{dense:"",label:"Activo/Inactivo","hide-details":"",color:"success"},on:{change:e.updateStatus},model:{value:e.$store.state.enterprises.model.status,callback:function(t){e.$set(e.$store.state.enterprises.model,"status",t)},expression:"$store.state.enterprises.model.status"}})],1)],1)],1)],1),t(v["a"],{staticClass:"px-5 items",attrs:{value:"admin"}},[t(d["a"],{ref:"frmDatos"},[t(p["a"],[t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"Nombre Usuario (*)",id:"users","error-messages":e.errUsers,rules:[e=>!!e||"Dato Requerido"]},on:{blur:function(t){return e.validarUser()}},model:{value:e.$store.state.user.model.users,callback:function(t){e.$set(e.$store.state.user.model,"users",t)},expression:"$store.state.user.model.users"}})],1)],1),t(p["a"],{attrs:{"align-sm-center":""}},[t(o["a"],{attrs:{cols:"4"}},[t(a["a"],{attrs:{items:e.$store.state.itemsDocumentsPais,"item-text":"description","item-value":"id",label:"Tipo de Documento (*)",rules:[e=>!!e||"Dato Requerido"]},on:{change:function(t){return e.validarDocument()}},model:{value:e.$store.state.user.model.id_document,callback:function(t){e.$set(e.$store.state.user.model,"id_document",t)},expression:"$store.state.user.model.id_document"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"Documento (*)",id:"id",rules:[e=>!!e||"Dato Requerido"]},on:{blur:function(t){return e.validarDocument()}},model:{value:e.$store.state.user.model.document,callback:function(t){e.$set(e.$store.state.user.model,"document",t)},expression:"$store.state.user.model.document"}})],1)],1),t(p["a"],[t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{rules:[e=>!!e||"Dato Requerido"],label:"Nombres (*)",id:"id"},model:{value:e.$store.state.user.model.names,callback:function(t){e.$set(e.$store.state.user.model,"names",t)},expression:"$store.state.user.model.names"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{rules:[e=>!!e||"Dato Requerido"],label:"Apellido Paterno (*)",id:"id"},model:{value:e.$store.state.user.model.surname,callback:function(t){e.$set(e.$store.state.user.model,"surname",t)},expression:"$store.state.user.model.surname"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{rules:[e=>!!e||"Dato Requerido"],label:"Apellido Materno (*)",id:"id"},model:{value:e.$store.state.user.model.second_surname,callback:function(t){e.$set(e.$store.state.user.model,"second_surname",t)},expression:"$store.state.user.model.second_surname"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"Teléfono (*)",rules:[e=>!!e||"Dato Requerido"],id:"id"},model:{value:e.$store.state.user.model.phone,callback:function(t){e.$set(e.$store.state.user.model,"phone",t)},expression:"$store.state.user.model.phone"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"Correo (*)",id:"id",rules:[e=>!!e||"Dato requerido",e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"Debe ser un correo valido"],"error-messages":e.errEmail},on:{blur:function(t){return e.validarEmail()}},model:{value:e.$store.state.user.model.email,callback:function(t){e.$set(e.$store.state.user.model,"email",t)},expression:"$store.state.user.model.email"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{type:"date",label:"Fecha Nacimiento (*)",id:"id",rules:[e=>!!e||"Dato Requerido"]},model:{value:e.$store.state.user.model.birthday,callback:function(t){e.$set(e.$store.state.user.model,"birthday",t)},expression:"$store.state.user.model.birthday"}})],1)],1),t(p["a"],[t(o["a"],{attrs:{cols:"4"}},[t(a["a"],{attrs:{items:e.$store.state.itemsSex,"item-text":"name","item-value":"id",label:"Sexo (*)",rules:[e=>!!e||"Dato Requerido"],"item-disabled":e=>1!=e.status},model:{value:e.$store.state.user.model.id_sex,callback:function(t){e.$set(e.$store.state.user.model,"id_sex",t)},expression:"$store.state.user.model.id_sex"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"Dirección (*)",id:"id",rules:[e=>!!e||"Dato Requerido"]},model:{value:e.$store.state.user.model.address,callback:function(t){e.$set(e.$store.state.user.model,"address",t)},expression:"$store.state.user.model.address"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"URL Red Social Principal",id:"id"},model:{value:e.$store.state.user.model.socialprincipal,callback:function(t){e.$set(e.$store.state.user.model,"socialprincipal",t)},expression:"$store.state.user.model.socialprincipal"}})],1),t(o["a"],{attrs:{cols:"4"}},[t(k["a"],{attrs:{label:"URL Red Social Alternativa",id:"id"},model:{value:e.$store.state.user.model.socialsecundary,callback:function(t){e.$set(e.$store.state.user.model,"socialsecundary",t)},expression:"$store.state.user.model.socialsecundary"}})],1),t(o["a"],{attrs:{cols:"6"}},[e._v(" Departamento "),t(c["a"],{staticClass:"iconDepartamento",attrs:{small:""},on:{click:function(t){e.snackbar=!0}}},[e._v("mdi-information-slab-circle-outline")]),t(m["a"],{attrs:{rules:[e=>!!e||"Dato Requerido"],column:""},model:{value:e.$store.state.user.model.departamento,callback:function(t){e.$set(e.$store.state.user.model,"departamento",t)},expression:"$store.state.user.model.departamento"}},[t(u["a"],{attrs:{label:"Operativo",value:"1"}}),t(u["a"],{attrs:{label:"Administrativo",value:"2"}})],1)],1),t(o["a"],{attrs:{cols:"6"}},[t($["a"],{attrs:{label:"Estado"},model:{value:e.$store.state.user.model.status,callback:function(t){e.$set(e.$store.state.user.model,"status",t)},expression:"$store.state.user.model.status"}})],1)],1)],1)],1)],1),t(i["a"],{staticClass:"mt-10",attrs:{block:"",color:"success",dark:""},on:{click:function(t){return e.insert()}}},[e._v(e._s("datos"==e.tab?"Siguiente":"Guardar"))])],1),t(h["a"],{attrs:{outlined:"",vertical:"",color:"info"},scopedSlots:e._u([{key:"action",fn:function({attrs:s}){return[t(i["a"],e._b({attrs:{text:"",color:"red"},on:{click:function(t){e.snackbar=!1}}},"v-btn",s,!1),[e._v(" Close ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" El departamento, define como se comportará el usuario para el llendo de montos (Pricing u Operaciones) , en el CONTROL DE GASTOS ")])],1)},x=[],w=s("bc3a"),D=s.n(w),C=s("54e1"),E=s("2f62"),S=s("3d20"),T=s.n(S),q={mixins:[C["a"]],name:"ListEnterpriseComponent",data(){return{snackbar:!1,tab:"datos",errfile:"",loadingFile:!1,loading:!1,msgfile:"",payfile:null,errorDocument:null,errPosition:"",errUsers:"",errEmail:""}},async mounted(){this.$store.state.spiner=!0,this.$store.state.mainTitle="EMPRESAS",this.$store.state.enterprises.model={id_logo:"",document:"",trade_name:"",business_name:"",slogan:"",address:"",status:"1",id_pais:"",id_state:"",id_city:"",id_town:"",id_document:"",ic:""},this.$store.state.user.model={id:"",id_entitie:"",id_pais:"",id_city:"",id_state:"",id_town:"",users:"",id_document:"",document:"",id_sex:"",status:"1",departamento:"1",names:"",surname:"",second_surname:"",socialprincipal:"",socialsecundary:"",phone:"",address:"",birthday:"",email:""},await this._getDocumentsPais(),await this._getPais(),await this._getSex(),await this._callState(),this.$store.state.spiner=!1,this.$refs.frmDML.resetValidation(),this.$refs.frmDatos.resetValidation()},methods:{...Object(E["b"])(["_getSex","insertEnterprise","_getDocumentsPais","_getPais","_getState","_getCity","_getTown","validateDocumentEnterprise","_uploadFile","validateUserUsuario","validateDocumentUsuario","validateEmailUsuario"]),async _callState(){this.id_pais>0&&await this._getState(this.id_pais)},volver(){this.$router.go(-1)},async insert(){if("datos"==this.tab&&this.$refs.frmEmpresa.validate())return this.tab="admin",!0;if("admin"==this.tab){if(!this.$refs.frmEmpresa.validate())return this.tab="datos",!1;this.$refs.frmDatos.validate()&&(this.$store.state.spiner=!0,await this.insertEnterprise(this.$store.state.enterprises),this.$store.state.spiner=!1)}},async get_state(){this.$store.state.enterprises.model.id_state="",this.$store.state.enterprises.model.id_city="",this.$store.state.enterprises.model.id_town="",await this._getState(this.$store.state.enterprises.model.id_pais)},async get_city(){this.$store.state.enterprises.model.id_city="",this.$store.state.enterprises.model.id_town="",await this._getCity(this.$store.state.enterprises.model.id_state)},async get_town(){this.$store.state.enterprises.model.id_town="",await this._getTown(this.$store.state.enterprises.model.id_city)},async update(){this.$refs.form.validate()&&await this.updateEnterprise(this.$store.state.enterprises)},async validarUser(){this.errUsers="",this.$store.state.spiner=!0;let e=await this.validateUserUsuario();1==e.estadoflag&&(this.errUsers=e.mensaje,this.$store.state.user.model.users=""),this.$store.state.spiner=!1},async validarEmail(){this.errEmail="",this.$store.state.spiner=!0;let e=await this.validateEmailUsuario();1==e.estadoflag&&(this.errEmail=e.mensaje,this.$store.state.user.model.email=""),this.$store.state.spiner=!1},async validarDocument(){if(this.$store.state.user.model.id_document&&this.$store.state.user.model.document){this.$store.state.spiner=!0;let e=await this.validateDocumentUsuario();this.$store.state.spiner=!1,1==e.estadoflag&&T.a.fire({icon:"question",title:"Pregunta",text:e.mensaje,allowEnterKey:!1,allowOutsideClick:!1,allowEnterKey:!1,confirmButtonText:"Si",cancelButtonText:"No",showCancelButton:!0,cancelButtonColor:"red",confirmButtonColor:"green"}).then(async t=>{t.isConfirmed&&(this.$store.state.spiner=!0,this.$store.state.user.model.id_entitie=e.data[0].id_entitie,this.$store.state.user.model.address=e.data[0].address,this.$store.state.user.model.birthday=e.data[0].birthday,this.$store.state.user.model.estadoflag=e.data[0].estadoflag,this.$store.state.user.model.id_city=e.data[0].id_city,this.$store.state.user.model.id_pais=e.data[0].id_pais,this.$store.state.user.model.id_sex=e.data[0].id_sex,this.$store.state.user.model.id_state=e.data[0].id_state,this.$store.state.user.model.id_town=e.data[0].id_town,this.$store.state.user.model.names=e.data[0].names,this.$store.state.user.model.second_surname=e.data[0].second_surname,this.$store.state.user.model.socialprincipal=e.data[0].socialprincipal,this.$store.state.user.model.socialsecundary=e.data[0].socialsecundary,this.$store.state.user.model.surname=e.data[0].surname,await this._getState(e.data[0].id_pais),await this._getCity(e.data[0].id_state),await this._getTown(e.data[0].id_city),this.$store.state.spiner=!1),t.isDismissed&&(this.$store.state.user.model.document="")}),this.$store.state.spiner=!1}},async validateDocument(){var e={method:"get",url:"https://api.agentedecargaonline.com/validar__nuevo_documento_enterprise?id_branch="+JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch+"&id_document="+this.$store.state.enterprises.model.id_document+"&document="+encodeURIComponent(this.$store.state.enterprises.model.document),headers:{"Content-Type":"application/json","auth-token":sessionStorage.getItem("auth-token")}};await D()(e).then(e=>{let t=e.data;t.estadoflag?this.errorDocument="":(this.errorDocument=t.mensaje,this.$store.state.enterprises.model.document="")}).catch(e=>{console.log("Error al obtener los datos:",e)})},async uploadFile(){this.msgfile="",this.errfile="",this.payfile&&(this.loadingFile=!0,this.payfile.size>2097152?(this.loadingFile=!1,this.errfile="El archivo es demasiado grande. El tamaño máximo es 2 MB."):(await this._uploadFile(this.payfile),this.loadingFile=!1,this.$store.state.files.payPath?this.msgfile="Archivo cargado":this.errfile="Comuniquese con el admistrador"))},updateStatus(e){this.$store.state.enterprises.model.status=e?1:0}},watch:{"$store.state.files.payPath":{handler(e,t){e&&(this.$store.state.enterprises.model.id_logo=e)},immediate:!0}},computed:{...Object(E["c"])(["itemsDocumentsPais","itemsPais","itemsState","itemsCity","itemsTown"])}},P=q,O=s("2877"),R=Object(O["a"])(P,y,x,!1,null,null,null);t["default"]=R.exports},ca71:function(e,t,s){}}]);