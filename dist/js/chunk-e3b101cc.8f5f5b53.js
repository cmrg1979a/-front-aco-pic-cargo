(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e3b101cc"],{"211c":function(t,a,e){},4024:function(t,a,e){"use strict";e("211c")},"8fd8":function(t,a,e){"use strict";e.r(a);var s=e("ac7c"),i=e("62ad"),o=e("a523"),l=e("0fd9"),r=e("1f4f"),c=function(){var t=this,a=t._self._c;return a(o["a"],{attrs:{fluid:""}},[a("h1",[t._v("Comparativa de Costos")]),a(l["a"],[a(i["a"],{attrs:{cols:"12"}},[a(r["a"],{staticClass:"elevation-1 my-7",attrs:{dense:""}},[a("thead",[a("tr",t._l(t.headers,(function(e,s){return a("th",{key:s,staticClass:"centrado"},[t._v(" "+t._s(e.text)+" ")])})),0)]),a("tbody",t._l(t.opcionesSeleccionadas,(function(e,i){return a("tr",{key:i},[a("td",[t._v("Opción - "+t._s(e.nro_propuesta))]),a("td",[t._v(t._s(e.proveedor))]),t.flete?a("td",{staticClass:"centrado"},[t._v(" "+t._s(e.flete)+" ")]):t._e(),t.origen?a("td",{staticClass:"centrado"},[t._v(" "+t._s(e.origen)+" ")]):t._e(),t.local?a("td",{staticClass:"centrado"},[t._v(" "+t._s(e.local)+" ")]):t._e(),t.aduana?a("td",{staticClass:"centrado"},[t._v(" "+t._s(e.aduana)+" ")]):t._e(),t.almacen?a("td",{staticClass:"centrado"},[t._v(" "+t._s(e.almacen)+" ")]):t._e(),t.gastostercero?a("td",{staticClass:"centrado"},[t._v(" "+t._s(e.gastostercero)+" ")]):t._e(),a("td",{staticClass:"totalClass"},[t._v(t._s(e.total))]),a("td",{staticClass:"centrado"},[t._v(t._s(e.tiempo_transito)+" días")]),a("td",[a(s["a"],{staticClass:"mx-auto",attrs:{label:"",disabled:""},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"opcion.selected"}})],1)])})),0)])],1)],1)],1)},d=[],n=(e("14d9"),e("e9f5"),e("910d"),e("7d54"),e("a732"),e("54e1")),u=e("3d20"),h=e.n(u),p={mixins:[n["a"]],data(){return{loadingTable:!1,headers:[],opcionesSeleccionadas:[],resumenOpcion:{flete:0,origen:0,gasto:0,aduana:0,almacen:0,gastostercero:0},flete:!1,origen:!1,local:!1,aduana:!1,almacen:!1,gastostercero:!1}},async mounted(){await this.calcularTotalesOpciones(),setTimeout(async()=>{await this.agregarFilasAlHeader()},120)},methods:{regregar(){h.a.fire({width:1e3,icon:"question",html:`<h1>¿Desea regresar a la OPCIÓN - COSTOS ${this.$store.state.aduana.opcionCostos.length}?<h1>`,confirmButtonColor:"green",showCancelButton:!0,cancelButtonColor:"red",confirmButtonText:"<h1>Si, volver</h1>",cancelButtonText:"<h1>Cancelar</h1>",showCloseButton:!0,allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(t=>{t.isConfirmed&&(this.$store.state.aduana.tab=2)})},bloquearSeleccionada(t){return 1==this.$store.state.aduana.opcionCostos.length||(!(!t.selected||1!=this.$store.state.aduana.opcionCostos.filter(t=>t.selected).length)||void 0)},agregarFilasAlHeader(){this.headers=[{text:"Tarifa de Costos",value:"tarifa"},{text:"Proveedor Flete",value:"proveedor"}],this.opcionesSeleccionadas.some(t=>parseFloat(t.flete)>0)&&this.headers.push({text:this.$store.state.aduana.listTipoCostos.filter(t=>"FL"==t.codigo)[0].name,value:"flete"}),this.opcionesSeleccionadas.some(t=>t.flete!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.aduana.listTipoCostos.filter(t=>"FL"==t.codigo)[0].name,value:"flete",cellClass:"centrado"}),this.flete=!0),this.opcionesSeleccionadas.some(t=>t.origen!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.aduana.listTipoCostos.filter(t=>"OR"==t.codigo)[0].name,value:"origen"}),this.origen=!0),this.opcionesSeleccionadas.some(t=>t.local!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.aduana.listTipoCostos.filter(t=>"LO"==t.codigo)[0].name,value:"local"}),this.local=!0),this.opcionesSeleccionadas.some(t=>t.aduana!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.aduana.listTipoCostos.filter(t=>"AD"==t.codigo)[0].name,value:"aduana"}),this.aduana=!0),this.opcionesSeleccionadas.some(t=>t.almacen!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.aduana.listTipoCostos.filter(t=>"AL"==t.codigo)[0].name,value:"almacen"}),this.almacen=!0),this.opcionesSeleccionadas.some(t=>t.gastostercero!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.aduana.listTipoCostos.filter(t=>"GT"==t.codigo)[0].name,value:"gastostercero"}),this.gastostercero=!0),this.headers.push({text:"TOTAL",value:"total"}),this.headers.push({text:"TIEMPO EN TRÁNSITO",value:"tiempo_transito"}),this.headers.push({text:"SELECCIONE",value:"selected"})},continuar(){this.$store.state.aduana.tab=2},async calcularTotalesOpciones(){this.opcionesSeleccionadas=[],this.loadingTable=!0,this.$store.state.aduana.opcionCostos.forEach(t=>{let a=t.listCostos.some(t=>1==t.esopcionflag&&4==t.code_cost)?t.listCostos.filter(t=>1==t.esopcionflag&&4==t.code_cost)[0].id_proveedor:"",e=a?this.$store.state.provedores.filter(t=>t.id==a)[0].namelong:"";setTimeout(async()=>{await this.calcTotales(t.listCostos),t.proveedor=e,t.flete=this.resumenOpcion.flete?this.currencyFormat(this.resumenOpcion.flete):this.currencyFormat(0),t.origen=this.resumenOpcion.origen?this.currencyFormat(this.resumenOpcion.origen):this.currencyFormat(0),t.local=this.resumenOpcion.gasto?this.currencyFormat(this.resumenOpcion.gasto):this.currencyFormat(0),t.aduana=this.resumenOpcion.aduana?this.currencyFormat(this.resumenOpcion.aduana):this.currencyFormat(0),t.almacen=this.resumenOpcion.almacen?this.currencyFormat(this.resumenOpcion.almacen):this.currencyFormat(0),t.gastostercero=this.resumenOpcion.gastostercero?this.currencyFormat(this.resumenOpcion.gastostercero):this.currencyFormat(0),t.total=this.currencyFormat(parseFloat(this.resumenOpcion.flete?this.resumenOpcion.flete:0)+parseFloat(this.resumenOpcion.origen?this.resumenOpcion.origen:0)+parseFloat(this.resumenOpcion.gasto?this.resumenOpcion.gasto:0)+parseFloat(this.resumenOpcion.aduana?this.resumenOpcion.aduana:0)+parseFloat(this.resumenOpcion.almacen?this.resumenOpcion.almacen:0)+parseFloat(this.resumenOpcion.gastostercero?this.resumenOpcion.gastostercero:0)),this.opcionesSeleccionadas.push(t)},100)}),this.loadingTable=!1},async calcTotales(t){await this.calcularTotalesFlete(t),await this.calcularTotalesNoFlete(t)},calcularTotalesFlete(t){this.totalOption=0,this.resumenOpcion={flete:0,origen:0,gasto:0,aduana:0,almacen:0,gastostercero:0},this.isFlete(t)&&t.filter(t=>1==t.esfleteflag&&1==t.status&&1==t.esopcionflag).forEach(t=>{this.isNotPorcentaje(t,t.id_multiplicador)?this.resumenOpcion.flete+=(this.$store.state.aduana.listMultiplicador.filter(a=>a.id==t.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(a=>a.id==t.id_multiplicador)[0].valor:0)*t.costounitario*this.calcularFac(this.$store.state.aduana.listMultiplicador.filter(a=>a.id==t.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(a=>a.id==t.id_multiplicador)[0].code:"N",this.$store.state.aduana.datosPrincipales.volumen,this.$store.state.aduana.datosPrincipales.peso,this.$store.state.aduana.datosPrincipales.containers,this.$store.state.aduana.datosPrincipales.amount):this.resumenOpcion.flete+=this.calcularValor(this.$store.state.aduana.datosPrincipales.amount,this.$store.state.aduana.totalFlete,this.$store.state.aduana.listMultiplicador.filter(a=>a.id==t.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(a=>a.id==t.id_multiplicador)[0].code:"",this.$store.state.aduana.listMultiplicador.some(a=>a.id==t.id_multiplicador&&(14==a.code||13==a.code||5==a.code))?this.$store.state.aduana.listMultiplicador.some(a=>a.id==t.id_multiplicador&&(14==a.code||13==a.code))?t.cif:t.seguro:0)})},calcularTotalesNoFlete(t){this.resumenOpcion={flete:this.resumenOpcion.flete,origen:0,gasto:0,aduana:0,almacen:0,gastostercero:0},t.filter(t=>1==t.status&&1==t.esopcionflag).forEach(a=>{this.isOrigen(t)&&1==a.esorigenflag&&(this.isNotPorcentaje(a,a.id_multiplicador)?this.resumenOpcion.origen+=(this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].valor:0)*a.costounitario*this.calcularFac(this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].code:"N",this.$store.state.aduana.datosPrincipales.volumen,this.$store.state.aduana.datosPrincipales.peso,this.$store.state.aduana.datosPrincipales.containers,this.$store.state.aduana.datosPrincipales.amount):this.resumenOpcion.origen+=this.calcularValor(this.$store.state.aduana.datosPrincipales.amount,this.$store.state.aduana.totalFlete,this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].code:"",this.$store.state.aduana.listMultiplicador.some(t=>t.id==a.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.aduana.listMultiplicador.some(t=>t.id==a.id_multiplicador&&(14==t.code||13==t.code))?a.cif:a.seguro:0)),this.isLocal(t)&&a.eslocalflag&&(this.isNotPorcentaje(a,a.id_multiplicador)?this.resumenOpcion.gasto+=(this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].valor:0)*a.costounitario*this.calcularFac(this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].code:"N",this.$store.state.aduana.datosPrincipales.volumen,this.$store.state.aduana.datosPrincipales.peso,this.$store.state.aduana.datosPrincipales.containers,this.$store.state.aduana.datosPrincipales.amount):this.resumenOpcion.gasto+=this.calcularValor(this.$store.state.aduana.datosPrincipales.amount,this.$store.state.aduana.totalFlete,this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].code:"",this.$store.state.aduana.listMultiplicador.some(t=>t.id==a.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.aduana.listMultiplicador.some(t=>t.id==a.id_multiplicador&&(14==t.code||13==t.code))?a.cif:a.seguro:0)),this.isAduana(t)&&1==a.esaduanaflag&&(this.isNotPorcentaje(a,a.id_multiplicador)?this.resumenOpcion.aduana+=(this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].valor:0)*a.costounitario*this.calcularFac(this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].code:"N",this.$store.state.aduana.datosPrincipales.volumen,this.$store.state.aduana.datosPrincipales.peso,this.$store.state.aduana.datosPrincipales.containers,this.$store.state.aduana.datosPrincipales.amount):this.resumenOpcion.aduana+=this.calcularValor(this.$store.state.aduana.datosPrincipales.amount,this.$store.state.aduana.totalFlete,this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].code:"",this.$store.state.aduana.listMultiplicador.some(t=>t.id==a.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.aduana.listMultiplicador.some(t=>t.id==a.id_multiplicador&&(14==t.code||13==t.code))?a.cif:a.seguro:0)),this.isAlmacen(t)&&a.esalmacenflag&&(this.isNotPorcentaje(a,a.id_multiplicador)?this.resumenOpcion.almacen+=(this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].valor:0)*a.costounitario*this.calcularFac(this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].code:"N",this.$store.state.aduana.datosPrincipales.volumen,this.$store.state.aduana.datosPrincipales.peso,this.$store.state.aduana.datosPrincipales.containers,this.$store.state.aduana.datosPrincipales.amount):this.resumenOpcion.almacen+=this.calcularValor(this.$store.state.aduana.datosPrincipales.amount,this.$store.state.aduana.totalFlete,this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].code:"",this.$store.state.aduana.listMultiplicador.some(t=>t.id==a.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.aduana.listMultiplicador.some(t=>t.id==a.id_multiplicador&&(14==t.code||13==t.code))?a.cif:a.seguro:0)),this.isGastosTercero(t)&&a.esgastostercerosflag&&(this.isNotPorcentaje(a,a.id_multiplicador)?this.resumenOpcion.gastostercero+=(this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].valor:0)*a.costounitario*this.calcularFac(this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].code:"N",this.$store.state.aduana.datosPrincipales.volumen,this.$store.state.aduana.datosPrincipales.peso,this.$store.state.aduana.datosPrincipales.containers,this.$store.state.aduana.datosPrincipales.amount):this.resumenOpcion.gastostercero+=this.calcularValor(this.$store.state.aduana.datosPrincipales.amount,this.$store.state.aduana.totalFlete,this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador).length>0?this.$store.state.aduana.listMultiplicador.filter(t=>t.id==a.id_multiplicador)[0].code:"",this.$store.state.aduana.listMultiplicador.some(t=>t.id==a.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.aduana.listMultiplicador.some(t=>t.id==a.id_multiplicador&&(14==t.code||13==t.code))?a.cif:a.seguro:0))})},isFlete(t){let a=t.some(t=>1==t.esfleteflag&&1==t.status);return a},isOrigen(t){let a=t.some(t=>1==t.esorigenflag&&1==t.status);return a},isLocal(t){let a=t.some(t=>1==t.eslocalflag&&1==t.status);return a},isAduana(t){let a=t.some(t=>1==t.esaduanaflag&&1==t.status);return a},isAlmacen(t){let a=t.some(t=>1==t.esalmacenflag&&1==t.status);return a},isGastosTercero(t){let a=t.some(t=>1==t.esgastostercerosflag&&1==t.status);return a},isConfeccion(t){return 33==t},montoConfeccion(t){let a=0;if(33==t.code_cost){let t=this.$store.state.aduana.datosPrincipales.amount,e=parseFloat(t)+parseFloat(this.$store.state.aduana.totalFlete)+.01*(parseFloat(t)+parseFloat(this.$store.state.aduana.totalFlete));e<5e3&&(a=50),e>=5e3&&e<1e4&&(a=80),e>=1e4&&(a=80+parseFloat(.0025*e))}return t.costounitario=parseFloat(a).toFixed(2),this.currencyFormat(a)},isITBM(t){return 38==t},montoITBM(t){let a=0,e=[29,36,41,68];if(38==t.code_cost){let t=data.filter(t=>e.includes(t.code_cost));t.forEach(t=>{a+=parseFloat((this.$store.state.aduana.listMultiplicador.some(a=>a.id==t.id_multiplicador)?this.$store.state.aduana.listMultiplicador.filter(a=>a.id==t.id_multiplicador)[0].valor:0)*t.costounitario*this.calcularFac(this.$store.state.aduana.listMultiplicador.some(a=>a.id==t.id_multiplicador)?this.$store.state.aduana.listMultiplicador.filter(a=>a.id==t.id_multiplicador)[0].code:"N",this.$store.state.aduana.datosPrincipales.volumen,this.$store.state.aduana.datosPrincipales.peso,this.$store.state.aduana.datosPrincipales.containers,this.$store.state.aduana.datosPrincipales.amount))})}return t.costounitario=parseFloat(.07*a).toFixed(2),this.currencyFormat(parseFloat(.07*a).toFixed(2))},isNotaCredito(t){return 69==t},montoNotaCredito(t){let a=0,e=[33];if(69==t.code_cost){let t=data.filter(t=>e.includes(t.code_cost));t.forEach(t=>{a=t.costounitario})}return t.costounitario=-1*parseFloat(.5*a).toFixed(2),this.currencyFormat(-1*parseFloat(.5*a).toFixed(2))},isNotPorcentaje(t,a){let e=[5,13,14],s=this.$store.state.aduana.listMultiplicador.some(t=>t.id==a&&e.includes(t.code));return!s},abrirModal(){this.dialog=!this.dialog,this.limpiar()}},watch:{async actualizarComparativa(){await this.calcularTotalesOpciones(),setTimeout(async()=>{await this.agregarFilasAlHeader()},1e3)}},computed:{actualizarComparativa:{get(){return this.$store.state.aduana.actualizarComparativa},set(t){return this.$store.state.aduana.actualizarComparativa=actualizarComparativa}}}},m=p,f=(e("4024"),e("2877")),g=Object(f["a"])(m,c,d,!1,null,"30e93f68",null);a["default"]=g.exports}}]);