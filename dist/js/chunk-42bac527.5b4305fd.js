(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42bac527"],{"057e":function(t,e,a){"use strict";a("4752")},"1d0e":function(t,e,a){"use strict";a("bdb8")},"1d64":function(t,e,a){"use strict";a.r(e);var s=a("8336"),o=a("b0af"),i=a("99d9"),r=a("62ad"),n=a("a523"),c=a("8fea"),d=a("169a"),l=a("0789"),u=a("4bd4"),h=a("132d"),_=a("8860"),m=a("da13"),p=a("5d23"),g=a("e449"),$=a("0fd9"),f=a("2fa4"),v=function(){var t=this,e=t._self._c;return e(u["a"],{ref:"formControlHouse",attrs:{readonly:t.formControlHouseReadonly}},[e(n["a"],{attrs:{fluid:""}},[e($["a"],[e(r["a"],{attrs:{cols:"12",md:"4"}},[e(o["a"],[e(i["c"],[e("dataGen")],1)],1),e(o["a"],{staticClass:"mt-5"},[e(i["c"],[e("dataEmbar",{attrs:{isFormActionsDisabled:t.formControlHouseReadonly}})],1)],1),e($["a"],{staticClass:"mt-2"},["controlHouseVer"!=t.$route.name?[e(r["a"],{attrs:{cols:"4",md:"4"}},[e(s["a"],{attrs:{color:"success",block:"",dark:"",small:"",loading:t.loadingBotonGuardarHouse},on:{click:function(e){return t._setHouseEdit()}}},[t._v("GUARDAR CAMBIOS ")])],1),e(r["a"],{attrs:{cols:"4",md:"4"}},[e(s["a"],{attrs:{color:"red",block:"",dark:"",small:"",loading:t.loadingBotonEliminarHouse},on:{click:function(e){return t.eliminarHouse()}}},[t._v(" ELIMINAR ")])],1)]:t._e(),"controlHouseEditar"==t.$route.name||"controlHouseVer"==t.$route.name?[e(r["a"],{attrs:{cols:"4",md:"4"}})]:t._e()],2)],1),e(r["a"],{attrs:{cols:"12",md:"4"}},[e(o["a"],[e(i["c"],[e("services",{attrs:{isFormActionsDisabled:t.formControlHouseReadonly}})],1)],1)],1),e(r["a"],{attrs:{cols:"12",md:"4"}},[e(o["a"],[e(i["c"],[e("Bitacora",{attrs:{isFormActionsDisabled:t.formControlHouseReadonly}})],1)],1)],1)],1)],1),e("div",{staticStyle:{position:"fixed",bottom:"16px",left:"16px"}},[e(l["c"],[e(s["a"],{attrs:{fab:"",large:"",dark:"",bottom:"",left:"",color:"info"},on:{click:function(e){return t.irAVerMaster()}}},[e(h["a"],[t._v(" mdi-pencil ")])],1)],1)],1),e("div",{staticClass:"text-center"},[e(g["a"],{attrs:{top:"","offset-y":"","content-class":"elevation-0"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:o}){return[e(s["a"],t._g(t._b({attrs:{color:"success",dark:!t.formControlHouseReadonly,fixed:"",bottom:"",right:"",disabled:t.formControlHouseReadonly,loading:t.loadingBotonNotificaciones},on:{click:t.validarMenuNotificaciones}},"v-btn",o,!1),a),[e(h["a"],{staticStyle:{transform:"rotate(-45deg)"},attrs:{left:"",color:"black"}},[t._v(" mdi-send ")]),t._v(" NOTIFICACIONES ")],1)]}}])},[e(_["a"],{directives:[{name:"show",rawName:"v-show",value:t.displayMenuNotificaciones,expression:"displayMenuNotificaciones"}],attrs:{color:"transparent"}},t._l(t.getItemsNotificaciones(),(function(a,o){return e(m["a"],{key:o,staticClass:"px-0"},[e(p["c"],[e(s["a"],{attrs:{depressed:"",block:"",color:"primary"},on:{click:function(e){return t.sendNotificacion(a)}}},[t._v(" "+t._s(a.title)+" ")])],1)],1)})),1)],1)],1),e(d["a"],{attrs:{persistent:"",width:"70%"},model:{value:t.abrirModalCuentasNotificacion,callback:function(e){t.abrirModalCuentasNotificacion=e},expression:"abrirModalCuentasNotificacion"}},[e(o["a"],[e(i["d"],{attrs:{"primary-title":""}},[t._v(" Seleccione las cuentas a utilizar ")]),e(i["c"],[e("p",{staticClass:"red--text"},[t._v(t._s(t.errorCuentas))]),e(c["a"],{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.$store.state.cuentas_pic,"item-key":"id","show-select":""},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),e(i["a"],[e(f["a"]),e(s["a"],{attrs:{color:"success",loading:t.loadingBotonNotificaciones},on:{click:function(e){return t.enviarNotificacion(t.notificacion)}}},[t._v("Enviar Notificación")]),e(s["a"],{attrs:{color:"danger"},on:{click:function(e){t.abrirModalCuentasNotificacion=!t.abrirModalCuentasNotificacion}}},[t._v("Cancelar")])],1)],1)],1)],1)},b=[],k=(a("14d9"),a("e9f5"),a("910d"),a("ab43"),a("a732"),a("c6a6")),y=a("8654"),S=function(){var t=this,e=t._self._c;return e("div",[e("h3",[t._v("Datos y Servicios a Realizar")]),e($["a"],{attrs:{dense:""}},[e(r["a"],{attrs:{cols:"12",md:"4"}},[e(y["a"],{attrs:{readonly:"",label:"N° de Expedientes Master"},model:{value:t.$store.state.houses.house.code_master,callback:function(e){t.$set(t.$store.state.houses.house,"code_master",e)},expression:"$store.state.houses.house.code_master"}})],1),e(r["a"],{attrs:{cols:"12",md:"4"}},[e(k["a"],{attrs:{label:"Quote Asociado al House",items:t.$store.state.pricing.listQuotes,"item-text":"code","item-value":"id","search-input":t.searchHouseCotizacion,clearable:""},on:{"update:searchInput":function(e){t.searchHouseCotizacion=e},"update:search-input":function(e){t.searchHouseCotizacion=e},change:function(e){return t.asignarDatos()}},model:{value:t.$store.state.house_cotizacion,callback:function(e){t.$set(t.$store.state,"house_cotizacion",e)},expression:"$store.state.house_cotizacion"}})],1),e(r["a"],{attrs:{cols:"12",md:"4"}},[e(y["a"],{attrs:{label:"Modality",readonly:""},model:{value:t.$store.state.houses.house.modality,callback:function(e){t.$set(t.$store.state.houses.house,"modality",e)},expression:"$store.state.houses.house.modality"}})],1),e(r["a"],{attrs:{cols:"12",md:"4"}},[e(y["a"],{attrs:{readonly:"",label:"Tipo de Embarque","return-object":""},model:{value:t.$store.state.houses.house.shipment,callback:function(e){t.$set(t.$store.state.houses.house,"shipment",e)},expression:"$store.state.houses.house.shipment"}})],1),e(r["a"],{attrs:{cols:"12",md:"4"}},[e(y["a"],{attrs:{label:"Incoterms",readonly:""},model:{value:t.$store.state.houses.house.incoterms,callback:function(e){t.$set(t.$store.state.houses.house,"incoterms",e)},expression:"$store.state.houses.house.incoterms"}})],1),e(r["a"],{attrs:{cols:"12",md:"6"}},[e(y["a"],{attrs:{label:"Origen",readonly:""},on:{"update:search-input":t.recargarPuertoOrigen},model:{value:t.$store.state.houses.house.port_begin,callback:function(e){t.$set(t.$store.state.houses.house,"port_begin",e)},expression:"$store.state.houses.house.port_begin"}})],1),e(r["a"],{attrs:{cols:"12",md:"6"}},[e(y["a"],{attrs:{label:"Destino",readonly:""},on:{"update:search-input":t.recargarPuertoDestino},model:{value:t.$store.state.houses.house.port_end,callback:function(e){t.$set(t.$store.state.houses.house,"port_end",e)},expression:"$store.state.houses.house.port_end"}})],1)],1),e(d["a"],{attrs:{"max-width":"400"},model:{value:t.$store.state.modalServices_manualMode,callback:function(e){t.$set(t.$store.state,"modalServices_manualMode",e)},expression:"$store.state.modalServices_manualMode"}},[e(o["a"],[e(i["d"],{staticClass:"text-h6"},[t._v(" Agregar Servicio Manual "),e(f["a"]),e(s["a"],{attrs:{icon:"",color:"red"},on:{click:function(e){t.$store.state.modalServices_manualMode=!t.$store.state.modalServices_manualMode}}},[e(h["a"],[t._v("mdi-close")])],1)],1),e(i["c"],[e(u["a"],{ref:"formNewService"},[e(n["a"],[e($["a"],[e(r["a"],{attrs:{cols:"12"}},[e(k["a"],{attrs:{items:t.$store.state.itemsBegEndList,"item-text":"name","item-value":"id",label:"Ubicación/Tramo",rules:[t=>!!t||"Dato Requerido"]},model:{value:t.house_service_id_begend,callback:function(e){t.house_service_id_begend=e},expression:"house_service_id_begend"}})],1),e(r["a"],{attrs:{cols:"12"}},[e(y["a"],{attrs:{label:"Nombre Servicio",rules:[t=>!!t||"Dato Requerido"]},model:{value:t.house_service_name,callback:function(e){t.house_service_name=e},expression:"house_service_name"}})],1)],1)],1)],1)],1),e(i["a"],[e(f["a"]),e(s["a"],{attrs:{color:"red",rounded:"",dark:""},on:{click:t.cancelNewService}},[t._v("CANCELAR ")]),e(s["a"],{staticClass:"ml-2",attrs:{color:"success",rounded:"",dark:""},on:{click:t.setNewService}},[t._v("ACEPTAR ")])],1)],1)],1)],1)},C=[],w=(a("f665"),a("2f62")),x=a("bc3a"),B=a.n(x),H={name:"dataGen",data(){return{searchHouseCotizacion:"",house_service_id_begend:"",house_service_name:"",id_transport:null}},async mounted(){this.$store.state.spiner=!0,this.$store.state.spiner=!1,await this._getBegEndList(),this.$store.state.spiner=!1,this.$forceUpdate()},computed:{...Object(w["c"])(["itemsModality","itemsShipment","itemsPortBegin","itemsPortEnd","itemsIncoterms","itemsServicesBegin","itemsBitacoraList","drawer"])},methods:{...Object(w["b"])(["_getModality","_getShipment","_getPortBegin","_getPortEnd","_getIncoterms","_getServicesBegin","_getBitacoraList","_getBitacoraLineal","_getnroMaster","getQuoteDataNoAsignadaHouse","_getnroMaster","_getAgents","_getConsigners","_getNotify","_getColoaders","_getAirlines","_getNavieras","_getMotonave","_getContainers","_getFleteCon","_getCoinsList","_getHouseContainers","_getProveedor","_getHouseContainers","getQuoteNoAsignadoHouse","_getBegEndList"]),async asignarDatos(){if(this.$store.state.house_cotizacion){let t=0;if(this.$store.state.spiner=!0,await this.getQuoteDataNoAsignadaHouse({id_quote:this.$store.state.house_cotizacion}),Object.keys(this.$store.state.pricing.dataQuote).length&&this.$store.state.pricing.dataQuote.id_modality==this.$store.state.copy_house.id_modality&&this.$store.state.pricing.dataQuote.id_shipment==this.$store.state.copy_house.id_shipment&&this.$store.state.pricing.dataQuote.id_port_begin==this.$store.state.copy_house.id_port_begin&&this.$store.state.pricing.dataQuote.id_port_end==this.$store.state.copy_house.id_port_end){this.$store.state.house_sentido=this.$store.state.pricing.dataQuote.id_modality,this.$store.state.house_id_trasnport=this.$store.state.pricing.dataQuote.id_shipment,this.$store.state.house_id_consigner=this.$store.state.pricing.dataQuote.id_cliente,this.$store.state.house_incoterms=this.$store.state.pricing.dataQuote.id_incoterms,"object"===typeof this.$store.state.house_id_trasnport?t=this.$store.state.house_id_trasnport.id_transport:"number"===typeof this.$store.state.house_id_trasnport&&(t=this.$store.state.itemsShipment.filter(t=>t.id==this.$store.state.pricing.dataQuote.id_shipment)[0].id_transport),this.$store.state.house_bultos=this.$store.state.pricing.dataQuote.nro_bultos,this.$store.state.house_peso=this.$store.state.pricing.dataQuote.peso,this.$store.state.house_volumen=this.$store.state.pricing.dataQuote.volumen,this.$store.state.house_monto=this.$store.state.pricing.dataQuote.monto,await this._activePort(t),this.$store.state.house_origen=this.$store.state.pricing.dataQuote.id_port_begin,this.$store.state.house_destino=this.$store.state.pricing.dataQuote.id_port_end;let e=[],a=[],s=[],o=[],i=[];this.$store.state.pricing.dataQuote.lstservices.filter((t,e)=>{const r=t.codebegend.toUpperCase();switch(r){case"OR":a.push(t);break;case"FL":s.push(t);break;case"DE":o.push(t);break;case"OP":i.push(t);break}}),e=[].concat(a,s,o,i);let r=[],n=null;e.map((t,e)=>{const a={...t,status:0};"IMPUESTOS"==t.nameservice.toUpperCase()?n=a:r.push(a)}),null!==n&&r.push(n),this.$store.state.itemsHouseServices=r}else this.$swal({icon:"error",html:"<b>El quote que está intentando agregar no tiene el mismo Sentido, Tipo de Embarque, Origen, Destino que el expediente máster. Verifique</b>",showConfirmButton:!0,confirmButtonText:"Aceptar",confirmButtonColor:"#4CAF50",allowOutsideClick:!1}),this.$store.state.house_cotizacion="",this.searchHouseCotizacion="";this.$store.state.spiner=!1}},async _validaData(){var t=this;if(t.$route.params.id){var e={id:t.$route.params.id,id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch},a={method:"get",url:"https://api.agentedecargaonline.com/house_ver",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},params:e};await B()(a).then((async function(e){sessionStorage.setItem("auth-token",e.data.token),t.$store.state.copy_house=e.data.data[0],t.$store.state.dataHouse_transporte=e.data.data[0].id_transport,t.$store.state.house_origen=e.data.data[0].id_port_begin,t.$store.state.house_destino=e.data.data[0].id_port_end,t.$store.state.house_sentido=e.data.data[0].id_modality,t.$store.state.house_id_trasnport=e.data.data[0].id_shipment,t.$store.state.house_incoterms=e.data.data[0].id_incoterms,t.$store.state.house_cotizacion=e.data.data[0].id_cot,await t._getPortBegin({id_transport:e.data.data[0].id_transport,id:e.data.data[0].id_port_begin}),await t._getPortEnd({id_transport:e.data.data[0].id_transport,id:e.data.data[0].id_port_end}),t.$store.state.house_origen=e.data.data[0].id_port_begin,t.$store.state.house_destino=e.data.data[0].id_port_end,t.$store.state.house_expediente=e.data.data[0].code_house,t.$store.state.house_master_expediente=e.data.data[0].code_master,t.$store.state.house_id_agente=e.data.data[0].id_proveedor,t.$store.state.house_id_consigner=e.data.data[0].id_consigner,t.$store.state.house_id_notify=e.data.data[0].id_notify,t.$store.state.house_id_airlines=e.data.data[0].id_aerolinea,t.$store.state.house_id_coloader=e.data.data[0].id_coloader,t.$store.state.house_id_naviera=e.data.data[0].id_naviera,t.$store.state.house_blmaster=e.data.data[0].nro_hbl,t.$store.state.house_id_motonave=e.data.data[0].id_motonave,t.$store.state.house_viaje=e.data.data[0].nro_viaje,t.$store.state.house_bultos=e.data.data[0].bultos,t.$store.state.house_peso=e.data.data[0].peso,t.$store.state.house_volumen=e.data.data[0].volumen,t.$store.state.house_id_condicion=e.data.data[0].id_conditions,t.$store.state.house_id_coins=e.data.data[0].id_moneda,t.$store.state.house_monto=e.data.data[0].monto,t.$store.state.house_id=e.data.data[0].id,t.$store.state.house_id_consigner_real=e.data.data[0].id_consigner_real,await t._getServicesBegin(),t.$store.state.house_enlace_tracking=e.data.data[0].token_rastreo?"https://aco.agentedecargaonline.com/tracking/"+e.data.data[0].token_rastreo:""})).catch((function(t){console.log(t)}))}},async _activePort(t){this.id_transport=t,await this._getPortBegin({id_transport:t}),await this._getPortEnd({id_transport:t}),1==this.$store.state.master_id_trasnport.id?this.$store.state.embar_title_nacn="Aerolinea":2==this.$store.state.master_id_trasnport.id?this.$store.state.embar_title_nacn="Naviera":3==this.$store.state.master_id_trasnport.id?this.$store.state.embar_title_nacn="Coloader":this.$store.state.embar_title_nacn="Aerolinea/Coloader/Naviera"},_getDataService(){this._getServicesBegin()},setNewService(){var t=this;if(t.$refs.formNewService.validate()){const e=t.$store.state.itemsBegEndList.find(e=>e.id===t.house_service_id_begend)||{},a={id_begend:t.house_service_id_begend,namebegend:e.name,position_begend:e.position_begend,nameservice:t.house_service_name,status:0};let s=null,o=t.$store.state.itemsHouseServices.findIndex(t=>"IMPUESTOS"==t.nameservice.toUpperCase());-1!==o&&(s=t.$store.state.itemsHouseServices[o],t.$store.state.itemsHouseServices.splice(o,1)),t.$store.state.itemsHouseServices.push(a),null!==s&&t.$store.state.itemsHouseServices.push(s),t.$store.state.modalServices_manualMode=!1}t.$refs.formNewService.reset()},cancelNewService(){this.$refs.formNewService.reset(),this.$store.state.modalServices_manualMode=!this.$store.state.modalServices_manualMode},async recargarPuertoOrigen(t){await this._getPortBegin({id_transport:this.id_transport,id:this.$store.state.master_origen,search:t})},async recargarPuertoDestino(t){await this._getPortEnd({id_transport:this.id_transport,id:this.$store.state.master_destino,search:t})}},computed:{...Object(w["c"])(["dataHouse_transporte"])}},N=H,E=a("2877"),I=Object(E["a"])(N,S,C,!1,null,null,null),D=I.exports,A=a("1f4f"),O=function(){var t=this,e=t._self._c;return e("div",[e("h3",[t._v("Datos del Embarque")]),e($["a"],{attrs:{dense:""}},[e(r["a"],{attrs:{cols:"12",md:"6"}},[e(y["a"],{attrs:{label:"Proveedor",readonly:""},model:{value:t.$store.state.houses.house.proveedor,callback:function(e){t.$set(t.$store.state.houses.house,"proveedor",e)},expression:"$store.state.houses.house.proveedor"}})],1),e(r["a"],{attrs:{cols:"12",md:"6"}},[e(y["a"],{attrs:{label:"Consigne HBL",readonly:""},model:{value:t.$store.state.houses.house.consigner_real,callback:function(e){t.$set(t.$store.state.houses.house,"consigner_real",e)},expression:"$store.state.houses.house.consigner_real"}})],1),e(r["a"],{attrs:{cols:"12",md:"6"}},[e(y["a"],{attrs:{label:"Cliente HBL",readonly:""},model:{value:t.$store.state.houses.house.consigner,callback:function(e){t.$set(t.$store.state.houses.house,"consigner",e)},expression:"$store.state.houses.house.consigner"}})],1),e(r["a"],{attrs:{cols:"12",md:"6"}},[e(y["a"],{attrs:{label:"Notify HBL",readonly:""},model:{value:t.$store.state.houses.house.notify,callback:function(e){t.$set(t.$store.state.houses.house,"notify",e)},expression:"$store.state.houses.house.notify"}})],1),e(r["a"],{attrs:{cols:"12",md:"6"}},[e(y["a"],{attrs:{label:"Aerolinea",readonly:""},model:{value:t.$store.state.houses.house.aerolinea,callback:function(e){t.$set(t.$store.state.houses.house,"aerolinea",e)},expression:"$store.state.houses.house.aerolinea"}})],1),e(r["a"],{attrs:{cols:"12",md:"6"}},[e(y["a"],{attrs:{label:"Coloader",readonly:""},model:{value:t.$store.state.houses.house.coloader,callback:function(e){t.$set(t.$store.state.houses.house,"coloader",e)},expression:"$store.state.houses.house.coloader"}})],1),e(r["a"],{attrs:{cols:"12",md:"6"}},[e(y["a"],{attrs:{label:"Naviera",readonly:""},model:{value:t.$store.state.houses.house.naviera,callback:function(e){t.$set(t.$store.state.houses.house,"naviera",e)},expression:"$store.state.houses.house.naviera"}})],1),e(r["a"],{attrs:{cols:"12",md:"3"}},[e(y["a"],{attrs:{label:"N° BL House",readonly:""},model:{value:t.$store.state.houses.house.nro_hbl,callback:function(e){t.$set(t.$store.state.houses.house,"nro_hbl",e)},expression:"$store.state.houses.house.nro_hbl"}})],1),e(r["a"],{attrs:{cols:"12",md:"3"}},[e(y["a"],{attrs:{label:"Viaje",readonly:""},model:{value:t.$store.state.houses.house.nro_viaje,callback:function(e){t.$set(t.$store.state.houses.house,"nro_viaje",e)},expression:"$store.state.houses.house.nro_viaje"}})],1),e(r["a"],{attrs:{cols:"12",md:"6"}},[e(y["a"],{attrs:{label:"Motonave",readonly:""},model:{value:t.$store.state.houses.house.motonave,callback:function(e){t.$set(t.$store.state.houses.house,"motonave",e)},expression:"$store.state.houses.house.motonave"}})],1),e(r["a"],{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(y["a"],{attrs:{type:"number",label:"Bultos",readonly:""},model:{value:t.$store.state.houses.house.bultos,callback:function(e){t.$set(t.$store.state.houses.house,"bultos",e)},expression:"$store.state.houses.house.bultos"}})],1),e(r["a"],{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(y["a"],{attrs:{type:"number",suffix:"kg",label:"Peso",readonly:""},model:{value:t.$store.state.houses.house.peso,callback:function(e){t.$set(t.$store.state.houses.house,"peso",e)},expression:"$store.state.houses.house.peso"}})],1),e(r["a"],{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(y["a"],{attrs:{type:"number",suffix:"m3",label:"Volumen",readonly:""},model:{value:t.$store.state.houses.house.volumen,callback:function(e){t.$set(t.$store.state.houses.house,"volumen",e)},expression:"$store.state.houses.house.volumen"}})],1),e(r["a"],{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(y["a"],{attrs:{label:"Condición",readonly:""},model:{value:t.$store.state.houses.house.conditions,callback:function(e){t.$set(t.$store.state.houses.house,"conditions",e)},expression:"$store.state.houses.house.conditions"}})],1),e(r["a"],{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(y["a"],{attrs:{label:"Moneda",readonly:""},model:{value:t.$store.state.houses.house.moneda,callback:function(e){t.$set(t.$store.state.houses.house,"moneda",e)},expression:"$store.state.houses.house.moneda"}})],1),e(r["a"],{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(y["a"],{attrs:{label:"Monto",suffix:"USD",readonly:""},model:{value:t.$store.state.houses.house.monto,callback:function(e){t.$set(t.$store.state.houses.house,"monto",e)},expression:"$store.state.houses.house.monto"}})],1),2==t.$store.state.master_id_trasnport.id?e(r["a"],{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(k["a"],{attrs:{items:t.itemsContainers,"item-text":"name","item-value":"id","return-object":"",label:"Tipo de contenedor"},model:{value:t.$store.state.house_id_containers,callback:function(e){t.$set(t.$store.state,"house_id_containers",e)},expression:"$store.state.house_id_containers"}})],1):t._e(),2==t.$store.state.master_id_trasnport.id?e(r["a"],{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(y["a"],{attrs:{label:"N°. Contenedor"},model:{value:t.$store.state.house_nro_containers,callback:function(e){t.$set(t.$store.state,"house_nro_containers",e)},expression:"$store.state.house_nro_containers"}})],1):t._e(),2==t.$store.state.master_id_trasnport.id?e(r["a"],{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(y["a"],{attrs:{label:"N°. Precinto"},model:{value:t.$store.state.house_nro_precinto,callback:function(e){t.$set(t.$store.state,"house_nro_precinto",e)},expression:"$store.state.house_nro_precinto"}})],1):t._e(),2==t.$store.state.master_id_trasnport.id?e(r["a"],{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(y["a"],{attrs:{label:"Cant."},model:{value:t.$store.state.house_cantidad,callback:function(e){t.$set(t.$store.state,"house_cantidad",e)},expression:"$store.state.house_cantidad"}},[e(h["a"],{staticClass:"btn__add",attrs:{slot:"append",color:"green"},nativeOn:{click:function(e){return t._setHouseContainers(t.$store.state.house_id_containers.id,t.$store.state.house_id_containers.name,t.$store.state.house_nro_containers,t.$store.state.house_nro_precinto,t.$store.state.house_cantidad)}},slot:"append"},[t._v(" mdi-plus ")])],1)],1):t._e(),2==t.$store.state.master_id_trasnport.id?e(r["a"],{attrs:{cols:"12"}},[e(A["a"],{attrs:{"fixed-header":"",height:"180px"},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("Nombre")]),e("th",{staticClass:"text-left"},[t._v("N°. Contenedor")]),e("th",{staticClass:"text-left"},[t._v("N°. Precinto")]),e("th",{staticClass:"text-left"},[t._v("Cantidad")]),e("th",{staticClass:"text-left"},[t._v("Acción")])])]),e("tbody",t._l(t.$store.state.itemsHouseContainers,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.name))]),e("td",[t._v(t._s(a.nro_containers))]),e("td",[t._v(t._s(a.nro_precinto))]),e("td",[t._v(t._s(a.quantity))]),e("td",[e(h["a"],{staticClass:"btn__add",attrs:{dense:"",color:"red"},nativeOn:{click:function(e){return t._deleteContainers(a.id)}}},[t._v("mdi-delete")])],1)])})),0)]},proxy:!0}],null,!1,3760276406)})],1):t._e()],1)],1)},T=[],L={name:"dataEmbar",props:{isFormActionsDisabled:Boolean},data(){return{itemsAgente:[]}},async mounted(){this.limpiarData(),await this._getProveedor(),await this.cargarClientes(),await this._getProveedorRolShipper()},computed:{...Object(w["c"])(["itemsCoinsList","itemsAgents","itemsConsigners","itemsNotify","itemsColoaders","itemsAirlines","itemsNavieras","itemsMotonave","itemsContainers","itemsFleteCon","datanroMaster","itemsProveedorList"])},methods:{...Object(w["b"])(["_getnroMaster","_getAgents","_getConsigners","_getNotify","_getColoaders","_getAirlines","_getNavieras","_getMotonave","_getContainers","_getFleteCon","_getCoinsList","_getHouseContainers","_getProveedor","cargarClientes","_getProveedorRolShipper"]),cleanData(){this.$store.state.house_cantidad=""},_deleteContainers(t){var e=this,a={id:t},s={method:"post",url:"https://api.agentedecargaonline.com/deleteContainers",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:a};B()(s).then((function(t){200==t.data.status&&e._getHouseContainers()})).catch((function(t){console.log(t)}))},_setHouseContainers(t,e,a,s,o){var i=this,r={id_house:i.$route.params.id,id_containers:t,nro_containers:a,nro_precinto:s,quantity:o,status:1},n={method:"post",url:"https://api.agentedecargaonline.com/setHouseContainers",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:r};B()(n).then((function(t){200==t.data.status&&(i._getHouseContainers(),i.cleanData())})).catch((function(t){console.log(t)}))},async _validaData(){var t=this;t.$route.params.id&&await t._getHouseContainers()},_callModalEntitie(t){this.$store.state.id_role_actual=t,1==t?this.$store.state.modalAgente=!this.$store.state.modalAgente:11==t?this.$store.state.modalEntitie=!this.$store.state.modalEntitie:17==t?this.$store.state.modalColoader=!this.$store.state.modalColoader:2==t&&(this.$store.state.modalNaviera=!this.$store.state.modalNaviera)},_setDataContainers(t,e,a){this.$store.state.master_itemsContainers.push({id:t,name:e,nro_container:nrocontainer,nro_precinto:nroprecinto,cantidad:a})},_delContainers(t){this.$store.state.master_itemsContainers.splice(t,1)},limpiarData(){let t=this;t.$store.state.house_id_agente="",t.$store.state.house_id_consigner="",t.$store.state.house_id_notify="",t.$store.state.house_id_airlines="",t.$store.state.house_id_coloader="",t.$store.state.house_id_agente="",t.$store.state.house_id_naviera="",t.$store.state.house_blmaster="",t.$store.state.house_id_motonave="",t.$store.state.house_viaje="",t.$store.state.house_bultos="",t.$store.state.house_peso="",t.$store.state.house_volumen="",t.$store.state.house_id_condicion="",t.$store.state.house_id_coins="",t.$store.state.house_monto="",t.$store.state.house_id=""}}},M=L,j=(a("a091"),Object(E["a"])(M,O,T,!1,null,"b49461fc",null)),P=j.exports,F=a("b73d"),R=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"min-height":"620px"}},[e("h3",[t._v("Estatus del embarque")]),e(n["a"],{staticStyle:{padding:"0"}},[e($["a"],[e(r["a"],{attrs:{cols:"12"}},[e(A["a"],{attrs:{dense:"","fixed-header":"",height:"400px"},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("Grupo")]),e("th",{staticClass:"text-left"},[t._v("Nombre")]),e("th",{staticClass:"text-left"},[t._v("Comentario")]),e("th",{staticClass:"text-left"},[t._v("Fecha")]),e("th",{staticClass:"text-left"},[t._v("Visible/No Visible")])])]),e("tbody",t._l(t.$store.state.itemsBitacora,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.namemodule))]),e("td",[t._v(t._s(a.namebitacora))]),e("td",[t._v(t._s(a.comentario))]),e("td",[t._v(t._s(a.date))]),e("td",[e(F["a"],{attrs:{dense:"",readonly:"",color:"primary",disabled:t.isFormActionsDisabled},on:{click:function(e){return t._changeStatusVisibleBitacora(a)}},model:{value:a.visible_cliente,callback:function(e){t.$set(a,"visible_cliente",e)},expression:"item.visible_cliente"}})],1)])})),0)]},proxy:!0}])})],1)],1),e($["a"],{staticClass:"align-end"},[e(r["a"],{attrs:{cols:"6",offset:"6"}},[e(y["a"],{attrs:{label:"Tranking",readonly:"","hide-details":""},model:{value:t.$store.state.house_enlace_tracking,callback:function(e){t.$set(t.$store.state,"house_enlace_tracking",e)},expression:"$store.state.house_enlace_tracking"}},[e(h["a"],{staticClass:"btn_add",attrs:{slot:"append",color:"secondary"},nativeOn:{click:function(e){return t._copyEnlaceTracking(t.$store.state.house_enlace_tracking)}},slot:"append"},[t._v(" mdi-content-copy ")])],1)],1)],1)],1)],1)},U=[],z=(a("7d54"),a("ec26")),q={name:"bitacora",props:{isFormActionsDisabled:Boolean},data:()=>({date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),menu:!1,modal:!1,menu2:!1,loadingBotonBitacora:!1,loadingBotonTracking:!1,disabledBotonBitacora:!1}),computed:{isBotonTrackingDisabled:function(){return""!==this.$store.state.house_enlace_tracking&&null!==this.$store.state.house_enlace_tracking||this.isFormActionsDisabled},isBotonBitacoraDisabled:function(){return this.isFormActionsDisabled||this.disabledBotonBitacora}},async mounted(){await this._getComentariosPredefinidos(),await this._getHouseBitacora().then(()=>{this._setDefaultBitacora()})},methods:{...Object(w["b"])(["_getBitacoraLineal","_getHouseBitacora","_getComentariosPredefinidos"]),ObtenerComentariosPredifinidos(){let t=[];return this.$store.state.itemsComentariosPredefinidos.forEach(e=>{e.comentariousuado=this.$store.state.itemsBitacora.some(t=>t.comentario===e.comentario),t.push(e)}),t},cleanData(){this.$store.state.bitacora_id_bitacora="",this.$store.state.bitacora_comentario_predefinido="",this.$store.state.bitacora_comentario_flag=!1,this.$store.state.bitacora_comentario="",this.$store.state.bitacora_visible_cliente=!0},_validaData(){var t=this;t.$route.params.id},async _deleteBitacora(t){var e=this,a={id:t},s={method:"post",url:"https://api.agentedecargaonline.com/deleteBitacora",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:a};await B()(s).then((async function(t){sessionStorage.setItem("auth-token",t.data.token),200==t.data.status&&await e._getHouseBitacora().then(()=>{e._setDefaultBitacora()}),"401"==t.data.status&&Swal.fire({icon:"error",text:t.data.mensaje,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}).then(e=>{e.isConfirmed&&"401"==t.data.status&&(router.push({name:"Login"}),setTimeout(()=>{window.location.reload()},10))})})).catch((function(t){console.log(t)}))},async _changeStatusBitacora({id:t,status:e}){var a=this,s={id:t,status:e},o={method:"put",url:"https://api.agentedecargaonline.com/changeStatusBitacora",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:s};await B()(o).then((async function(t){sessionStorage.setItem("auth-token",t.data.token),200==t.data.status&&await a._getHouseBitacora(),"401"==t.data.status&&Swal.fire({icon:"error",text:t.data.mensaje,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}).then(e=>{e.isConfirmed&&"401"==t.data.status&&(router.push({name:"Login"}),setTimeout(()=>{window.location.reload()},10))})})).catch((function(t){console.log(t)}))},async _changeStatusVisibleBitacora({id:t,visible_cliente:e}){var a=this,s={id:t,visible:e},o={method:"put",url:"https://api.agentedecargaonline.com/changeStatusVisibleBitacora",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:s};await B()(o).then((async function(t){sessionStorage.setItem("auth-token",t.data.token),200==t.data.status&&await a._getHouseBitacora(),"401"==t.data.status&&Swal.fire({icon:"error",text:t.data.mensaje,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}).then(e=>{e.isConfirmed&&"401"==t.data.status&&(router.push({name:"Login"}),setTimeout(()=>{window.location.reload()},10))})})).catch((function(t){console.log(t)}))},_setDefaultBitacora(){var t=this;if(t.disabledBotonBitacora=!1,t.$store.state.itemsBitacora.length)if(t.$store.state.itemsBitacora.length<t.$store.state.itemsBitacoraLineal.length){const e=t.$store.state.itemsBitacora[t.$store.state.itemsBitacora.length-1];Object.keys(e).length&&(t.$store.state.bitacora_id_bitacora=e.id_bitacora+1)}else t.disabledBotonBitacora=!0;else t.$store.state.bitacora_id_bitacora=1},_handleFlagComentarioManual(){this.$store.state.bitacora_comentario_flag&&(this.$store.state.bitacora_comentario_predefinido=null)},async _setBitacora(){var t=this;if(t.$store.state.bitacora_id_bitacora){var e=!0;if(t.$store.state.itemsBitacora.length){const a=t.$store.state.itemsBitacora[t.$store.state.itemsBitacora.length-1];t.$store.state.bitacora_id_bitacora!=a.id_bitacora+1&&(e=!1)}else 1!=t.$store.state.bitacora_id_bitacora&&(e=!1);if(e)if(t.$store.state.bitacora_comentario_flag&&!t.$store.state.bitacora_comentario)t.$swal("","¡El comentario es requerido!","error");else{t.loadingBotonBitacora=!t.loadingBotonBitacora;var a={id_house:t.$route.params.id,id_bitacora:t.$store.state.bitacora_id_bitacora,id_comentario:t.$store.state.bitacora_comentario_flag?"":t.$store.state.bitacora_comentario_predefinido,comentario:t.$store.state.bitacora_comentario_flag?t.$store.state.bitacora_comentario:"",fecha:t.$store.state.bitacora_fecha,visible_cliente:t.$store.state.bitacora_visible_cliente},s={method:"post",url:"https://api.agentedecargaonline.com/setBitacora",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:a};await B()(s).then((async function(e){sessionStorage.setItem("auth-token",e.data.token),200==e.data.status&&await t._getHouseBitacora().then(()=>{t.cleanData(),t._setDefaultBitacora()}),"401"==e.data.status&&Swal.fire({icon:"error",text:e.data.mensaje,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}).then(t=>{t.isConfirmed&&"401"==e.data.status&&(router.push({name:"Login"}),setTimeout(()=>{window.location.reload()},10))})})).catch((function(t){console.log(t)})).finally((function(){t.loadingBotonBitacora=!t.loadingBotonBitacora}))}else t.$swal("","¡Debe registrar las bitácoras en el orden que aparecen en la lista!","error")}else t.$swal("","¡La bitacora es requerida!","error")},async _generateTrackingToken(){const t=Object(z["a"])();this.loadingBotonTracking=!this.loadingBotonTracking,await this._setTrackingToken(t),this.loadingBotonTracking=!this.loadingBotonTracking},async _setTrackingToken(t){var e=this,a={id_house:e.$route.params.id,token:t,fecha:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)},s={method:"put",url:"https://api.agentedecargaonline.com/setTrackingToken",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:a};await B()(s).then((function(t){sessionStorage.setItem("auth-token",t.data.token),t.data.estadoflag?e.$store.state.house_enlace_tracking="https://aco.agentedecargaonline.com/tracking/"+t.data.data[0].token:Swal.fire({icon:"401"==t.data.status?"error":"info",text:t.data.mensaje,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}).then(e=>{e.isConfirmed&&"401"==t.data.status&&(router.push({name:"Login"}),setTimeout(()=>{window.location.reload()},10))})})).catch((function(t){console.log(t)}))},async _copyEnlaceTracking(t){await navigator.clipboard.writeText(t)}}},Q=q,G=(a("aeb2"),Object(E["a"])(Q,R,U,!1,null,"c78b4a0c",null)),K=G.exports,J=a("67b6"),V=a("43a6"),Y=function(){var t=this,e=t._self._c;return e("div",[e("p",[t._v(t._s(t.selected_certificado))]),e("h3",[t._v("Servicios a Realizar")]),e(A["a"],{attrs:{"fixed-header":"",height:"605px",dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left",attrs:{width:"45%"}},[t._v("Servicio")]),e("th",{staticClass:"text-center",attrs:{width:"25%"}},[t._v("Realizado (Sí/No)")])])]),e("tbody",t._l(t.$store.state.itemsHouseServices,(function(a,o){return e("tr",{key:a.id,style:"background:"+a.color},[e("td",[t._v(t._s(a.nameservice))]),e("td",[e("div",{staticClass:"d-flex justify-center"},["CERTIFICADO DE ORIGEN"!=a.nameservice?e(F["a"],{attrs:{dense:"",color:"primary",disabled:t.getDisabledPropServiceStatus(o),readonly:""},on:{change:function(e){return t.toggleServiceStatusSwitch(a,o)}},model:{value:a.status,callback:function(e){t.$set(a,"status",e)},expression:"item.status"}}):t._e()],1),"CERTIFICADO DE ORIGEN"==a.nameservice?e(g["a"],{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:o,attrs:i}){return[e(s["a"],t._g(t._b({attrs:{large:"",color:"default"}},"v-btn",i,!1),o),[t._v(" "+t._s(1==a.status?"SI":0==a.status?"NO":2==a.status?"NO APLICA":"")+" ")])]}}],null,!0)},[e(_["a"],[e(m["a"],{attrs:{link:""},on:{click:function(e){return t._editServices(a.id,1)}}},[e(p["c"],[t._v("SI")])],1),e(m["a"],{attrs:{link:""},on:{click:function(e){return t._editServices(a.id,0)}}},[e(p["c"],[t._v("NO")])],1),e(m["a"],{attrs:{link:""},on:{click:function(e){return t._editServices(a.id,2)}}},[e(p["c"],[t._v("NO APLICA")])],1)],1)],1):t._e()],1)])})),0)]},proxy:!0}])}),e(s["a"],{attrs:{color:"success"},on:{click:t.abriModalaFormato}},[t._v("Exportar Formato")]),e(d["a"],{attrs:{"max-width":"30%"},model:{value:t.dialogFormato,callback:function(e){t.dialogFormato=e},expression:"dialogFormato"}},[e(o["a"],[e(i["d"],{attrs:{"primary-title":""}},[t._v(" Imprimir Formato "+t._s(t.tipoAreo?"GUÍA AÉREA":"BL")+" ")]),e(i["c"],[t._v(" Imprimir Con Fondo "),e(V["a"],{model:{value:t.formatoflag,callback:function(e){t.formatoflag=e},expression:"formatoflag"}},[e(J["a"],{attrs:{label:"Si",value:!0}}),e(J["a"],{attrs:{label:"No",value:!1}})],1)],1),e(i["a"],[t.tipoAreo?e(s["a"],{attrs:{color:"success",block:""},on:{click:function(e){return t.exportarFormatoAWB()}}},[t._v(" Imprimir Formato Guía Aérea ")]):e(s["a"],{attrs:{color:"success",block:""},on:{click:function(e){return t.exportarFormatoHBL()}}},[t._v(" Imprimir Formato BL ")])],1)],1)],1)],1)},W=[],X=(a("88a7"),a("271a"),a("5494"),a("c1df")),Z=a.n(X),tt={name:"services",props:{isFormActionsDisabled:Boolean},data:()=>({itemsCertificado:[{value:1,text:"Si"},{value:0,text:"No"},{value:2,text:"No Aplica"}],selected_certificado:"",dialogFormato:!1,formatoflag:!0}),computed:{getDisabledPropServiceStatus(){return t=>0!==t&&!this.$store.state.itemsHouseServices[t-1].status}},async mounted(){await this._validaData()},methods:{...Object(w["b"])(["getQuoteDataNoAsignadaHouseByIncoterms","_getPortBegin","_getPortEnd"]),send(){alert("Jpla")},_deleteServices(t){var e=this,a={id:t},s={method:"post",url:"https://api.agentedecargaonline.com/deleteServices",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:a};B()(s).then((async function(t){200==t.data.status&&await e._validaData()})).catch((function(t){console.log(t)}))},_activeServices(t){var e=this,a={id:t},s={method:"post",url:"https://api.agentedecargaonline.com/activeServices",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:a};B()(s).then((async function(t){200==t.data.status&&await e._validaData()})).catch((function(t){console.log(t)}))},_inactiveServices(t){var e=this,a={id:t},s={method:"post",url:"https://api.agentedecargaonline.com/inactiveServices",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:a};B()(s).then((async function(t){200==t.data.status&&await e._validaData()})).catch((function(t){console.log(t)}))},_editServices(t,e){var a=this,s={id:t,status:e},o={method:"post",url:"https://api.agentedecargaonline.com/editServices",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:s};B()(o).then((function(t){200==t.data.status&&a._validaData()})).catch((function(t){console.log(t)}))},async _validaData(){var t=this;if(t.$route.params.id){t.$store.state.house_Id_get=t.$route.params.id;var e={id:t.$route.params.id,id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch},a={method:"post",url:"https://api.agentedecargaonline.com/getHouseServices",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:e};await B()(a).then((function(e){if(sessionStorage.setItem("auth-token",e.data.token),e.data.estadoflag){let a=[],s=null;e.data.data.map((t,e)=>{"IMPUESTOS"==t.nameservice.toUpperCase()?s=t:a.push(t)}),null!==s&&a.push(s),t.$store.state.itemsHouseServices=a}else t.$store.state.itemsHouseServices=[]})).catch((function(t){console.log(t)}))}},showModalServices(){var t=this;t.$store.state.modalServices_manualMode=!1,!t.$store.state.house_cotizacion&&!t.$store.state.itemsHouseServices.length||!t.$store.state.house_incoterms&&!t.$store.state.itemsHouseServices.length?t.$swal({icon:"question",html:"<b>¿Desea asociar una cotización para cargar los servicios?</b>",showConfirmButton:!0,confirmButtonText:"Sí",confirmButtonColor:"#4CAF50",showDenyButton:!0,denyButtonText:"No tengo una cotización",allowOutsideClick:!1}).then(({isDenied:e})=>{e&&t.$swal({icon:"info",html:"<b>Los servicios se cargarán según el incoterm seleccionado. Si no ha seleccionado un incoterm, seleccione uno para cargar los servicios.</b>",showConfirmButton:!0,confirmButtonText:"Aceptar",confirmButtonColor:"#4CAF50",allowOutsideClick:!1}).then(async e=>{t.$store.state.house_incoterms&&(t.$store.state.spiner=!0,await t._getServicesByIncoterms(t.$store.state.house_sentido,t.$store.state.house_id_trasnport,t.$store.state.house_incoterms),t.$store.state.spiner=!1)})}):t.$store.state.itemsHouseServices.length&&(t.$store.state.modalServices_manualMode=!0)},toggleServiceStatusSwitch(t,e){t.status||(this.$store.state.itemsHouseServices=this.$store.state.itemsHouseServices.map((t,a)=>({...t,status:a>e?0:t.status})))},deleteService(t){this.$store.state.itemsHouseServices.splice(t,1)},async _activePort(t){await this._getPortBegin({id_transport:t}),await this._getPortEnd({id_transport:t}),1==this.$store.state.master_id_trasnport.id?this.$store.state.embar_title_nacn="Aerolinea":2==this.$store.state.master_id_trasnport.id?this.$store.state.embar_title_nacn="Naviera":3==this.$store.state.master_id_trasnport.id?this.$store.state.embar_title_nacn="Coloader":this.$store.state.embar_title_nacn="Aerolinea/Coloader/Naviera"},async _getServicesByIncoterms(t=0,e=0,a=0){var s=this,o={id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch,id_modality:t,id_shipment:e,id_incoterms:a},i={method:"post",url:"https://api.agentedecargaonline.com/getServicesByIncoterms",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:o};await B()(i).then((function(t){if(sessionStorage.setItem("auth-token",t.data.token),t.data.estadoflag){let e=[],a=null;t.data.data.map((t,s)=>{const o={id_begend:t.id_begend,namebegend:t.namebegend,position_begend:t.position_begend,nameservice:t.namegroupservice,status:0};"IMPUESTOS"==t.namegroupservice.toUpperCase()?a=o:e.push(o)}),null!==a&&e.push(a),s.$store.state.itemsHouseServices=e}else s.$store.state.itemsHouseServices=[],s.$swal({icon:"error",text:t.data.mensaje})})).catch((function(t){console.log(t)}))},abriModalaFormato(){this.dialogFormato=!0},async exportarFormatoAWB(){try{const t=await B()({method:"get",url:"https://api.agentedecargaonline.com/generar_formato_awb",params:{id_house:this.$route.params.id,formatoflag:this.formatoflag},headers:{"auth-token":sessionStorage.getItem("auth-token")},responseType:"blob"}),e=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=document.createElement("a");a.href=window.URL.createObjectURL(e);const s=Z()().format("YYYY_MM_DD_HH_mm_ss"),o=`formato_awb_${s}.xlsx`;a.download=o,a.click(),window.URL.revokeObjectURL(a.href)}catch(t){console.error("Error exportando archivo:",t)}this.dialogFormato=!1},async exportarFormatoHBL(){try{const t=await B()({method:"get",url:"https://api.agentedecargaonline.com/generar_formato_bl",params:{id_house:this.$route.params.id,formatoflag:this.formatoflag},headers:{"auth-token":sessionStorage.getItem("auth-token")},responseType:"blob"}),e=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a=document.createElement("a");a.href=window.URL.createObjectURL(e);const s=Z()().format("YYYY_MM_DD_HH_mm_ss"),o=`formato_bl_${s}.xlsx`;a.download=o,a.click(),window.URL.revokeObjectURL(a.href)}catch(t){console.error("Error exportando archivo:",t)}this.dialogFormato=!1}},computed:{tipoAreo(){let t=this.$store.state.itemsShipment.filter(t=>t.id==this.$store.state.house_id_trasnport);return t.length>0?"Aéreo"==t[0].code:(console.log(t),!0)}}},et=tt,at=(a("1d0e"),Object(E["a"])(et,Y,W,!1,null,"829cd8a2",null)),st=at.exports,ot=a("3d20"),it=a.n(ot),rt={name:"controlMasterCom",components:{dataGen:D,dataEmbar:P,Bitacora:K,services:st},data:()=>({selected:[],errorCuentas:"",headers:[{value:"label",text:"Nombre"},{value:"cuenta",text:"Cuenta"},{value:"cci",text:"CCI"},{value:"symbol",text:"Moneda"}],notificacion:null,abrirModalCuentasNotificacion:!1,statusData:!1,formControlHouseReadonly:!1,itemsNotificacionesImport:[{title:"Aviso de Salida",value:1},{title:"Actualización de Salida",value:2},{title:"Pre-Aviso de Llegada",value:3},{title:"Aviso de Llegada",value:4},{title:"Actualización de Llegada",value:5}],itemsNotificacionesExport:[{title:"Aviso de Salida",value:1},{title:"Actualización de Salida",value:2},{title:"Aviso de Llegada",value:3}],houseData:{},displayMenuNotificaciones:!1,loadingBotonNotificaciones:!1,loadingBotonGuardarHouse:!1,loadingBotonEliminarHouse:!1}),async mounted(){this.$store.state.spiner=!0,await this.verHouse(this.$route.params),this.$store.state.spiner=!1,await this.fetchDataBank({code:"",name:"",acronym:"",description:"",status:1})},computed:{...Object(w["c"])(["itemsModality","itemsShipment"])},methods:{...Object(w["b"])(["_getnroMaster","_getnroHouse","_getHouseList","atras","_getModality","_getShipment","getListBanksDetailsCargarPorSucursal","verHouse","fetchDataBank"]),_setMasterContainer(t,e,a){var s=this,o=JSON.stringify({id_master:t,id_containers:e,quantity:a,status:1}),i={method:"post",url:"https://api.agentedecargaonline.com/setMasterContainers",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:o};axios(i).then((function(t){})).catch((function(t){console.log(t),s.$swal({icon:"error",title:"Lo sentimos",text:t})}))},async _setHouseEdit(){var t=this;t.loadingBotonGuardarHouse=!t.loadingBotonGuardarHouse;var e=JSON.stringify({id_modality:this.$store.state.house_sentido?this.$store.state.house_sentido:"",id_shipment:this.$store.state.house_id_trasnport?this.$store.state.house_id_trasnport:"",id_consigner_real:t.$store.state.house_id_consigner_real?t.$store.state.house_id_consigner_real:"",id_port_begin:this.$store.state.house_origen?this.$store.state.house_origen:"",id_port_end:this.$store.state.house_destino?this.$store.state.house_destino:"",id_proveedor:t.$store.state.house_id_agente?t.$store.state.house_id_agente:"",id_consigner:t.$store.state.house_id_consigner?t.$store.state.house_id_consigner:"",id_notify:t.$store.state.house_id_notify?t.$store.state.house_id_notify:"",id_aerolinea:t.$store.state.house_id_airlines?t.$store.state.house_id_airlines:"",id_coloader:t.$store.state.house_id_coloader?t.$store.state.house_id_coloader:"",id_naviera:t.$store.state.house_id_naviera?t.$store.state.house_id_naviera:"",id_incoterms:t.$store.state.house_incoterms?t.$store.state.house_incoterms:"",nro_hbl:t.$store.state.house_blmaster?t.$store.state.house_blmaster:"",id_motonave:t.$store.state.house_id_motonave?t.$store.state.house_id_motonave:"",nro_viaje:t.$store.state.house_viaje?t.$store.state.house_viaje:"",bultos:t.$store.state.house_bultos?t.$store.state.house_bultos:"",peso:t.$store.state.house_peso?t.$store.state.house_peso:"",volumen:t.$store.state.house_volumen?t.$store.state.house_volumen:"",id_conditions:t.$store.state.house_id_condicion?t.$store.state.house_id_condicion:"",id_moneda:t.$store.state.house_id_coins?t.$store.state.house_id_coins:"",monto:t.$store.state.house_monto?t.$store.state.house_monto:"",id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch,id_cot:t.$store.state.house_cotizacion?t.$store.state.house_cotizacion:"",lstservices:this.$store.state.itemsHouseServices||[],id:t.$store.state.house_id}),a={method:"put",url:"https://api.agentedecargaonline.com/setHouseEdit",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:e};await axios(a).then((async function(e){sessionStorage.setItem("auth-token",e.data.token),"401"==e.data.status&&it.a.fire({icon:"error",text:e.data.mensaje,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}).then(t=>{t.isConfirmed&&"401"==e.data.status&&(router.push({name:"Login"}),setTimeout(()=>{window.location.reload()},10))}),t.statusData=!0,await t._getHouseList(),await t._getHouseById(),await t._getHouseServices(),t.$swal({icon:"success",title:"Excelente",text:"House actualizado éxitosamente"}).then(e=>{t.$store.state.houses.house.cantidad_houses_x_master>1&&t.$swal({icon:"question",html:"<b>¿Desea actualizar los costos en el Control de Gastos ahora?</b>",showConfirmButton:!0,confirmButtonText:"Sí",confirmButtonColor:"#4CAF50",showDenyButton:!0,denyButtonText:"No, en otro momento",allowOutsideClick:!1}).then(({isConfirmed:e})=>{e&&t.$router.push({name:"editControlGasto",params:{code_master:t.$store.state.houses.house.code_master,id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch}})})}),t.loadingBotonGuardarHouse=!t.loadingBotonGuardarHouse})).catch((function(e){console.log(e),t.$swal({icon:"error",title:"Lo sentimos",text:e})}))},eliminarHouse(){let t=this;t.$store.state.houses.house.cantidad_houses_x_master>1?it.a.fire({icon:"question",title:"ADVERTENCIA",text:"¿Está seguro que desea eliminar el house?",showDenyButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(async e=>{if(e.isConfirmed){t.loadingBotonEliminarHouse=!t.loadingBotonEliminarHouse;var a={method:"put",url:"https://api.agentedecargaonline.com/setHouseDelete/"+t.$route.params.id,headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"}};await axios(a).then((function(e){sessionStorage.setItem("auth-token",e.data.token),"401"==e.data.status&&it.a.fire({icon:"error",text:e.data.mensaje,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}).then(t=>{t.isConfirmed&&"401"==e.data.status&&(router.push({name:"Login"}),setTimeout(()=>{window.location.reload()},10))}),e.data.statusBol&&(it.a.fire({icon:"success",title:"REGISTRO ELIMINADO."}),t.loadingBotonEliminarHouse=!t.loadingBotonEliminarHouse,t.$router.go(-1))}))}}):it.a.fire({icon:"info",text:"Un expediente máster debe tener al menos un house asignado"})},isImportacion(){let t=!1,e=this.$store.state.houses.house.modality;return"Importación"==e&&(t=!0),t},isExportacion(){let t=!1,e=this.$store.state.houses.house.modality;return"Exportación"==e&&(t=!0),t},isAereo(){let t=!1,e=this.$store.state.house_id_trasnport,a=this.itemsShipment.filter(t=>t.id==e).length>0?this.itemsShipment.filter(t=>t.id==e)[0].code:"";return"Aéreo"==a&&(t=!0),t},isLCL(){let t=!1,e=this.$store.state.house_id_trasnport,a=this.itemsShipment.filter(t=>t.id==e).length>0?this.itemsShipment.filter(t=>t.id==e)[0].code:"";return"LCL"==a&&(t=!0),t},isFCL(){let t=!1,e=this.$store.state.house_id_trasnport,a=this.itemsShipment.filter(t=>t.id==e).length>0?this.itemsShipment.filter(t=>t.id==e)[0].code:"";return"FCL"==a&&(t=!0),t},getItemsNotificaciones(){return this.isImportacion()?this.itemsNotificacionesImport:this.isExportacion()?this.itemsNotificacionesExport:[]},getSentidoHouse(){return this.isImportacion()?"Import":this.isExportacion()?"Export":""},getTipoEmbarqueHouse(){return this.isAereo()?"Aéreo":this.isLCL()?"LCL":this.isFCL()?"FCL":""},async validarMenuNotificaciones(){var t=this;if(console.log(this.$store.state.bank),0==this.$store.state.bank.list.length)return it.a.fire({icon:"warning",title:"Cuentas Bancarias",text:"Para poder enviar la notificación. Es necesario al menos una cuenta bancaría"}),!1;if(!this.$store.state.bank.list.some(t=>t.banks_details.length>0))return it.a.fire({icon:"warning",title:"Cuentas Bancarias",text:"Para poder enviar la notificación. Es necesario al menos una cuenta bancaría."}),!1;t.displayMenuNotificaciones=!1;var e=[];t.$store.state.houses.house.id_modality||e.push("Sentido"),t.$store.state.houses.house.id_shipment||e.push("Tipo de Embarque"),t.$store.state.houses.house.id_port_begin||e.push("Puerto de Origen"),t.$store.state.houses.house.id_port_end||e.push("Puerto de Destino"),t.$store.state.houses.house.id_proveedor||e.push("Proveedor"),t.$store.state.houses.house.id_consigner||e.push("Cliente"),t.$store.state.houses.house.emailaddress_clientefinal||e.push("El cliente debe tener asignado un correo electrónico"),t.$store.state.houses.house.id_operador||e.push("Operador"),t.$store.state.houses.house.fecha_etd||e.push("Fecha ETD"),t.$store.state.houses.house.fecha_eta||e.push("Fecha ETA"),t.itemsShipment.filter(e=>e.id==t.$store.state.houses.house.id_shipment&&"FCL"==e.code).length||(t.$store.state.houses.house.bultos||e.push("Nº de bultos"),t.$store.state.houses.house.peso||e.push("Peso"),t.$store.state.houses.house.volumen||e.push("Volumen")),t.$store.state.houses.house.monto||e.push("Monto"),e.length?t.$swal({icon:"error",html:`\n            <b>¡El Expediente House requiere los siguientes datos para mostrar el menú de notificaciones!</b>\n            <br><br>\n            ${e.map(t=>`<p>${t}</p>`).join("")}\n          `}):t.displayMenuNotificaciones=!0},async _getHouseById(){var t=this,e={id:t.$route.params.id,id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch},a={method:"post",url:"https://api.agentedecargaonline.com/getHouseListId/",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:e};await axios(a).then((function(e){sessionStorage.setItem("auth-token",e.data.token),t.$store.state.houses.house=e.data.data&&e.data.data[0]})).catch((function(t){console.log(t)}))},irAVerMaster(){this.$router.push({name:"controlHouseEditar",id:this.$route.params.id}),window.location.reload()},async _getHouseServices(){var t=this;if(t.$route.params.id){var e={id:t.$route.params.id,id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch},a={method:"post",url:"https://api.agentedecargaonline.com/getHouseServices",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:e};await axios(a).then((function(e){if(sessionStorage.setItem("auth-token",e.data.token),e.data.estadoflag){let a=[],s=null;e.data.data.map((t,e)=>{"IMPUESTOS"==t.nameservice.toUpperCase()?s=t:a.push(t)}),null!==s&&a.push(s),t.$store.state.itemsHouseServices=a}else t.$store.state.itemsHouseServices=[]})).catch((function(t){console.log(t)}))}},sendNotificacion(t){this.selected=[],this.notificacion=t,this.abrirModalCuentasNotificacion=!0},async enviarNotificacion(t){if(this.errorCuentas="",0==this.selected.length)return this.errorCuentas="Es necesario al menos una cuenta",!1;var e=this;e.loadingBotonNotificaciones=!e.loadingBotonNotificaciones,await e._getHouseById();var a={id:e.$store.state.house_id,notificacion:t,house:e.$store.state.houses.house,user:JSON.parse(sessionStorage.getItem("dataUser"))[0],sentido:e.getSentidoHouse(),tipoEmbarque:e.getTipoEmbarqueHouse(),cuentasBancarias:e.selected,razonSocial:JSON.parse(sessionStorage.getItem("dataBranch"))[0].trade_name||""},s={method:"post",url:"https://api.agentedecargaonline.com/sendNotificacionHouse",headers:{"auth-token":sessionStorage.getItem("auth-token"),"Content-Type":"application/json"},data:a};await axios(s).then((function(t){sessionStorage.setItem("auth-token",t.data.token),"401"==t.data.status?it.a.fire({icon:"error",text:t.data.mensaje,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}).then(e=>{e.isConfirmed&&"401"==t.data.status&&(router.push({name:"Login"}),setTimeout(()=>{window.location.reload()},10))}):(e.abrirModalCuentasNotificacion=!1,e.$swal({icon:"success",title:"Excelente",text:"Notificación enviada éxitosamente"}))})).catch((function(t){console.log(t),e.$swal({icon:"error",title:"Lo sentimos",text:t})})).finally((function(){e.loadingBotonNotificaciones=!e.loadingBotonNotificaciones}))}}},nt=rt,ct=(a("057e"),Object(E["a"])(nt,v,b,!1,null,"792f9720",null));e["default"]=ct.exports},4752:function(t,e,a){},a091:function(t,e,a){"use strict";a("d017")},aeb2:function(t,e,a){"use strict";a("c946")},bdb8:function(t,e,a){},c946:function(t,e,a){},d017:function(t,e,a){}}]);