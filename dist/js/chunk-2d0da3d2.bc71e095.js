(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0da3d2"],{"6b6f":function(e,t,s){"use strict";s.r(t);var a=s("c6a6"),i=s("8336"),r=s("b0af"),n=s("99d9"),l=s("62ad"),o=s("a523"),c=s("8fea"),d=s("132d"),u=s("da13"),p=s("5d23"),m=s("f774"),h=s("8e36"),_=s("67b6"),v=s("43a6"),b=s("0fd9"),g=s("2fa4"),f=s("8654"),x=function(){var e=this,t=e._self._c;return t(r["a"],{staticClass:"px-5"},[t(r["a"],{attrs:{elevation:"0"}},[e.loading?t(o["a"],{staticStyle:{height:"400px"}},[t(b["a"],{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[t(l["a"],{staticClass:"text-subtitle-1 text-center",attrs:{cols:"12"}},[e._v(" Cargando información .... ")]),t(l["a"],{attrs:{cols:"6"}},[t(h["a"],{attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):e._e(),e.loading?e._e():t(n["d"],{staticClass:"elevation-0"},[t(f["a"],{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(g["a"]),t(i["a"],{staticClass:"mx-1",attrs:{small:"",color:"#2962FF",dark:""},on:{click:function(t){return e.open_filter()}}},[e._v(" Filtrar ")]),t(i["a"],{staticClass:"mx-1",attrs:{small:"",color:"#004D40",dark:""}},[e._v(" Exportar ")])],1),e.loading?e._e():t(c["a"],{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.$store.state.enterprises.list,"item-key":"id",search:e.search,dense:""},scopedSlots:e._u([{key:"item.status",fn:function({item:t}){return[e._v(" "+e._s(1==t.status?"Activo":"Inactivo")+" ")]}},{key:"item.action",fn:function({item:s}){return[t(i["a"],{attrs:{icon:""}},[t(d["a"],{attrs:{color:"warning"},on:{click:function(t){return e.updateEnterpriseRoute(s.id)}}},[e._v("mdi-pencil")])],1),t(i["a"],{attrs:{icon:""}},[t(d["a"],{attrs:{color:"success"},on:{click:function(t){return e.readEnterprise(s.id)}}},[e._v("mdi-eye")])],1),s.status?t(i["a"],{attrs:{icon:"",color:"red"},on:{click:function(t){return e.switch_status(s)}}},[t(d["a"],[e._v("mdi-delete")])],1):e._e()]}}],null,!0)})],1),t(m["a"],{attrs:{absolute:"",bottom:"",temporary:"",right:"",width:"30%",height:"100vh"},model:{value:e.showFilterDrawer,callback:function(t){e.showFilterDrawer=t},expression:"showFilterDrawer"}},[t(u["a"],[t(p["a"],[t(p["c"],{staticClass:"text-h6"},[e._v(" Filtrar Registros ")])],1)],1),t(g["a"]),t(o["a"],{attrs:{fluid:""}},[t(n["c"],[t(b["a"],[t(a["a"],{attrs:{label:"Tipo de Documento",items:e.itemsDocumentsPais,"item-text":"description","item-value":"id",clearable:""},model:{value:e.enterprise.id_document,callback:function(t){e.$set(e.enterprise,"id_document",t)},expression:"enterprise.id_document"}})],1),t(b["a"],[t(f["a"],{attrs:{type:"text",label:"N° de Documento",clearable:""},model:{value:e.enterprise.document,callback:function(t){e.$set(e.enterprise,"document",t)},expression:"enterprise.document"}})],1),t(b["a"],[t(f["a"],{attrs:{label:"Nombre Comercial",clearable:""},model:{value:e.enterprise.trade_name,callback:function(t){e.$set(e.enterprise,"trade_name",t)},expression:"enterprise.trade_name"}})],1),t(b["a"],[t(f["a"],{attrs:{label:"Nombre Negocio",clearable:""},model:{value:e.enterprise.business_name,callback:function(t){e.$set(e.enterprise,"business_name",t)},expression:"enterprise.business_name"}})],1),t(b["a"],[t(a["a"],{attrs:{label:"País",items:e.itemsPais,"item-value":"id","item-text":"name"},on:{change:function(t){return e._getState(e.enterprise.id_pais)}},model:{value:e.enterprise.id_pais,callback:function(t){e.$set(e.enterprise,"id_pais",t)},expression:"enterprise.id_pais"}})],1),t(b["a"],[t(a["a"],{attrs:{label:"Región",items:e.itemsState,clearable:"","item-value":"id","item-text":"name"},on:{change:function(t){return e._getCity(e.enterprise.id_state)}},model:{value:e.enterprise.id_state,callback:function(t){e.$set(e.enterprise,"id_state",t)},expression:"enterprise.id_state"}})],1),t(b["a"],[t(a["a"],{attrs:{label:"Provincia",items:e.itemsCity,clearable:"","item-value":"id","item-text":"name"},on:{change:function(t){return e._getTown(e.enterprise.id_city)}},model:{value:e.enterprise.id_city,callback:function(t){e.$set(e.enterprise,"id_city",t)},expression:"enterprise.id_city"}})],1),t(b["a"],[t(a["a"],{attrs:{label:"Distrito",clearable:"",items:e.itemsTown,"item-value":"id","item-text":"name"},model:{value:e.enterprise.id_town,callback:function(t){e.$set(e.enterprise,"id_town",t)},expression:"enterprise.id_town"}})],1),t(b["a"],[t(f["a"],{attrs:{label:"Dirección",clearable:""},model:{value:e.enterprise.address,callback:function(t){e.$set(e.enterprise,"address",t)},expression:"enterprise.address"}})],1),t(b["a"],[t(v["a"],{attrs:{row:"",dense:""},model:{value:e.enterprise.status,callback:function(t){e.$set(e.enterprise,"status",t)},expression:"enterprise.status"}},[t(_["a"],{attrs:{label:"Activo",color:"green",value:1}}),t(_["a"],{attrs:{label:"Inactivo",color:"red",value:0}}),t(_["a"],{attrs:{label:"Todos",color:"blue",value:"null"}})],1)],1)],1)],1),t(n["a"],{staticClass:"justify-end mt-3"},[t(i["a"],{staticClass:"mx-1",attrs:{color:"success"},on:{click:function(t){return e.filtar()}}},[e._v(" Aceptar")]),t(i["a"],{staticClass:"mx-1",attrs:{color:"ligth"},on:{click:function(t){return e.reset_records()}}},[e._v("Limpiar")]),t(i["a"],{staticClass:"mx-1",attrs:{dark:"",color:"warning"},on:{click:function(t){return e.volver()}}},[e._v(" Cerrar ")])],1)],1)],1)},w=[],k=(s("14d9"),s("2f62")),C=s("3d20"),y=s.n(C),D={name:"ListEnterpriseComponent",data(){return{headers:[{text:"Código",align:"start",value:"code"},{text:"Tipo de Documento",value:"td_name"},{text:"Nro. Documento",value:"document"},{text:"Nombre Comercial",value:"trade_name"},{text:"Nombre Negocio",value:"business_name"},{text:"País",value:"lp_name"},{text:"Región",value:"ls_name"},{text:"Provincia",value:"lc_name"},{text:"Distrito",value:"lt_name"},{text:"Dirección",value:"address"},{text:"Teléfono",value:"phone"},{text:"Estado",value:"status"},{text:"Creación",value:"created_at"},{text:"Última Actualización",value:"updated_at"},{text:"Acciones",value:"action"}],dataList:!1,item:"",showFilterDrawer:!1,search:"",status:!0,enterprise:{id_branch:JSON.parse(sessionStorage.getItem("dataUser"))[0].id_branch,id:"",slogan:"",document:"",trade_name:"",business_name:"",address:"",status:1,id_pais:"",id_state:"",id_city:"",id_town:"",id_document:"",id_logo:"",ic:""},loading:!0,originalenterprise:{}}},created(){this.originalenterprise={...this.enterprise}},async mounted(){this.$store.state.spiner=!1,await this.fetchDataEnterprise(this.enterprise),this.$store.state.mainTitle="EMPRESAS",await this._getDocumentsPais(),await this._getPais(),await this._callState()},watch:{"$store.state.enterprises.loading":{handler(e,t){this.loading=1!=e},immediate:!0}},methods:{...Object(k["b"])(["fetchDataEnterprise","readEnterprise","updateEnterprise","_getDocumentsPais","_getPais","_getState","_getCity","_getTown","switchEnterprise"]),updateStatus(e){this.enterprise.status=e?1:0},readEnterprise(e){this.$router.push({name:"readEnterprise",params:{id:e}})},async _callState(){this.id_pais>0&&await this._getState(this.id_pais)},volver(){this.$router.go(-1)},async filtar(){this.enterprise.status="null"==this.enterprise.status?"":this.enterprise.status,null===this.enterprise.slogan&&(this.enterprise.slogan=""),null===this.enterprise.document&&(this.enterprise.document=""),null===this.enterprise.trade_name&&(this.enterprise.trade_name=""),null===this.enterprise.business_name&&(this.enterprise.business_name=""),null===this.enterprise.address&&(this.enterprise.address=""),null===this.enterprise.status&&(this.enterprise.status=""),null===this.enterprise.id_pais&&(this.enterprise.id_pais=""),null===this.enterprise.id_state&&(this.enterprise.id_state=""),null===this.enterprise.id_city&&(this.enterprise.id_city=""),null===this.enterprise.id_town&&(this.enterprise.id_town=""),null===this.enterprise.id_document&&(this.enterprise.id_document=""),null===this.enterprise.id_logo&&(this.enterprise.id_logo=""),null===this.enterprise.ic&&(this.enterprise.ic=""),await this.fetchDataEnterprise(this.enterprise),this.showFilterDrawer=!1},updateEnterpriseRoute(e){this.$router.push({name:"updateEnterprise",params:{id:e}})},clear(){Object.assign(this.enterprise,this.originalenterprise)},async reset_records(){this.clear()},async switch_status(e){y.a.fire({title:"¿Estás seguro?",text:"Si inactiva el registro, éste no aparecerá disponible en otros formularios ¿Está seguro de que desea inactivarlo?",confirmButtonColor:"red",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, inactivar",cancelButtonColor:"orange",cancelButtonText:"Cancelar"}).then(async t=>{t.isConfirmed&&(e.status=0,this.clear(),await this.updateEnterprise(e))})},open_filter(){this.showFilterDrawer=!this.showFilterDrawer}},computed:{...Object(k["c"])(["itemsDocumentsPais","itemsPais","itemsState","itemsCity","itemsTown"])}},E=D,$=s("2877"),S=Object($["a"])(E,x,w,!1,null,null,null);t["default"]=S.exports}}]);