(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dbcbc9f0"],{"0865":function(t,e,s){"use strict";s("72fa")},"17b3":function(t,e,s){},"72fa":function(t,e,s){},"891e":function(t,e,s){"use strict";s("17b3");var a=s("9d26"),i=s("dc22"),o=s("a9ad"),r=s("de2c"),n=s("7560"),l=s("58df");e["a"]=Object(l["a"])(o["a"],Object(r["a"])({onVisible:["init"]}),n["a"]).extend({name:"v-pagination",directives:{Resize:i["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:t=>t%1===0},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data(){return{maxButtons:0,selected:null}},computed:{classes(){return{"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled,...this.themeClasses}},items(){const t=parseInt(this.totalVisible,10);if(0===t||isNaN(this.length)||this.length>Number.MAX_SAFE_INTEGER)return[];const e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);const s=e%2===0?1:0,a=Math.floor(e/2),i=this.length-a+1+s;if(this.value>a&&this.value<i){const t=1,e=this.length,i=this.value-a+2,o=this.value+a-2-s,r=i-1===t+1?2:"...",n=o+1===e-1?o+1:"...";return[1,r,...this.range(i,o),n,this.length]}if(this.value===a){const t=this.value+a-1-s;return[...this.range(1,t),"...",this.length]}if(this.value===i){const t=this.value-a+1;return[1,"...",...this.range(t,this.length)]}return[...this.range(1,a),"...",...this.range(i,this.length)]}},watch:{value(){this.init()}},beforeMount(){this.init()},methods:{init(){this.selected=null,this.onResize(),this.$nextTick(this.onResize),setTimeout(()=>this.selected=this.value,100)},onResize(){const t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range(t,e){const s=[];t=t>0?t:1;for(let a=t;a<=e;a++)s.push(a);return s},genIcon(t,e,s,i,o){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":s},attrs:{disabled:s,type:"button","aria-label":o},on:s?{}:{click:i}},[t(a["a"],[e])])])},genItem(t,e){const s=e===this.value&&(this.color||"primary"),a=e===this.value,i=a?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(s,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":a,"aria-label":this.$vuetify.lang.t(i,e)},on:{click:()=>this.$emit("input",e)}}),[e.toString()])},genItems(t){return this.items.map((e,s)=>t("li",{key:s},[isNaN(Number(e))?t("span",{class:"v-pagination__more"},[e.toString()]):this.genItem(t,e)]))},genList(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render(t){const e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}})},a9f3:function(t,e,s){"use strict";s.r(e);var a=s("0798"),i=s("c6a6"),o=s("8336"),r=s("b0af"),n=s("99d9"),l=s("62ad"),c=s("a523"),d=s("169a"),p=s("4bd4"),u=s("132d"),h=s("891e"),g=s("67b6"),v=s("43a6"),m=s("0fd9"),f=s("1f4f"),_=s("2fa4"),C=s("8654"),b=(s("e9f5"),s("910d"),function(){var t=this,e=t._self._c;return e(c["a"],[e(l["a"],{attrs:{cols:"12"}},[[e("div",{staticClass:"text-center"},[e(h["a"],{attrs:{length:t.$store.state.pricing.opcionCostos.filter(t=>!!t.selected).length,circle:""},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)]],2),e(d["a"],{staticClass:"classDialog",attrs:{scrollable:"",persistent:"","max-width":"50%",transition:"dialog-transition"},model:{value:t.aprobarflag,callback:function(e){t.aprobarflag=e},expression:"aprobarflag"}},[e(r["a"],[e(n["d"],{attrs:{"primary-title":""}},[t._v(" SELECCIONE EL EXPEDIENTE A ASOCIAR: "),e(_["a"]),e(o["a"],{attrs:{icon:"",color:"default"},on:{click:function(e){t.aprobarflag=!t.aprobarflag}}},[e(u["a"],[t._v("mdi-close")])],1)],1),e(n["c"],[e(p["a"],{ref:"frmAprobar"},[e(m["a"],[e(i["a"],{staticClass:"mx-5 my-5",attrs:{items:t.$store.state.itemsMasterList,label:"Expediente","item-text":"code_master","item-value":"id",rules:[t=>!!t||"Dato Requerido"],"no-data-text":t.noDataText()},on:{change:function(e){return t.verificarMaster()}},model:{value:t.id_exp,callback:function(e){t.id_exp=e},expression:"id_exp"}})],1)],1),t.mostrarAdvertencia?e(a["a"],{attrs:{border:"left","colored-border":"",type:"error",elevation:"2"}},[t._v(" El Master seleccionado no coincide con "+t._s(t.textValidacionCotizacionMaster.join(", "))+" asociados a la cotización. "),e("h3",[t._v("¿Está seguro, de asociar la cotización a este registro?")])]):t._e()],1),e(n["a"],[e(_["a"]),e(o["a"],{staticClass:"mx-1",attrs:{small:"",color:"success",loading:t.loading},on:{click:function(e){return t.continuarAprobar()}}},[t._v(" SELECCIONAR ")]),e(o["a"],{staticClass:"mx-1",attrs:{small:"",color:"error"},on:{click:function(e){t.aprobarflag=!t.aprobarflag}}},[t._v(" Cancelar ")])],1)],1)],1),e(d["a"],{staticClass:"classDialog",attrs:{scrollable:"",persistent:"","max-width":"35%",transition:"dialog-transition"},model:{value:t.seleccionQuoteAprobar,callback:function(e){t.seleccionQuoteAprobar=e},expression:"seleccionQuoteAprobar"}},[e(r["a"],{staticClass:"pa-5"},[e("h2",{staticClass:"blue--text justify--text"},[t._v(" ESTÁS A PUNTO DE GENERAR UN INSTRUCTIVO A OPERACIONES ")]),t._v(" Seleccione la opción aprobada por el cliente: "),e(n["c"],[e(p["a"],{ref:"frmAprobar"},[e(v["a"],{attrs:{rules:[t=>!!t||"Seleccione una opción"]},model:{value:t.nro_propuesta,callback:function(e){t.nro_propuesta=e},expression:"nro_propuesta"}},t._l(t.$store.state.pricing.opcionCostos.filter(t=>t.selected),(function(s,a){return e(g["a"],{key:a,attrs:{value:s.nro_propuesta,label:`Opción ${s.nro_propuesta} - ${t.getProveedor(s)}`}})})),1)],1)],1),e(n["a"],[e(_["a"]),e(o["a"],{staticClass:"mx-1",attrs:{color:"success"},on:{click:function(e){return t.abrirModalAprobar()}}},[t._v(" Enviar a Operaciones - Tráfico ")]),e(o["a"],{staticClass:"mx-1",attrs:{color:"error"},on:{click:function(e){t.seleccionQuoteAprobar=!t.seleccionQuoteAprobar}}},[t._v("Cancelar")])],1)],1)],1),e("div",{staticClass:"col-12 mb-0 pa-0"},[e(o["a"],{staticClass:"mx-1",attrs:{color:"#FF4500",elevation:"2",small:""},on:{click:function(e){return t.imprimir()}}},[e(u["a"],{attrs:{color:"white"}},[t._v("mdi-printer-outline")])],1),t.mostrarBtnAprobar()?e(o["a"],{staticClass:"mx-1",attrs:{color:"#004D40",elevation:"2",small:""},on:{click:function(e){return t.abrirSeleccionDeQuoteAAprobar()}}},[e("span",{staticStyle:{color:"#ffffff"}},[t._v("Enviar a Operaciones/ Tráfico")])]):t._e(),e("center",[e("h3",[t._v(" INSTRUCTIVO COMPRA "+t._s(t.$store.state.pricing.listInstructivo[0].expediente)+" - N°"+t._s(t.$store.state.pricing.listIngresosInstructivo[t.page-1].nro_propuesta)+" ")]),e("h3",{staticClass:"mb-1 ml-1"},[t._v(" "+t._s(1==t.$store.state.pricing.aprobadoflag?"APROBADO":t.$store.state.pricing.listQuoteStatus.filter(e=>e.id==t.$store.state.pricing.datosPrincipales.id_status)[0].name)+" | Exp. Master: "+t._s(t.$store.state.pricing.listInstructivo[0].code_master?t.$store.state.pricing.listInstructivo[0].code_master:"--")+" | Exp. House: "+t._s(t.$store.state.pricing.listInstructivo[0].code_house?t.$store.state.pricing.listInstructivo[0].code_house:"--")+" ")]),e("h4",{staticClass:"mb-1 ml-1"},[t._v(" "+t._s(t.$store.state.pricing.listInstructivo[0].sentido)+" - "+t._s(t.$store.state.pricing.listInstructivo[0].carga)+" - "+t._s(t.$store.state.pricing.listInstructivo[0].incoterms)+" ")])])],1),e(m["a"],[e(l["a"],{attrs:{cols:"12",md:"4",lg:"4",xl:"4"}},[e(l["a"],{attrs:{cols:"12"}},[e(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[e("h4",{staticClass:"mb-5 ml-1"},[t._v("DATOS DEL CLIENTE")]),e(C["a"],{staticClass:"my-1",attrs:{readonly:"",label:"NOMBRE:",dense:""},model:{value:t.$store.state.pricing.datosPrincipales.nombre,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"nombre",e)},expression:"$store.state.pricing.datosPrincipales.nombre"}}),e(C["a"],{staticClass:"my-1",attrs:{readonly:"",label:"DIRECCIÓN:",dense:""},model:{value:t.$store.state.pricing.listInstructivo[0].direccion,callback:function(e){t.$set(t.$store.state.pricing.listInstructivo[0],"direccion",e)},expression:"$store.state.pricing.listInstructivo[0].direccion"}}),e(C["a"],{staticClass:"my-1",attrs:{readonly:"",label:"CONTACTO:",dense:""},model:{value:t.$store.state.pricing.datosPrincipales.telefono,callback:function(e){t.$set(t.$store.state.pricing.datosPrincipales,"telefono",e)},expression:"$store.state.pricing.datosPrincipales.telefono"}}),e(C["a"],{staticClass:"my-1",attrs:{readonly:"",label:"VENDEDOR:",dense:""},model:{value:t.$store.state.pricing.vendedor,callback:function(e){t.$set(t.$store.state.pricing,"vendedor",e)},expression:"$store.state.pricing.vendedor"}})],1)],1),e(l["a"],{attrs:{cols:"12"}},[e(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[e("h4",{staticClass:"mb-1 ml-1"},[t._v("SERVICIOS A REALIZAR")]),e(f["a"],{attrs:{dense:""}},[e("tbody",t._l(t.$store.state.pricing.listServiciosInstructivo,(function(s,a){return e("tr",{key:a},[e("td",[t._v(t._s(s.name))]),e("td",[t._v(t._s(s.status))])])})),0)])],1)],1),e(l["a"],{attrs:{cols:"12"}},[e(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[e("h4",{staticClass:"mb-5 ml-1"},[t._v("DATOS DE MOVIMIENTO DE MERCANCIA")]),e(C["a"],{staticClass:"my-1",attrs:{dense:"",label:"NOMBRE DEL PROVEEDOR:",required:""},model:{value:t.$store.state.pricing.listInstructivo[0].proveedor,callback:function(e){t.$set(t.$store.state.pricing.listInstructivo[0],"proveedor",e)},expression:"$store.state.pricing.listInstructivo[0].proveedor"}}),"SXWORK"==t.$store.state.pricing.listInstructivo[0].icotems?e(C["a"],{staticClass:"my-1",attrs:{dense:"",readonly:"",label:"DIRECCION ORIGEN:"},model:{value:t.$store.state.pricing.listInstructivo[0].direccionorigen,callback:function(e){t.$set(t.$store.state.pricing.listInstructivo[0],"direccionorigen",e)},expression:"$store.state.pricing.listInstructivo[0].direccionorigen"}}):t._e(),e(C["a"],{staticClass:"my-1",attrs:{dense:"",readonly:"",label:"POL:"},model:{value:t.$store.state.pricing.listInstructivo[0].origen,callback:function(e){t.$set(t.$store.state.pricing.listInstructivo[0],"origen",e)},expression:"$store.state.pricing.listInstructivo[0].origen"}}),e(C["a"],{staticClass:"my-1",attrs:{dense:"",readonly:"",label:"POD:"},model:{value:t.$store.state.pricing.listInstructivo[0].destino,callback:function(e){t.$set(t.$store.state.pricing.listInstructivo[0],"destino",e)},expression:"$store.state.pricing.listInstructivo[0].destino"}}),e(C["a"],{staticClass:"my-1",attrs:{dense:"",required:"",label:"NOMBRE FISCAL"},model:{value:t.$store.state.pricing.listInstructivo[0].fiscal,callback:function(e){t.$set(t.$store.state.pricing.listInstructivo[0],"fiscal",e)},expression:"$store.state.pricing.listInstructivo[0].fiscal"}}),e(C["a"],{staticClass:"my-1",attrs:{dense:"",readonly:"",label:"RUC:"},model:{value:t.$store.state.pricing.listInstructivo[0].ruc,callback:function(e){t.$set(t.$store.state.pricing.listInstructivo[0],"ruc",e)},expression:"$store.state.pricing.listInstructivo[0].ruc"}})],1)],1),e(l["a"],{attrs:{cols:"12"}},[e(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[e("h4",{staticClass:"mb-5 ml-1"},[t._v(" NOTAS ESPECIALES: "),e(o["a"],{attrs:{color:"success",icon:""},on:{click:function(e){t.dialog=!t.dialog}}},[e(u["a"],[t._v("mdi-plus")])],1)],1),e(f["a"],{attrs:{dense:"",border:""}},[e("tbody",t._l(t.$store.state.pricing.listInstructivo[0].notas,(function(s,a){return e("tr",{key:a},[e("td",[t._v(t._s(s.description))])])})),0)])],1)],1),e("div",{staticClass:"col-12"})],1),e(l["a"],{attrs:{cols:"12",md:"8",lg:"8",xl:"8"}},[e(m["a"],[e(l["a"],{attrs:{cols:"12"}},[e(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[e("h4",{staticClass:"mb-1 ml-1"},[t._v("INGRESOS")]),e(f["a"],{attrs:{dense:""}},[e("thead",[e("tr",[e("th",{staticClass:"header align-right"}),e("th",{staticClass:"header align-left"},[t._v("DESCRIPCIÓN")]),e("th",{staticClass:"header align-right"}),e("th",{staticClass:"header align-right"},[t._v("TOTAL")])])]),e("tbody",t._l(t.$store.state.pricing.listIngresosInstructivo[t.page-1].opcion,(function(s,a){return e("tr",{key:a,class:["TOTAL"===s.descripcion?"totalClass":"SubTotal"===s.descripcion?"subTotalClass":"","TOTAL"===s.service?"totalClass":"SubTotal"===s.service?"subTotalClass":""]},[e("td",[t._v(" "+t._s(s.descripcion)+" ")]),e("td",[t._v(" "+t._s(s.service)+" ")]),e("td",{staticClass:"align-right"},[t._v(" "+t._s(s.igv)+" ")]),e("td",{staticClass:"align-right"},[t._v(" "+t._s(s.total)+" ")])])})),0)])],1)],1),e(l["a"],{attrs:{cols:"12"}},[e(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[e("h4",{staticClass:"mb-1 ml-1"},[t._v("COSTOS:")]),e(f["a"],{attrs:{dense:""}},[e("thead",[e("tr",[e("th",{staticClass:"header"}),e("th",{staticClass:"header align-left"},[t._v("DESCRIPCIÓN")]),e("th",{staticClass:"header align-right"},[t._v("TOTAL")])])]),e("tbody",t._l(t.$store.state.pricing.listCostosInstructivo[t.page-1].opcion,(function(s,a){return e("tr",{key:a,class:["TOTAL"===s.proveedor?"totalClass":"SubTotal"===s.proveedor?"subTotalClass":"","TOTAL"===s.service?"totalClass":"SubTotal"===s.service?"subTotalClass":""]},[e("td",[t._v(" "+t._s(s.proveedor)+" ")]),e("td",[t._v(" "+t._s(s.service)+" ")]),e("td",{staticClass:"align-right"},[t._v(" "+t._s(s.total)+" ")])])})),0)])],1)],1),t.$store.state.pricing.listImpuestosInstructivo.length>0?e(l["a"],{attrs:{cols:"12"}},[e(r["a"],{staticClass:"pa-1",attrs:{elevation:"5"}},[e("h4",{staticClass:"mb-1 ml-1"},[t._v("IMPUESTOS")]),e(f["a"],{attrs:{dense:""}},[e("thead",[e("tr",[e("th",{staticClass:"header align-left"},[t._v("DESCRIPCIÓN")]),e("th",{staticClass:"header align-left"},[t._v("PORCENTAJE")]),e("th",{staticClass:"header align-right"},[t._v("TOTAL")])])]),e("tbody",t._l(t.$store.state.pricing.listImpuestosInstructivo[t.page-1].opcion,(function(s,a){return e("tr",{key:a,class:["TOTAL"===s.name?"totalClass":"SubTotal"===s.name?"subTotalClass":""]},[e("td",[t._v(" "+t._s(s.name)+" ")]),e("td",[t._v(" "+t._s(s.percentage)+" ")]),e("td",{staticClass:"align-right"},[t._v(" "+t._s(s.valor)+" ")])])})),0)])],1)],1):t._e()],1)],1)],1),e(d["a"],{attrs:{"max-width":"600px",transition:"dialog-transition"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(r["a"],[e(n["d"],{attrs:{"primary-title":""}},[t._v(" NUEVA NOTA: ")]),e(n["c"],[e(p["a"],{ref:"nota"},[e(C["a"],{attrs:{label:"DESCRIPCIÓN"},model:{value:t.descripcionNota,callback:function(e){t.descripcionNota=e},expression:"descripcionNota"}})],1)],1),e(n["a"],[e(o["a"],{attrs:{color:"success",text:""},on:{click:t.guardarNota}},[t._v("Añadir")])],1)],1)],1),e(d["a"],{attrs:{persistent:"","max-width":"30%",transition:"dialog-transition"},model:{value:t.dialogConfig,callback:function(e){t.dialogConfig=e},expression:"dialogConfig"}},[e(r["a"],[e("ConfigCotizacion"),e(n["a"],[e(_["a"]),e(o["a"],{staticClass:"mx-1",attrs:{color:"success"},on:{click:function(e){return t.guardarConfig()}}},[t._v(" Guardar ")])],1)],1)],1),e(d["a"],{staticClass:"classDialog",attrs:{scrollable:"",persistent:"","max-width":"50%",transition:"dialog-transition"},model:{value:t.dialogHouse,callback:function(e){t.dialogHouse=e},expression:"dialogHouse"}},[e(r["a"],{attrs:{cass:"px-5 "}},[e(n["d"],{attrs:{"primary-title":""}},[t._v(" CREAR NUEVO HOUSE O ASOCIAR A UNO "),e(_["a"]),e(o["a"],{attrs:{icon:"",color:"default"},on:{click:function(e){t.dialogHouse=!t.dialogHouse}}},[e(u["a"],[t._v("mdi-close")])],1)],1),e(n["c"],[e(i["a"],{attrs:{items:t.lstHouse,"item-text":"code_house","item-value":"id"},on:{change:t.validarExistePagosHouse},model:{value:t.id_house,callback:function(e){t.id_house=e},expression:"id_house"}}),0==t.id_house||t.textValidacionPago?t._e():e(i["a"],{attrs:{items:t.optionHouse,"item-value":"id"},on:{change:t.validarExistePagosMaster},model:{value:t.id_opcion_house,callback:function(e){t.id_opcion_house=e},expression:"id_opcion_house"}}),e("p",{staticClass:"red--text mx-5 my-0"},[t._v(" "+t._s(t.textValidacionPago)+" ")])],1),e(n["a"],[e(_["a"]),e(o["a"],{staticClass:"mx-1",attrs:{small:"",color:"success",disabled:t.activarBtnContinuar},on:{click:function(e){return t.aprobar()}}},[t._v(" APROBAR ")]),e(o["a"],{staticClass:"mx-1",attrs:{small:"",color:"error"},on:{click:function(e){t.dialogHouse=!t.dialogHouse}}},[t._v(" Cancelar ")])],1)],1)],1),e(d["a"],{staticClass:"classDialog",attrs:{scrollable:"",persistent:"","max-width":"50%",transition:"dialog-transition"},model:{value:t.dialogCostos,callback:function(e){t.dialogCostos=e},expression:"dialogCostos"}},[e(r["a"],{attrs:{cass:"px-5"}},[e(n["d"],{attrs:{"primary-title":""}},[t._v(" OPCIÓN SOBRE LOS COSTOS "),e(_["a"]),e(o["a"],{attrs:{icon:"",color:"default"},on:{click:function(e){t.dialogCostos=!t.dialogCostos}}},[e(u["a"],[t._v("mdi-close")])],1)],1),e(n["c"],[e(i["a"],{attrs:{items:t.optionCostos,"item-value":"id"},on:{change:t.validarExistePagosMaster},model:{value:t.id_opcion,callback:function(e){t.id_opcion=e},expression:"id_opcion"}})],1),e("p",{staticClass:"red--text mx-5 my-0"},[t._v(" "+t._s(t.textValidacionPago)+" ")]),e(n["a"],[e(_["a"]),e(o["a"],{staticClass:"mx-1",attrs:{small:"",color:"success",disabled:t.activarBtnContinuar},on:{click:t.buscarHouseAsociadosAMaster}},[t._v(" CONITNUAR ")]),e(o["a"],{staticClass:"mx-1",attrs:{small:"",color:"error"},on:{click:function(e){t.dialogCostos=!t.dialogCostos}}},[t._v(" Cancelar ")])],1)],1)],1)],1)}),I=[],x=(s("14d9"),s("a732"),s("2f62")),A=s("3d20"),$=s.n(A),E=s("c1df"),y=s.n(E),O=s("54e1"),T=s("bc3a"),S=s.n(T),w={mixins:[O["a"]],components:{ConfigCotizacion:()=>s.e("chunk-2d0de6e3").then(s.bind(null,"862a"))},data(){return{nuevoexpediente:"",aprobarflag:"",id_exp:"",fecha_validez:"",descripcionNota:"",dialog:!1,seleccionQuoteAprobar:!1,opcionesSeleccionadas:[],page:1,nro_propuesta:"",mostrarAdvertencia:!1,textValidacionCotizacionMaster:[],dialogConfig:!1,dialogCostos:!1,textValidacionPago:"",activarBtnContinuar:!0,loading:!1,lstHouse:[],dialogHouse:!1,id_house:"",optionCostos:[{id:"0",text:"No hacer ninguna acción"},{id:"1",text:"Reemplazar los costos, ya existente de proveedores"},{id:"2",text:"Sumar los nuevos costos, a los costos ya existentes de proveedores"}],optionHouse:[{id:"1",text:"Reemplazar los nuevos montos, ya existente del house"},{id:"2",text:"Sumar los nuevos montos, a los costos ya existentes del house"}],id_opcion:"0",id_opcion_house:"0"}},async mounted(){this.$nextTick(async()=>{setTimeout(async()=>{await this.generaInstructivoparaguardata()},4e3)})},methods:{...Object(x["b"])(["imprimirInstructivoQuote","aprobarCotizacion","cargarMaster","setNoteQuote","getInstructivoId","generaInstructivoparaguardata","GuardarConfiguracionEmpresa","ObtenerDatosConfig"]),async guardarConfig(){await this.GuardarConfiguracionEmpresa(),await this.ObtenerDatosConfig(),this.dialogConfig=!1,this.abrirSeleccionDeQuoteAAprobar()},verificarMaster(){this.mostrarAdvertencia=!1,this.textValidacionCotizacionMaster=[];let t=this.$store.state.itemsMasterList.filter(t=>t.id==this.id_exp)[0];this.$store.state.pricing.datosPrincipales.idsentido!=t.id_modality&&(this.mostrarAdvertencia=!0,this.textValidacionCotizacionMaster.push("Modalidad")),this.$store.state.pricing.datosPrincipales.idtipocarga!=t.id_shipment&&(this.mostrarAdvertencia=!0,this.textValidacionCotizacionMaster.push("Tipó de Cargar")),this.$store.state.pricing.datosPrincipales.idincoterms!=t.id_incoterms&&(this.mostrarAdvertencia=!0,this.textValidacionCotizacionMaster.push("Incoterms")),this.$store.state.pricing.datosPrincipales.idorigen!=t.id_port_begin&&(this.mostrarAdvertencia=!0,this.textValidacionCotizacionMaster.push("Puerto de origien")),this.$store.state.pricing.datosPrincipales.iddestino!=t.id_port_end&&(this.mostrarAdvertencia=!0,this.textValidacionCotizacionMaster.push("Puerto de Destino"))},async imprimir(){for(let t=0;t<this.$store.state.pricing.opcionCostos.filter(t=>!!t.selected).length;t++)(function(t){this.imprimirInstructivoQuote(this.$store.state.pricing.opcionCostos[t].nro_propuesta)}).call(this,t)},async guardarNota(){if(this.$refs.nota.validate()){this.$store.state.spiner=!0;let t={name:this.descripcionNota,id_quote:this.$route.params.id};await this.setNoteQuote(t),this.$refs.nota.reset(),await this.getInstructivoId({id:this.$route.params.id}),this.dialog=!1,this.$store.state.spiner=!1}},async abrirSeleccionDeQuoteAAprobar(){let t=JSON.parse(sessionStorage.getItem("ConfigEmpresa"));if(this.dialogConfig=!t.existemaster,this.dialogConfig)return!1;await this.cargarMaster(this.$store.state.pricing.datosPrincipales),this.seleccionQuoteAprobar=!0},mostrarBtnAprobar(){return!this.$store.state.pricing.aprobadoflag},async abrirModalAprobar(){if(await this.generaInstructivoparaguardata(),this.$refs.frmAprobar.validate()){let t=this.$store.state.pricing.opcionCostos.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].date_end,e=y()(t).isSameOrAfter(y()(),"day");if(!e)return $.a.fire({icon:"warning",title:"Advertencia",text:"No se puede aprobar ya que la validez ya expiró."}).then(()=>!1);e=y()(t,"YYYY-MM-DD").isSameOrAfter(y()().add(15,"days").startOf("day"));let s=y()(),a=y()(t),i=a.diff(s,"days");if(!e)return $.a.fire({icon:"question",title:"Advertencia",text:`Quedan ${i+1} días de validez. ¿Desea continuar.? `,allowEnterKey:!1,allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonText:"Enviar a Operaciones.",cancelButtonText:"No aprobar."}).then(t=>{if(t.isDismissed)return!1;this.nuevoexpediente=!0,this.id_exp="";let e=this;$.a.fire({icon:"question",iconColor:"red",width:1e3,html:this.$store.state.itemsMasterList.length>0?"<h1>¿Desea crear un nuevo expediente o seleccionar uno registrado?</h1>":"<h1>¿Desea crear un nuevo expediente?</h1>",showConfirmButton:!0,confirmButtonText:"CREAR NUEVO EXPEDIENTE",showDenyButton:this.$store.state.itemsMasterList.length>0,denyButtonText:"SELECCIONAR EXPEDIENTE YA CREADO",showCloseButton:!0,showCancelButton:!1,allowOutsideClick:!1}).then(async t=>{t.isConfirmed&&$.a.fire({icon:"warning",width:1e3,title:"Fecha de Disponibilidad - Master",html:'<input type="date" id="swal-input1" class="swal2-input">\n              <p>Si es Importación seria el ETA </p>\n              <p>SI  es Exportación Colocar el ETD </p>\n              <p style="color:red">Esto te Ayudara a Controlar tus Operaciones  </p>\n\n\n              ',allowOutsideClick:!1,confirmButtonText:"ACEPTAR",showCancelButton:!0,cancelButtonText:"CANCELAR",preConfirm:()=>{const t=document.getElementById("swal-input1").value;if(t){const e=y()(t,"YYYY-MM-DD"),s=y()();if(!e.isSameOrBefore(s))return t;$.a.showValidationMessage("La fecha debe ser mayor que la fecha actual")}else $.a.showValidationMessage("La fecha de validez es requerida")}}).then(async t=>{this.fecha_validez=t.value,console.log("b",this.$store.state.pricing.listIngresosInstructivoAprobar);this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta);let s=this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataIngresos.filter(t=>"TOTAL"===t.descripcion)[0].igv,a=this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataIngresos.filter(t=>"TOTAL"===t.descripcion)[0].valor,i=this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataCostos,o=this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataVentas;t.isConfirmed&&($.a.fire({icon:"info",title:"Aprobando Cotizacion",timerProgressBar:!0,allowOutsideClick:!1,timer:null,didOpen:()=>{$.a.showLoading()}}),await e.aprobarCotizacion({id_quote:e.$route.params.id,nuevoexpediente:!0,id_exp:e.id_exp,fecha_validez:e.fecha_validez,totalIngreso:a,igvIngreso:s,valorIngreso:a,listCostosInstructivo:i,listVentasInstructivo:o,id_house:this.id_house,id_opcion:this.id_opcion}),this.$store.state.spiner=!0,this.$store.state.spiner=!1)}),t.isDenied&&(this.nuevoexpediente=!1,this.aprobarflag=!0)})});{this.nuevoexpediente=!0,this.id_exp="";let t=this;$.a.fire({icon:"question",iconColor:"red",width:1e3,html:this.$store.state.itemsMasterList.length>0?"<h1>¿Desea crear un nuevo expediente o seleccionar uno registrado?</h1>":"<h1>¿Desea crear un nuevo expediente?</h1>",showConfirmButton:!0,confirmButtonText:"CREAR NUEVO EXPEDIENTE",showDenyButton:this.$store.state.itemsMasterList.length>0,denyButtonText:"SELECCIONAR EXPEDIENTE YA CREADO",showCloseButton:!0,showCancelButton:!1,allowOutsideClick:!1}).then(async e=>{e.isConfirmed&&$.a.fire({icon:"warning",width:1e3,title:"Fecha de Disponibilidad - Master",html:'<input type="date" id="swal-input1" class="swal2-input">\n              <p>Si es Importación seria el ETA </p>\n              <p>SI  es Exportación Colocar el ETD </p>\n              <p style="color:red">Esto te Ayudara a Controlar tus Operaciones  </p>\n\n\n              ',allowOutsideClick:!1,confirmButtonText:"ACEPTAR",showCancelButton:!0,cancelButtonText:"CANCELAR",preConfirm:()=>{const t=document.getElementById("swal-input1").value;if(t){const e=y()(t,"YYYY-MM-DD"),s=y()();if(!e.isSameOrBefore(s))return t;$.a.showValidationMessage("La fecha debe ser mayor que la fecha actual")}else $.a.showValidationMessage("La fecha de validez es requerida")}}).then(async e=>{this.fecha_validez=e.value,console.log("a",this.$store.state.pricing.listIngresosInstructivoAprobar);this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta);let s=this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataIngresos.filter(t=>"TOTAL"===t.descripcion)[0].igv,a=this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataIngresos.filter(t=>"TOTAL"===t.descripcion)[0].valor,i=this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataCostos,o=this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataVentas;e.isConfirmed&&($.a.fire({icon:"info",title:"Aprobando Cotizacion",timerProgressBar:!0,allowOutsideClick:!1,timer:null,didOpen:()=>{$.a.showLoading()}}),await t.aprobarCotizacion({id_quote:t.$route.params.id,nuevoexpediente:!0,id_exp:t.id_exp,fecha_validez:t.fecha_validez,totalIngreso:a,igvIngreso:s,valorIngreso:a,listCostosInstructivo:i,listVentasInstructivo:o,id_house:this.id_house,id_opcion:this.id_opcion}),this.$store.state.spiner=!0,this.$store.state.spiner=!1)}),e.isDenied&&(this.nuevoexpediente=!1,this.aprobarflag=!0)})}}},async validarExistePagosMaster(){if(this.activarBtnContinuar=!0,this.textValidacionPago="","1"==this.id_opcion){var t={method:"get",url:"https://api.agentedecargaonline.com/validar_existe_pago_master",headers:{"Content-Type":"application/json","auth-token":sessionStorage.getItem("auth-token")},params:{id:this.id_exp}};let e=await S()(t).then(t=>t.data);return this.activarBtnContinuar=e.estadoflag,this.textValidacionPago=e.mensaje,void(this.loading=!1)}this.activarBtnContinuar=!1},async validarExistePagosHouse(){this.activarBtnContinuar=!0,this.textValidacionPago="";var t={method:"get",url:"https://api.agentedecargaonline.com/validar_existe_pago_house",headers:{"Content-Type":"application/json","auth-token":sessionStorage.getItem("auth-token")},params:{id:this.id_house}};let e=await S()(t).then(t=>t.data);this.activarBtnContinuar=e.estadoflag,this.textValidacionPago=e.mensaje},async buscarHouseAsociadosAMaster(){this.lstHouse=[];var t={method:"get",url:"https://api.agentedecargaonline.com/cargar_house_asociado_master",headers:{"Content-Type":"application/json","auth-token":sessionStorage.getItem("auth-token")},params:{id_master:this.id_exp}};this.loading=!0;let e=await S()(t).then(t=>t.data);this.loading=!1,e.estadoflag&&(this.lstHouse=e.data),this.lstHouse.unshift({id:0,code_house:"CREAR UN NUEVO HOUSE"}),this.activarBtnContinuar=!0,this.textValidacionPago="",this.aprobarflag=!1,this.dialogHouse=!0},continuarAprobar(){this.id_opcion="",this.aprobarflag=!1,this.dialogCostos=!0},async aprobar(){await this.generaInstructivoparaguardata();this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta);let t=this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataIngresos.filter(t=>"TOTAL"===t.descripcion)[0].igv,e=this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataIngresos.filter(t=>"TOTAL"===t.descripcion)[0].valor,s=this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataCostos,a=this.$store.state.pricing.listIngresosInstructivoAprobar.filter(t=>t.nro_propuesta==this.nro_propuesta)[0].dataVentas;this.$refs.frmAprobar.validate()&&($.a.fire({icon:"info",title:"Aprobando Cotizacion",timerProgressBar:!0,allowOutsideClick:!1,timer:null,didOpen:()=>{$.a.showLoading()}}),await this.aprobarCotizacion({id_quote:this.$route.params.id,nuevoexpediente:!1,id_exp:this.id_exp,fecha_validez:this.fecha_validez,totalIngreso:e,igvIngreso:t,valorIngreso:e,listCostosInstructivo:s,listVentasInstructivo:a,id_house:this.id_house,id_opcion:this.id_opcion,id_opcion_house:this.id_opcion_house}),this.$store.state.spiner=!0,this.aprobarflag=!1,this.$store.state.spiner=!1)},noDataText(){return"No se encontraron Masters con la misma Modalidad, Tipo de Carga, Incoterms y/o Puerto Origen/ Destino asociados a la cotización."},getProveedor(t){let e=t.listCostos.some(t=>4==t.code_cost&&1==t.esopcionflag)?t.listCostos.filter(t=>4==t.code_cost&&1==t.esopcionflag)[0].id_proveedor:"",s=e?this.$store.state.provedores.filter(t=>t.id==e)[0].namelong:"";return s}}},N=w,k=(s("0865"),s("2877")),D=Object(k["a"])(N,b,I,!1,null,"14d0511c",null);e["default"]=D.exports}}]);