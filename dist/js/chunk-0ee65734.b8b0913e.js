(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ee65734"],{"1e29":function(t,i,e){},4819:function(t,i,e){"use strict";e.r(i);var s=e("ac7c"),a=e("62ad"),o=e("a523"),r=e("0fd9"),l=e("1f4f"),c=function(){var t=this,i=t._self._c;return i(o["a"],{attrs:{fluid:""}},[i("h1",[t._v("Comparativa de Costos")]),i(r["a"],[i(a["a"],{attrs:{cols:"12"}},[i(l["a"],{staticClass:"elevation-1 my-7",attrs:{dense:""}},[i("thead",[i("tr",t._l(t.headers,(function(e,s){return i("th",{key:s,staticClass:"centrado"},[t._v(" "+t._s(e.text)+" ")])})),0)]),i("tbody",t._l(t.opcionesSeleccionadas,(function(e,a){return i("tr",{key:a},[i("td",[t._v("Opción - "+t._s(e.nro_propuesta))]),i("td",[t._v(t._s(e.proveedor))]),t.flete?i("td",{staticClass:"centrado"},[t._v(" "+t._s(e.flete)+" ")]):t._e(),t.origen?i("td",{staticClass:"centrado"},[t._v(" "+t._s(e.origen)+" ")]):t._e(),t.local?i("td",{staticClass:"centrado"},[t._v(" "+t._s(e.local)+" ")]):t._e(),t.aduana?i("td",{staticClass:"centrado"},[t._v(" "+t._s(e.aduana)+" ")]):t._e(),t.almacen?i("td",{staticClass:"centrado"},[t._v(" "+t._s(e.almacen)+" ")]):t._e(),t.gastostercero?i("td",{staticClass:"centrado"},[t._v(" "+t._s(e.gastostercero)+" ")]):t._e(),i("td",{staticClass:"totalClass"},[t._v(t._s(e.total))]),i("td",{staticClass:"centrado"},[t._v(t._s(e.tiempo_transito)+" días")]),i("td",[i(s["a"],{staticClass:"mx-auto",attrs:{label:"",disabled:""},model:{value:e.selected,callback:function(i){t.$set(e,"selected",i)},expression:"opcion.selected"}})],1)])})),0)])],1)],1)],1)},n=[],d=(e("14d9"),e("e9f5"),e("910d"),e("7d54"),e("a732"),e("54e1")),p=e("3d20"),u=e.n(p),h={mixins:[d["a"]],data(){return{loadingTable:!1,headers:[],opcionesSeleccionadas:[],resumenOpcion:{flete:0,origen:0,gasto:0,aduana:0,almacen:0,gastostercero:0},flete:!1,origen:!1,local:!1,aduana:!1,almacen:!1,gastostercero:!1}},async mounted(){await this.calcularTotalesOpciones(),setTimeout(async()=>{await this.agregarFilasAlHeader()},120)},methods:{regregar(){u.a.fire({width:1e3,icon:"question",html:`<h1>¿Desea regresar a la OPCIÓN - COSTOS ${this.$store.state.pricing.opcionCostos.length}?<h1>`,confirmButtonColor:"green",showCancelButton:!0,cancelButtonColor:"red",confirmButtonText:"<h1>Si, volver</h1>",cancelButtonText:"<h1>Cancelar</h1>",showCloseButton:!0,allowEnterKey:!1,allowEscapeKey:!1,allowOutsideClick:!1}).then(t=>{t.isConfirmed&&(this.$store.state.pricing.tab=2)})},bloquearSeleccionada(t){return 1==this.$store.state.pricing.opcionCostos.length||(!(!t.selected||1!=this.$store.state.pricing.opcionCostos.filter(t=>t.selected).length)||void 0)},agregarFilasAlHeader(){this.headers=[{text:"Tarifa de Costos",value:"tarifa"},{text:"Proveedor Flete",value:"proveedor"}],this.opcionesSeleccionadas.some(t=>parseFloat(t.flete)>0)&&this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"FL"==t.codigo)[0].name,value:"flete"}),this.opcionesSeleccionadas.some(t=>t.flete!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"FL"==t.codigo)[0].name,value:"flete",cellClass:"centrado"}),this.flete=!0),this.opcionesSeleccionadas.some(t=>t.origen!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"OR"==t.codigo)[0].name,value:"origen"}),this.origen=!0),this.opcionesSeleccionadas.some(t=>t.local!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"LO"==t.codigo)[0].name,value:"local"}),this.local=!0),this.opcionesSeleccionadas.some(t=>t.aduana!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"AD"==t.codigo)[0].name,value:"aduana"}),this.aduana=!0),this.opcionesSeleccionadas.some(t=>t.almacen!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"AL"==t.codigo)[0].name,value:"almacen"}),this.almacen=!0),this.opcionesSeleccionadas.some(t=>t.gastostercero!=this.currencyFormat(0))&&(this.headers.push({text:this.$store.state.pricing.listTipoCostos.filter(t=>"GT"==t.codigo)[0].name,value:"gastostercero"}),this.gastostercero=!0),this.headers.push({text:"TOTAL",value:"total"}),this.headers.push({text:"TIEMPO EN TRÁNSITO",value:"tiempo_transito"}),this.headers.push({text:"SELECCIONE",value:"selected"})},continuar(){this.$store.state.pricing.tab=2},async calcularTotalesOpciones(){this.opcionesSeleccionadas=[],this.loadingTable=!0,this.$store.state.pricing.opcionCostos.forEach(t=>{let i=t.listCostos.some(t=>1==t.esopcionflag&&4==t.code_cost)?t.listCostos.filter(t=>1==t.esopcionflag&&4==t.code_cost)[0].id_proveedor:"",e=i?this.$store.state.provedores.filter(t=>t.id==i)[0].namelong:"";setTimeout(async()=>{await this.calcTotales(t.listCostos),t.proveedor=e,t.flete=this.resumenOpcion.flete?this.currencyFormat(this.resumenOpcion.flete):this.currencyFormat(0),t.origen=this.resumenOpcion.origen?this.currencyFormat(this.resumenOpcion.origen):this.currencyFormat(0),t.local=this.resumenOpcion.gasto?this.currencyFormat(this.resumenOpcion.gasto):this.currencyFormat(0),t.aduana=this.resumenOpcion.aduana?this.currencyFormat(this.resumenOpcion.aduana):this.currencyFormat(0),t.almacen=this.resumenOpcion.almacen?this.currencyFormat(this.resumenOpcion.almacen):this.currencyFormat(0),t.gastostercero=this.resumenOpcion.gastostercero?this.currencyFormat(this.resumenOpcion.gastostercero):this.currencyFormat(0),t.total=this.currencyFormat(parseFloat(this.resumenOpcion.flete?this.resumenOpcion.flete:0)+parseFloat(this.resumenOpcion.origen?this.resumenOpcion.origen:0)+parseFloat(this.resumenOpcion.gasto?this.resumenOpcion.gasto:0)+parseFloat(this.resumenOpcion.aduana?this.resumenOpcion.aduana:0)+parseFloat(this.resumenOpcion.almacen?this.resumenOpcion.almacen:0)+parseFloat(this.resumenOpcion.gastostercero?this.resumenOpcion.gastostercero:0)),this.opcionesSeleccionadas.push(t)},100)}),this.loadingTable=!1},async calcTotales(t){await this.calcularTotalesFlete(t),await this.calcularTotalesNoFlete(t)},calcularTotalesFlete(t){this.totalOption=0,this.resumenOpcion={flete:0,origen:0,gasto:0,aduana:0,almacen:0,gastostercero:0},this.isFlete(t)&&t.filter(t=>1==t.esfleteflag&&1==t.status&&1==t.esopcionflag).forEach(t=>{this.isNotPorcentaje(t,t.id_multiplicador)?this.resumenOpcion.flete+=(this.$store.state.pricing.listMultiplicador.filter(i=>i.id==t.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(i=>i.id==t.id_multiplicador)[0].valor:0)*t.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(i=>i.id==t.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(i=>i.id==t.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount):this.resumenOpcion.flete+=this.calcularValor(this.$store.state.pricing.datosPrincipales.amount,this.$store.state.pricing.totalFlete,this.$store.state.pricing.listMultiplicador.filter(i=>i.id==t.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(i=>i.id==t.id_multiplicador)[0].code:"",this.$store.state.pricing.listMultiplicador.some(i=>i.id==t.id_multiplicador&&(14==i.code||13==i.code||5==i.code))?this.$store.state.pricing.listMultiplicador.some(i=>i.id==t.id_multiplicador&&(14==i.code||13==i.code))?t.cif:t.seguro:0)})},calcularTotalesNoFlete(t){this.resumenOpcion={flete:this.resumenOpcion.flete,origen:0,gasto:0,aduana:0,almacen:0,gastostercero:0},t.filter(t=>1==t.status&&1==t.esopcionflag).forEach(i=>{this.isOrigen(t)&&1==i.esorigenflag&&(this.isNotPorcentaje(i,i.id_multiplicador)?this.resumenOpcion.origen+=(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].valor:0)*i.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount):this.resumenOpcion.origen+=this.calcularValor(this.$store.state.pricing.datosPrincipales.amount,this.$store.state.pricing.totalFlete,this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].code:"",this.$store.state.pricing.listMultiplicador.some(t=>t.id==i.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.pricing.listMultiplicador.some(t=>t.id==i.id_multiplicador&&(14==t.code||13==t.code))?i.cif:i.seguro:0)),this.isLocal(t)&&i.eslocalflag&&(this.isNotPorcentaje(i,i.id_multiplicador)?this.resumenOpcion.gasto+=(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].valor:0)*i.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount):this.resumenOpcion.gasto+=this.calcularValor(this.$store.state.pricing.datosPrincipales.amount,this.$store.state.pricing.totalFlete,this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].code:"",this.$store.state.pricing.listMultiplicador.some(t=>t.id==i.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.pricing.listMultiplicador.some(t=>t.id==i.id_multiplicador&&(14==t.code||13==t.code))?i.cif:i.seguro:0)),this.isAduana(t)&&1==i.esaduanaflag&&(this.isNotPorcentaje(i,i.id_multiplicador)?this.resumenOpcion.aduana+=(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].valor:0)*i.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount):this.resumenOpcion.aduana+=this.calcularValor(this.$store.state.pricing.datosPrincipales.amount,this.$store.state.pricing.totalFlete,this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].code:"",this.$store.state.pricing.listMultiplicador.some(t=>t.id==i.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.pricing.listMultiplicador.some(t=>t.id==i.id_multiplicador&&(14==t.code||13==t.code))?i.cif:i.seguro:0)),this.isAlmacen(t)&&i.esalmacenflag&&(this.isNotPorcentaje(i,i.id_multiplicador)?this.resumenOpcion.almacen+=(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].valor:0)*i.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount):this.resumenOpcion.almacen+=this.calcularValor(this.$store.state.pricing.datosPrincipales.amount,this.$store.state.pricing.totalFlete,this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].code:"",this.$store.state.pricing.listMultiplicador.some(t=>t.id==i.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.pricing.listMultiplicador.some(t=>t.id==i.id_multiplicador&&(14==t.code||13==t.code))?i.cif:i.seguro:0)),this.isGastosTercero(t)&&i.esgastostercerosflag&&(this.isNotPorcentaje(i,i.id_multiplicador)?this.resumenOpcion.gastostercero+=(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].valor:0)*i.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount):this.resumenOpcion.gastostercero+=this.calcularValor(this.$store.state.pricing.datosPrincipales.amount,this.$store.state.pricing.totalFlete,this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador).length>0?this.$store.state.pricing.listMultiplicador.filter(t=>t.id==i.id_multiplicador)[0].code:"",this.$store.state.pricing.listMultiplicador.some(t=>t.id==i.id_multiplicador&&(14==t.code||13==t.code||5==t.code))?this.$store.state.pricing.listMultiplicador.some(t=>t.id==i.id_multiplicador&&(14==t.code||13==t.code))?i.cif:i.seguro:0))})},isFlete(t){let i=t.some(t=>1==t.esfleteflag&&1==t.status);return i},isOrigen(t){let i=t.some(t=>1==t.esorigenflag&&1==t.status);return i},isLocal(t){let i=t.some(t=>1==t.eslocalflag&&1==t.status);return i},isAduana(t){let i=t.some(t=>1==t.esaduanaflag&&1==t.status);return i},isAlmacen(t){let i=t.some(t=>1==t.esalmacenflag&&1==t.status);return i},isGastosTercero(t){let i=t.some(t=>1==t.esgastostercerosflag&&1==t.status);return i},isConfeccion(t){return 33==t},montoConfeccion(t){let i=0;if(33==t.code_cost){let t=this.$store.state.pricing.datosPrincipales.amount,e=parseFloat(t)+parseFloat(this.$store.state.pricing.totalFlete)+.01*(parseFloat(t)+parseFloat(this.$store.state.pricing.totalFlete));e<5e3&&(i=50),e>=5e3&&e<1e4&&(i=80),e>=1e4&&(i=80+parseFloat(.0025*e))}return t.costounitario=parseFloat(i).toFixed(2),this.currencyFormat(i)},isITBM(t){return 38==t},montoITBM(t){let i=0,e=[29,36,41,68];if(38==t.code_cost){let t=data.filter(t=>e.includes(t.code_cost));t.forEach(t=>{i+=parseFloat((this.$store.state.pricing.listMultiplicador.some(i=>i.id==t.id_multiplicador)?this.$store.state.pricing.listMultiplicador.filter(i=>i.id==t.id_multiplicador)[0].valor:0)*t.costounitario*this.calcularFac(this.$store.state.pricing.listMultiplicador.some(i=>i.id==t.id_multiplicador)?this.$store.state.pricing.listMultiplicador.filter(i=>i.id==t.id_multiplicador)[0].code:"N",this.$store.state.pricing.datosPrincipales.volumen,this.$store.state.pricing.datosPrincipales.peso,this.$store.state.pricing.datosPrincipales.containers,this.$store.state.pricing.datosPrincipales.amount))})}return t.costounitario=parseFloat(.07*i).toFixed(2),this.currencyFormat(parseFloat(.07*i).toFixed(2))},isNotaCredito(t){return 69==t},montoNotaCredito(t){let i=0,e=[33];if(69==t.code_cost){let t=data.filter(t=>e.includes(t.code_cost));t.forEach(t=>{i=t.costounitario})}return t.costounitario=-1*parseFloat(.5*i).toFixed(2),this.currencyFormat(-1*parseFloat(.5*i).toFixed(2))},isNotPorcentaje(t,i){let e=[5,13,14],s=this.$store.state.pricing.listMultiplicador.some(t=>t.id==i&&e.includes(t.code));return!s},abrirModal(){this.dialog=!this.dialog,this.limpiar()}},watch:{async actualizarComparativa(){await this.calcularTotalesOpciones(),setTimeout(async()=>{await this.agregarFilasAlHeader()},1e3)}},computed:{actualizarComparativa:{get(){return this.$store.state.pricing.actualizarComparativa},set(t){return this.$store.state.pricing.actualizarComparativa=actualizarComparativa}}}},g=h,m=(e("9b9b"),e("2877")),f=Object(m["a"])(g,c,n,!1,null,"1e561400",null);i["default"]=f.exports},"9b9b":function(t,i,e){"use strict";e("1e29")}}]);